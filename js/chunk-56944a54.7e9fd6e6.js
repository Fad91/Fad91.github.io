(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56944a54"],{"06c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3");var r=n("6b75");function i(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(e,t):void 0}}},"0d2c":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"worker-navigation"},[n("AppButtonIcon",{directives:[{name:"show",rawName:"v-show",value:"workerStatistics"===e.$route.name,expression:"$route.name === 'workerStatistics'"}],attrs:{icon:"av_timer",size:"1.8rem",title:"–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–∏–æ–¥"},on:{"button-click":function(t){return e.$emit("show-period-popup")}}}),n("div",{staticClass:"save",on:{click:function(t){return e.$emit("save-worker")}}},[n("AppButtonIcon",{directives:[{name:"show",rawName:"v-show",value:"workerEdit"===e.$route.name,expression:"$route.name === 'workerEdit'"}],attrs:{title:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏"}}),n("span",{staticClass:"save-span"},[e._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])],1),n("AppButtonIcon",{attrs:{size:"0.5rem"}}),n("AppButtonIcon",{directives:[{name:"show",rawName:"v-show",value:"workerStatistics"!==e.$route.name,expression:"$route.name !== 'workerStatistics'"}],attrs:{icon:"timeline",size:"1.8rem",title:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"},on:{"button-click":function(t){return e.$router.push({name:"workerStatistics",params:{id:e.worker.id}})}}}),n("AppButtonIcon",{directives:[{name:"show",rawName:"v-show",value:"workerAbout"!==e.$route.name,expression:"$route.name !== 'workerAbout'"}],attrs:{icon:"remove_red_eye",size:"1.8rem",title:"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å"},on:{"button-click":function(t){return e.$router.push({name:"workerAbout",params:{id:e.worker.id}})}}}),n("AppButtonIcon",{directives:[{name:"show",rawName:"v-show",value:"workerCalendar"!==e.$route.name,expression:"$route.name !== 'workerCalendar'"}],attrs:{icon:"date_range",size:"1.8rem",title:"–ö–∞–ª–µ–Ω–¥–∞—Ä—å"},on:{"button-click":function(t){return e.$router.push({name:"workerCalendar",params:{id:e.worker.id}})}}}),n("AppButtonIcon",{directives:[{name:"show",rawName:"v-show",value:"workerHistory"!==e.$route.name,expression:"$route.name !== 'workerHistory'"}],attrs:{icon:"description",size:"1.8rem",title:"–ò—Å—Ç–æ—Ä–∏—è"},on:{"button-click":function(t){return e.$router.push({name:"workerHistory",params:{id:e.worker.id}})}}}),n("AppButtonIcon",{directives:[{name:"show",rawName:"v-show",value:"workerEdit"!==e.$route.name,expression:"$route.name !== 'workerEdit'"}],attrs:{icon:"create",size:"1.8rem",title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"},on:{"button-click":function(t){return e.$router.push({name:"workerEdit",params:{id:e.worker.id}})}}}),n("AppButtonIcon",{attrs:{icon:"transfer_within_a_station",size:"1.8rem",title:"–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–∞–±–æ—á–∏–º"},on:{"button-click":function(t){return e.$router.push("/workers")}}})],1)},i=[],o=n("5530"),a=n("260b"),s=n("2f62"),u=n("373c"),c={name:"WorkerNavigation",components:{AppButtonIcon:u["a"]},props:{worker:Object},methods:Object(o["a"])(Object(o["a"])({},Object(s["d"])(["SET_WORKERS_FROM_SERVER"])),{},{removeWorker:function(e){var t=this;a["a"].database().ref("/workers/"+e).remove().then((function(){t.SET_WORKERS_FROM_SERVER(),console.log("–†–∞–±–æ—á–∏–π —É–¥–∞–ª—ë–Ω üóëÔ∏è")})),this.$router.push("/workers")}})},l=c,h=(n("b0b0"),n("2877")),f=Object(h["a"])(l,r,i,!1,null,null,null);t["a"]=f.exports},"1d9b":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app-edit"}},[n("AppEditWrapper",{attrs:{header:"–†–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞–±–æ—á–µ–≥–æ: "+e.editedWorker.surname+" "+e.editedWorker.name},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[n("WorkerNavigation",{attrs:{worker:e.editedWorker},on:{"save-worker":function(t){return e.saveEditedWorker(e.editedWorker)}}})]},proxy:!0},{key:"edit-section",fn:function(){return[n("div",{staticClass:"edit-wrapper"},[n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"–§–ò–û"}}),n("div",{staticClass:"edit-block-content"},[n("div",[n("div",[n("p",[e._v("–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è:")]),n("input",{ref:"fileInput",staticClass:"profile-load",attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}})]),n("div",[n("p",[e._v("–ü—Ä–æ–≥—Ä–µ—Å—Å: "+e._s(e.uploadValue.toFixed()+"%")+" "),n("progress",{attrs:{id:"progress",max:"100"},domProps:{value:e.uploadValue}})]),n("div",{staticClass:"ad-form__photo"})]),n("div",[n("img",{directives:[{name:"show",rawName:"v-show",value:null!=e.editedWorker.profileImage||void 0,expression:"editedWorker.profileImage != null || '' || undefined"}],staticClass:"preview-profile",attrs:{src:e.editedWorker.profileImage,width:"200"}}),n("h6",[n("span",[n("a",{directives:[{name:"show",rawName:"v-show",value:null!=e.editedWorker.profileImage||void 0,expression:"editedWorker.profileImage != null || '' || undefined"}],attrs:{href:e.editedWorker.profileImage,target:"_blank"}},[e._v("–û—Ç–∫—Ä—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ")])])]),n("button",{on:{click:e.onUpload}},[e._v("–ó–∞–≥—Ä—É–∑–∏—Ç—å")])])]),n("AppLineText",{attrs:{inputID:"input-surname",label:"–§–∞–º–∏–ª–∏—è: ",maxLength:"20"},model:{value:e.editedWorker.surname,callback:function(t){e.$set(e.editedWorker,"surname",t)},expression:"editedWorker.surname"}}),n("AppLineText",{attrs:{inputID:"input-name",label:"–ò–º—è: ",maxLength:"20"},model:{value:e.editedWorker.name,callback:function(t){e.$set(e.editedWorker,"name",t)},expression:"editedWorker.name"}}),n("AppLineText",{attrs:{inputID:"input-patronymic",label:"–û—Ç—á–µ—Å—Ç–≤–æ: ",maxLength:"20"},model:{value:e.editedWorker.patronymic,callback:function(t){e.$set(e.editedWorker,"patronymic",t)},expression:"editedWorker.patronymic"}})],1)],1),n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"book","header-text":"–ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"}}),n("div",{staticClass:"edit-block-content"},[n("div",[n("div",[n("p",[e._v("–§–æ—Ç–æ –ø–∞—Å–ø–æ—Ä—Ç–∞:")]),n("input",{ref:"fileInput",staticClass:"profile-load",attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}})]),n("div",[n("p",[e._v("–ü—Ä–æ–≥—Ä–µ—Å—Å: "+e._s(e.uploadPassportValue.toFixed()+"%")+" "),n("progress",{attrs:{id:"progress-passport",max:"100"},domProps:{value:e.uploadPassportValue}})])]),n("div",[n("img",{directives:[{name:"show",rawName:"v-show",value:null!=e.editedWorker.passportImage||void 0,expression:"editedWorker.passportImage != null || '' || undefined"}],staticClass:"preview-profile",attrs:{src:e.editedWorker.passportImage,width:"200"}}),n("h6",[n("span",[n("a",{directives:[{name:"show",rawName:"v-show",value:null!=e.editedWorker.passportImage||void 0,expression:"editedWorker.passportImage != null || '' || undefined"}],attrs:{href:e.editedWorker.passportImage,target:"_blank"}},[e._v("–û—Ç–∫—Ä—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ")])])]),n("button",{on:{click:e.onPassportUpload}},[e._v("–ó–∞–≥—Ä—É–∑–∏—Ç—å")])])]),n("AppLineText",{attrs:{inputID:"input-passport-id",label:"–ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞: ",maxLength:"20"},model:{value:e.editedWorker.passportID,callback:function(t){e.$set(e.editedWorker,"passportID",t)},expression:"editedWorker.passportID"}}),n("AppLineText",{attrs:{inputID:"input-passport-date",label:"–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏: ",maxLength:"20"},model:{value:e.editedWorker.passportDate,callback:function(t){e.$set(e.editedWorker,"passportDate",t)},expression:"editedWorker.passportDate"}}),n("AppLineText",{attrs:{inputID:"input-passport-issued",label:"–ö–µ–º –≤—ã–¥–∞–Ω: ",maxLength:"220"},model:{value:e.editedWorker.passportIssued,callback:function(t){e.$set(e.editedWorker,"passportIssued",t)},expression:"editedWorker.passportIssued"}}),n("AppLineText",{attrs:{inputID:"input-passport-address",label:"–ê–¥—Ä–µ—Å: ",maxLength:"200"},model:{value:e.editedWorker.address,callback:function(t){e.$set(e.editedWorker,"address",t)},expression:"editedWorker.address"}})],1)],1),n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"assignment","header-text":"–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"}}),n("div",{staticClass:"edit-block-content"},[n("label",{staticClass:"birthday-label",attrs:{for:"birthday"}},[e._v("–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.editedWorker.birthday,expression:"editedWorker.birthday"}],staticClass:"date-input",attrs:{type:"date",placeholder:"–¥–¥-–º–º-–≥–≥–≥–≥",min:"1900-01-01",max:"2099-12-31"},domProps:{value:e.editedWorker.birthday},on:{input:function(t){t.target.composing||e.$set(e.editedWorker,"birthday",t.target.value)}}})]),n("AppSelect",{attrs:{selectID:"select-bank",label:"–ü–æ–ª: "},model:{value:e.editedWorker.sex,callback:function(t){e.$set(e.editedWorker,"sex",t)},expression:"editedWorker.sex"}},[n("option",{staticClass:"editor-option",attrs:{value:"–ú—É–∂—Å–∫–æ–π"}},[e._v("–ú—É–∂—Å–∫–æ–π")]),n("option",{staticClass:"editor-option",attrs:{value:"–ñ–µ–Ω—Å–∫–∏–π"}},[e._v("–ñ–µ–Ω—Å–∫–∏–π")])]),n("AppLineText",{attrs:{inputID:"input-nationality",label:"–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: ",maxLength:"50"},model:{value:e.editedWorker.nationality,callback:function(t){e.$set(e.editedWorker,"nationality",t)},expression:"editedWorker.nationality"}}),n("AppLineText",{attrs:{inputID:"input-medical-book",label:"–ú–µ–¥.–∫–Ω–∏–∂–∫–∞: ",maxLength:"20"},model:{value:e.editedWorker.medicalBook,callback:function(t){e.$set(e.editedWorker,"medicalBook",t)},expression:"editedWorker.medicalBook"}}),n("AppLineText",{attrs:{inputID:"input-education",label:"–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: ",maxLength:"30"},model:{value:e.editedWorker.education,callback:function(t){e.$set(e.editedWorker,"education",t)},expression:"editedWorker.education"}}),n("AppLineText",{attrs:{inputID:"input-university",label:"–í–£–ó: ",maxLength:"120"},model:{value:e.editedWorker.university,callback:function(t){e.$set(e.editedWorker,"university",t)},expression:"editedWorker.university"}})],1)],1),n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_balance_wallet","header-text":"–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ"}}),n("div",{staticClass:"edit-block-content"},[n("AppLineText",{attrs:{inputID:"input-surname-card",label:"–§–∞–º–∏–ª–∏—è: ",maxLength:"20"},model:{value:e.editedWorker.surnameCard,callback:function(t){e.$set(e.editedWorker,"surnameCard",t)},expression:"editedWorker.surnameCard"}}),n("AppLineText",{attrs:{inputID:"input-name-card",label:"–ò–º—è: ",maxLength:"20"},model:{value:e.editedWorker.nameCard,callback:function(t){e.$set(e.editedWorker,"nameCard",t)},expression:"editedWorker.nameCard"}}),n("AppLineText",{attrs:{inputID:"input-account-card-number",label:"–ù–æ–º–µ—Ä —Å—á—ë—Ç–∞: ",maxLength:"20"},model:{value:e.editedWorker.accountNumber,callback:function(t){e.$set(e.editedWorker,"accountNumber",t)},expression:"editedWorker.accountNumber"}}),n("AppSelect",{attrs:{selectID:"select-bank",label:"–ë–∞–Ω–∫: "},model:{value:e.editedWorker.bank,callback:function(t){e.$set(e.editedWorker,"bank",t)},expression:"editedWorker.bank"}},[n("option",{staticClass:"editor-option",attrs:{value:"–°–±–µ—Ä–ë–∞–Ω–∫"}},[e._v("–°–±–µ—Ä–ë–∞–Ω–∫")]),n("option",{staticClass:"editor-option",attrs:{value:"–ë–∞–Ω–∫ –í–¢–ë"}},[e._v("–ë–∞–Ω–∫ –í–¢–ë")]),n("option",{staticClass:"editor-option",attrs:{value:"–ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫"}},[e._v("–ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫")]),n("option",{staticClass:"editor-option",attrs:{value:"–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ö–ª–∏—Ä–∏–Ω–≥–æ–≤—ã–π –¶–µ–Ω—Ç—Ä"}},[e._v("–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ö–ª–∏—Ä–∏–Ω–≥–æ–≤—ã–π –¶–µ–Ω—Ç—Ä")]),n("option",{staticClass:"editor-option",attrs:{value:"–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫"}},[e._v("–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫")]),n("option",{staticClass:"editor-option",attrs:{value:"–†–æ—Å—Å–µ–ª—å—Ö–æ–∑–±–∞–Ω–∫"}},[e._v("–†–æ—Å—Å–µ–ª—å—Ö–æ–∑–±–∞–Ω–∫")]),n("option",{staticClass:"editor-option",attrs:{value:"–ú–æ—Å–∫–æ–≤—Å–∫–∏–π –ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ë–∞–Ω–∫"}},[e._v("–ú–æ—Å–∫–æ–≤—Å–∫–∏–π –ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ë–∞–Ω–∫")]),n("option",{staticClass:"editor-option",attrs:{value:"–ë–∞–Ω–∫ ¬´–û—Ç–∫—Ä—ã—Ç–∏–µ¬ª"}},[e._v("–ë–∞–Ω–∫ ¬´–û—Ç–∫—Ä—ã—Ç–∏–µ¬ª")]),n("option",{staticClass:"editor-option",attrs:{value:"–°–æ–≤–∫–æ–º–±–∞–Ω–∫"}},[e._v("–°–æ–≤–∫–æ–º–±–∞–Ω–∫")]),n("option",{staticClass:"editor-option",attrs:{value:"–†–æ—Å–±–∞–Ω–∫"}},[e._v("–†–æ—Å–±–∞–Ω–∫")]),n("option",{staticClass:"editor-option",attrs:{value:"–¢–∏–Ω—å–∫–æ—Ñ—Ñ –ë–∞–Ω–∫"}},[e._v("–¢–∏–Ω—å–∫–æ—Ñ—Ñ –ë–∞–Ω–∫")])])],1)],1),n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"local_phone","header-text":"–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"}}),n("div",{staticClass:"edit-block-content"},[n("AppLineText",{attrs:{inputID:"input-city",label:"–ì–æ—Ä–æ–¥: ",maxLength:"20"},model:{value:e.editedWorker.city,callback:function(t){e.$set(e.editedWorker,"city",t)},expression:"editedWorker.city"}}),n("AppLineText",{attrs:{inputID:"input-home-phone",label:"–î–æ–º. —Ç–µ–ª: ",maxLength:"20"},model:{value:e.editedWorker.homePhone,callback:function(t){e.$set(e.editedWorker,"homePhone",t)},expression:"editedWorker.homePhone"}}),n("AppLineText",{attrs:{inputID:"input-mobile-phone",label:"–û—Å–Ω–æ–≤. –º–æ–±. —Ç–µ–ª: ",maxLength:"20"},model:{value:e.editedWorker.mobilePhone,callback:function(t){e.$set(e.editedWorker,"mobilePhone",t)},expression:"editedWorker.mobilePhone"}}),n("AppLineText",{attrs:{inputID:"input-mobile-phone-additional",label:"–î–æ–±. –º–æ–±. —Ç–µ–ª: ",maxLength:"20"},model:{value:e.editedWorker.mobilePhoneAdditional,callback:function(t){e.$set(e.editedWorker,"mobilePhoneAdditional",t)},expression:"editedWorker.mobilePhoneAdditional"}}),n("AppLineText",{attrs:{inputID:"input-mobile-phone-standby",label:"–ó–∞–ø–∞—Å. –º–æ–±. —Ç–µ–ª: ",maxLength:"20"},model:{value:e.editedWorker.mobilePhoneStandby,callback:function(t){e.$set(e.editedWorker,"mobilePhoneStandby",t)},expression:"editedWorker.mobilePhoneStandby"}})],1)],1),n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"pan_tool","header-text":"–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"}}),n("div",{staticClass:"edit-block-content"},[n("AppLineText",{attrs:{inputID:"input-previous-work",label:"–ü—Ä–µ–∂–Ω—è—è —Ä–∞–±–æ—Ç–∞: ",maxLength:"20"},model:{value:e.editedWorker.previousWork,callback:function(t){e.$set(e.editedWorker,"previousWork",t)},expression:"editedWorker.previousWork"}}),n("AppLineText",{attrs:{inputID:"input-profession",label:"–ü—Ä–æ—Ñ–µ—Å—Å–∏—è 1: ",maxLength:"20"},model:{value:e.editedWorker.professions,callback:function(t){e.$set(e.editedWorker,"professions",t)},expression:"editedWorker.professions"}}),n("AppLineText",{attrs:{inputID:"input-profession-second",label:"–ü—Ä–æ—Ñ–µ—Å—Å–∏—è 2: ",maxLength:"20"},model:{value:e.editedWorker.professionsSecond,callback:function(t){e.$set(e.editedWorker,"professionsSecond",t)},expression:"editedWorker.professionsSecond"}}),n("AppLineText",{attrs:{inputID:"input-profession-third",label:"–ü—Ä–æ—Ñ–µ—Å—Å–∏—è 3: ",maxLength:"20"},model:{value:e.editedWorker.professionsThird,callback:function(t){e.$set(e.editedWorker,"professionsThird",t)},expression:"editedWorker.professionsThird"}})],1)],1),n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"rate_review","header-text":"–†–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ"}}),n("div",{staticClass:"edit-block-content"},[n("AppLineText",{attrs:{inputID:"input-account-number",label:"–£—á—ë—Ç. –Ω–æ–º–µ—Ä: ",maxLength:"20"},model:{value:e.editedWorker.accountNumber,callback:function(t){e.$set(e.editedWorker,"accountNumber",t)},expression:"editedWorker.accountNumber"}}),n("AppLineText",{attrs:{inputID:"input-reason-coming",label:"–ü–æ—á–µ–º—É –ø—Ä–∏—à—ë–ª –∫ –Ω–∞–º: ",maxLength:"20"},model:{value:e.editedWorker.reasonComing,callback:function(t){e.$set(e.editedWorker,"reasonComing",t)},expression:"editedWorker.reasonComing"}}),n("AppLineText",{attrs:{inputID:"input-night-shift",label:"–ù–æ—á–Ω–∞—è —Å–º–µ–Ω–∞: ",maxLength:"20"},model:{value:e.editedWorker.nightShift,callback:function(t){e.$set(e.editedWorker,"nightShift",t)},expression:"editedWorker.nightShift"}}),n("AppLineText",{attrs:{inputID:"input-check-mvd",label:"–ü—Ä–æ–≤–µ—Ä–∫–∞ –ú–í–î: ",maxLength:"20"},model:{value:e.editedWorker.checkMVD,callback:function(t){e.$set(e.editedWorker,"checkMVD",t)},expression:"editedWorker.checkMVD"}}),n("AppLineText",{attrs:{inputID:"input-date-interview",label:"–î–∞—Ç–∞ —Å–æ–±–µ—Å–µ–¥: ",maxLength:"20"},model:{value:e.editedWorker.dateInterview,callback:function(t){e.$set(e.editedWorker,"dateInterview",t)},expression:"editedWorker.dateInterview"}}),n("AppLineText",{attrs:{inputID:"input-date-uniform",label:"–£–Ω–∏—Ñ–æ—Ä–º–∞: ",maxLength:"20"},model:{value:e.editedWorker.uniform,callback:function(t){e.$set(e.editedWorker,"uniform",t)},expression:"editedWorker.uniform"}}),n("AppSelect",{attrs:{inputID:"input-fired",label:"–£–≤–æ–ª–µ–Ω –ª–∏: "},model:{value:e.editedWorker.fired,callback:function(t){e.$set(e.editedWorker,"fired",t)},expression:"editedWorker.fired"}},[n("option",{staticClass:"editor-option",attrs:{value:"–î–∞"}},[e._v("–î–∞")]),n("option",{staticClass:"editor-option",attrs:{value:"–ù–µ—Ç"}},[e._v("–ù–µ—Ç")])])],1)],1),n("div",{staticClass:"edit-block"},[n("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"chrome_reader_mode","header-text":"–ó–∞–º–µ—Ç–∫–∏"}}),n("div",{staticClass:"edit-block-content"},[n("AppLineText",{attrs:{inputID:"input-note-count",label:"–ó–∞–º–µ—Ç–æ–∫ –≤ —Å–ø–∏—Å–∫–µ: ",value:e.editedWorker.notes.length}}),n("AppLineText",{attrs:{placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É",inputID:"input-note",label:"–ù–æ–≤–∞—è –ó–∞–º–µ—Ç–∫–∞: ",maxLength:"35"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}}),n("AppNotesList",{attrs:{"notes-list":e.editedWorker.notes,note:e.editedWorker.notes.note,"notes-count":e.editedWorker.notesCount},on:{"remove-note":e.removeNote}})],1)],1)])]},proxy:!0}])})],1)},i=[],o=n("2909"),a=n("5530"),s=(n("a9e3"),n("159b"),n("99af"),n("b0c0"),n("a434"),n("4d5c")),u=n.n(s),c=n("2f62"),l=n("cc84"),h=(n("b7aa"),n("e947"),n("58c5")),f=n("ffa6"),d=n("a8e9"),p=n("abfd"),g=(n("c7b2"),{Firestore:h["f"],GeoPoint:h["a"],Timestamp:h["c"],Blob:h["j"],Transaction:h["l"],WriteBatch:h["g"],DocumentReference:h["t"],DocumentSnapshot:h["h"],Query:h["r"],QueryDocumentSnapshot:h["i"],QuerySnapshot:h["m"],CollectionReference:h["q"],FieldPath:h["p"],FieldValue:h["n"],setLogLevel:h["d"],CACHE_SIZE_UNLIMITED:h["b"]});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(e){!function(e,t){e.INTERNAL.registerComponent(new f["Component"]("firestore",(function(e){var n=e.getProvider("app").getImmediate();return t(n,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},g)))}(e,(function(e,t){return new h["f"](e,new h["e"](e,t),new h["o"])})),e.registerVersion("@firebase/firestore","2.3.10")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function m(e){e.prototype.loadBundle=h["k"],e.prototype.namedQuery=h["s"]}v(l["default"]),m(h["f"]);var y=n("9ab4"),b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return Object(y["__extends"])(t,e),t}(Error);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function T(e,t,n){var r=w(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"===typeof s){if(!b[s])return new _("internal","internal");r=b[s],i=s}var u=a.message;"string"===typeof u&&(i=u),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new _(r,i,o)}var I=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(y["__generator"])(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return e=t.sent(),e?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getContext=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}(),E="type.googleapis.com/google.protobuf.Int64Value",O="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var S=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return k(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case E:case O:var n=Number(e["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?k(e,(function(e){return t.decode(e)})):e},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new _("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}var j=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new S,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new I(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(u){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+t+"/"+this.region+"/"+e}return null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:r=a.sent(),null!==r&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return e=this.appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=n.sent(),[2,t.token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,d,p;return Object(y["__generator"])(this,(function(g){switch(g.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return a=g.sent(),a.authToken&&(o["Authorization"]="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=A(s),c=u.timer,l=u.promise,[4,Promise.race([C(c,this.postJSON(r,i,o)),l,C(c,this.cancelAllRequests)])];case 2:if(h=g.sent(),!h)throw new _("cancelled","Firebase Functions instance was deleted.");if(f=T(h.status,h.json,this.serializer),f)throw f;if(!h.json)throw new _("internal","Response is not valid JSON object.");if(d=h.json.data,"undefined"===typeof d&&(d=h.json.result),"undefined"===typeof d)throw new _("internal","Response is missing data field.");return p=this.serializer.decode(d),[2,{data:p}]}}))}))},e}();function C(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x="functions";function D(e,t){var n={Functions:j};function r(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new j(i,o,s,a,r,t)}e.INTERNAL.registerComponent(new f["Component"](x,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var N="@firebase/functions",R="0.6.14";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
D(l["default"],fetch.bind(self)),l["default"].registerVersion(N,R);var P,L=n("9dbb"),M="@firebase/installations",F="0.4.31",U=1e4,V="w:"+F,q="FIS_v2",B="https://firebaseinstallations.googleapis.com/v1",K=36e5,W="installations",G="Installations",z=(P={},P["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',P["not-registered"]="Firebase Installation is not registered.",P["installation-not-found"]="Firebase Installation not found.",P["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',P["app-offline"]="Could not process request. Application offline.",P["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",P),H=new d["ErrorFactory"](W,G,z);function $(e){return e instanceof d["FirebaseError"]&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e){var t=e.projectId;return B+"/projects/"+t+"/installations"}function X(e){return{token:e.token,requestStatus:2,expiresIn:te(e.expiresIn),creationTime:Date.now()}}function Y(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,H.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function J(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Z(e,t){var n=t.refreshToken,r=J(e);return r.append("Authorization",ne(n)),r}function ee(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function te(e){return Number(e.replace("s","000"))}function ne(e){return q+" "+e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e,t){var n=t.fid;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,r,i,o,a,s,u;return Object(y["__generator"])(this,(function(c){switch(c.label){case 0:return t=Q(e),r=J(e),i={fid:n,authVersion:q,appId:e.appId,sdkVersion:V},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,ee((function(){return fetch(t,o)}))];case 1:return a=c.sent(),a.ok?[4,a.json()]:[3,3];case 2:return s=c.sent(),u={fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:X(s.authToken)},[2,u];case 3:return[4,Y("Create Installation",a)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){var t=btoa(String.fromCharCode.apply(String,Object(y["__spreadArray"])([],Object(y["__read"])(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=/^[cdef][\w-]{21}$/,se="";function ue(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=ce(e);return ae.test(n)?n:se}catch(r){return se}}function ce(e){var t=oe(e);return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he=new Map;function fe(e,t){var n=le(e);ge(n,t),ve(n,t)}function de(e,t){ye();var n=le(e),r=he.get(n);r||(r=new Set,he.set(n,r)),r.add(t)}function pe(e,t){var n=le(e),r=he.get(n);r&&(r.delete(t),0===r.size&&he.delete(n),be())}function ge(e,t){var n,r,i=he.get(e);if(i)try{for(var o=Object(y["__values"])(i),a=o.next();!a.done;a=o.next()){var s=a.value;s(t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function ve(e,t){var n=ye();n&&n.postMessage({key:e,fid:t}),be()}var me=null;function ye(){return!me&&"BroadcastChannel"in self&&(me=new BroadcastChannel("[Firebase] FID Change"),me.onmessage=function(e){ge(e.data.key,e.data.fid)}),me}function be(){0===he.size&&me&&(me.close(),me=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,we="firebase-installations-database",Te=1,Ie="firebase-installations-store",Ee=null;function Oe(){return Ee||(Ee=Object(L["openDb"])(we,Te,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(Ie)}}))),Ee}function ke(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(y["__generator"])(this,(function(s){switch(s.label){case 0:return n=le(e),[4,Oe()];case 1:return r=s.sent(),i=r.transaction(Ie,"readwrite"),o=i.objectStore(Ie),[4,o.get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||fe(e,t.fid),[2,t]}}))}))}function Se(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return t=le(e),[4,Oe()];case 1:return n=i.sent(),r=n.transaction(Ie,"readwrite"),[4,r.objectStore(Ie).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ae(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(y["__generator"])(this,(function(u){switch(u.label){case 0:return n=le(e),[4,Oe()];case 1:return r=u.sent(),i=r.transaction(Ie,"readwrite"),o=i.objectStore(Ie),[4,o.get(n)];case 2:return a=u.sent(),s=t(a),void 0!==s?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||fe(e,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Ae(e,(function(n){var r=Ce(n),i=xe(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==se?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Ce(e){var t=e||{fid:ue(),registrationStatus:0};return Pe(t)}function xe(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(H.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=De(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ne(e)}:{installationEntry:t}}function De(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,re(e,t)];case 1:return n=i.sent(),[2,ke(e,n)];case 2:return r=i.sent(),$(r)&&409===r.customData.serverCode?[4,Se(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,ke(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function Ne(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return[4,Re(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,ie(100)];case 3:return o.sent(),[4,Re(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,je(e)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}}))}))}function Re(e){return Ae(e,(function(e){if(!e)throw H.create("installation-not-found");return Pe(e)}))}function Pe(e){return Le(e)?{fid:e.fid,registrationStatus:0}:e}function Le(e){return 1===e.registrationStatus&&e.registrationTime+U<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,i,o,a,s,u,c,l;return Object(y["__generator"])(this,(function(h){switch(h.label){case 0:return e=Fe(n,t),i=Z(n,t),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:V}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,ee((function(){return fetch(e,s)}))];case 1:return u=h.sent(),u.ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),l=X(c),[2,l];case 3:return[4,Y("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function Fe(e,t){var n=t.fid;return Q(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(e,t){return void 0===t&&(t=!1),Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return[4,Ae(e.appConfig,(function(r){if(!Ke(r))throw H.create("not-registered");var i=r.authToken;if(!t&&We(i))return r;if(1===i.requestStatus)return n=Ve(e,t),r;if(!navigator.onLine)throw H.create("app-offline");var o=ze(r);return n=Be(e,o),o}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}}))}))}function Ve(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,qe(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,ie(100)];case 3:return i.sent(),[4,qe(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,Ue(e,t)]:[2,r]}}))}))}function qe(e){return Ae(e,(function(e){if(!Ke(e))throw H.create("not-registered");var t=e.authToken;return He(t)?Object(y["__assign"])(Object(y["__assign"])({},e),{authToken:{requestStatus:0}}):e}))}function Be(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Me(e,t)];case 1:return n=o.sent(),i=Object(y["__assign"])(Object(y["__assign"])({},t),{authToken:n}),[4,ke(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!$(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Se(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(y["__assign"])(Object(y["__assign"])({},t),{authToken:{requestStatus:0}}),[4,ke(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function Ke(e){return void 0!==e&&2===e.registrationStatus}function We(e){return 2===e.requestStatus&&!Ge(e)}function Ge(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+K}function ze(e){var t={requestStatus:1,requestTime:Date.now()};return Object(y["__assign"])(Object(y["__assign"])({},e),{authToken:t})}function He(e){return 1===e.requestStatus&&e.requestTime+U<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,je(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):Ue(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(e,t){return void 0===t&&(t=!1),Object(y["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Xe(e.appConfig)];case 1:return r.sent(),[4,Ue(e,t)];case 2:return n=r.sent(),[2,n.token]}}))}))}function Xe(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return[4,je(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return n=Je(e,t),r=Z(e,t),i={method:"DELETE",headers:r},[4,ee((function(){return fetch(n,i)}))];case 1:return o=a.sent(),o.ok?[3,3]:[4,Y("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Je(e,t){var n=t.fid;return Q(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return t=e.appConfig,[4,Ae(t,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw H.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw H.create("app-offline");case 3:return[4,Ye(t,n)];case 4:return r.sent(),[4,Se(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(e,t){var n=e.appConfig;return de(n,t),function(){pe(n,t)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e){var t,n;if(!e||!e.options)throw nt("App Configuration");if(!e.name)throw nt("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Object(y["__values"])(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!e.options[a])throw nt(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function nt(e){return H.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(e){var t="installations";e.INTERNAL.registerComponent(new f["Component"](t,(function(e){var t=e.getProvider("app").getImmediate(),n=tt(t),r=e.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:t,getId:function(){return $e(i)},getToken:function(e){return Qe(i,e)},delete:function(){return Ze(i)},onIdChange:function(e){return et(i,e)}};return o}),"PUBLIC")),e.registerVersion(M,F)}rt(l["default"]);var it,ot=(_e={},_e["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',_e["only-available-in-window"]="This method is available in a Window context.",_e["only-available-in-sw"]="This method is available in a service worker context.",_e["permission-default"]="The notification permission was not granted and dismissed instead.",_e["permission-blocked"]="The notification permission was not granted and blocked instead.",_e["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",_e["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",_e["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",_e["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",_e["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",_e["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",_e["token-update-no-token"]="FCM returned no token when updating the user to push.",_e["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",_e["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",_e["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",_e["invalid-vapid-key"]="The public VAPID key must be a string.",_e["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",_e),at=new d["ErrorFactory"]("messaging","Messaging",ot),st="/firebase-messaging-sw.js",ut="/firebase-cloud-messaging-push-scope",ct="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lt="https://fcmregistrations.googleapis.com/v1",ht="FCM_MSG",ft="FirebaseMessaging: ",dt="google.c.a.e",pt="google.c.a.c_id",gt="google.c.a.ts",vt="google.c.a.c_l",mt=1e3,yt=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bt(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Object(y["__spreadArray"])([],Object(y["__read"])(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _t(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e["PUSH_RECEIVED"]="push-received",e["NOTIFICATION_CLICKED"]="notification-clicked"})(it||(it={}));var wt="fcm_token_details_db",Tt=5,It="fcm_token_object_Store";function Et(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o=this;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map((function(e){return e.name})),!n.includes(wt))return[2,null];a.label=2;case 2:return r=null,[4,Object(L["openDb"])(wt,Tt,(function(t){return Object(y["__awaiter"])(o,void 0,void 0,(function(){var n,i,o,a;return Object(y["__generator"])(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(It)?(n=t.transaction.objectStore(It),[4,n.index("fcmSenderId").get(e)]):[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:bt(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:bt(o.auth),p256dh:bt(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:bt(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=a.sent(),i.close(),[4,Object(L["deleteDb"])(wt)];case 4:return a.sent(),[4,Object(L["deleteDb"])("fcm_vapid_details_db")];case 5:return a.sent(),[4,Object(L["deleteDb"])("undefined")];case 6:return a.sent(),[2,Ot(r)?r:null]}}))}))}function Ot(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt="firebase-messaging-database",St=1,At="firebase-messaging-store",jt=null;function Ct(){return jt||(jt=Object(L["openDb"])(kt,St,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(At)}}))),jt}function xt(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return t=Rt(e),[4,Ct()];case 1:return n=o.sent(),[4,n.transaction(At).objectStore(At).get(t)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,Et(e.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Dt(e,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function Dt(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return n=Rt(e),[4,Ct()];case 1:return r=o.sent(),i=r.transaction(At,"readwrite"),[4,i.objectStore(At).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function Nt(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return t=Rt(e),[4,Ct()];case 1:return n=i.sent(),r=n.transaction(At,"readwrite"),[4,r.objectStore(At).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Rt(e){var t=e.appConfig;return t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(y["__generator"])(this,(function(c){switch(c.label){case 0:return[4,Ut(e)];case 1:n=c.sent(),r=Vt(t),i={method:"POST",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Ft(e.appConfig),i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),at.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,at.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw at.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Lt(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(y["__generator"])(this,(function(c){switch(c.label){case 0:return[4,Ut(e)];case 1:n=c.sent(),r=Vt(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Ft(e.appConfig)+"/"+t.token,i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),at.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,at.create("token-update-failed",{errorInfo:u});if(!o.token)throw at.create("token-update-no-token");return[2,o.token]}}))}))}function Mt(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(y["__generator"])(this,(function(u){switch(u.label){case 0:return[4,Ut(e)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Ft(e.appConfig)+"/"+t,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw a=o.error.message,at.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=u.sent(),at.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Ft(e){var t=e.projectId;return lt+"/projects/"+t+"/registrations"}function Ut(e){var t=e.appConfig,n=e.installations;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function Vt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==ct&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt=6048e5;function Bt(e,t,n){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a;return Object(y["__generator"])(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw at.create("permission-blocked");return[4,zt(t,n)];case 1:return r=s.sent(),[4,xt(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:bt(r.getKey("auth")),p256dh:bt(r.getKey("p256dh"))},i?[3,3]:[2,Gt(e,o)];case 3:if(Ht(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Mt(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,Gt(e,o)];case 8:return Date.now()>=i.createTime+qt?[2,Wt({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function Kt(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,xt(e)];case 1:return n=i.sent(),n?[4,Mt(e,n.token)]:[3,4];case 2:return i.sent(),[4,Nt(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function Wt(e,t,n){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Lt(t,e)];case 1:return r=a.sent(),i=Object(y["__assign"])(Object(y["__assign"])({},e),{token:r,createTime:Date.now()}),[4,Dt(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Kt(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function Gt(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Pt(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Dt(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function zt(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_t(t)})]}}))}))}function Ht(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(e){var t={from:e.from,collapseKey:e.collapse_key};return Qt(t,e),Xt(t,e),Yt(t,e),t}function Qt(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function Xt(e,t){t.data&&(e.data=t.data)}function Yt(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(e){return"object"===typeof e&&!!e&&pt in e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw at.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,xt(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:ct,r.label=2;case 2:return[2,Bt(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return Kt(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw at.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw at.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw at.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw at.create("only-available-in-window")},e.prototype.onMessage=function(){throw at.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw at.create("only-available-in-window")},e.prototype.onPush=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return t=nn(e),t?[4,sn()]:(console.debug(ft+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),on(n)?[2,an(n,t)]:(r=!1,t.notification?[4,un(tn(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=$t(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Zt(mt)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return r=e.newSubscription,r?[3,2]:[4,Kt(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,xt(this.firebaseDependencies)];case 3:return i=o.sent(),[4,Kt(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,Bt(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:ct)];case 5:return o.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a,s;return Object(y["__generator"])(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[ht],r?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),i=cn(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,rn(o)]):[2]):[2];case 1:return s=u.sent(),s?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,Zt(yt)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=it.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function tn(e){var t,n=Object(y["__assign"])({},e.notification);return n.data=(t={},t[ht]=e,t),n}function nn(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}function rn(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return Object(y["__generator"])(this,(function(u){switch(u.label){case 0:return[4,sn()];case 1:t=u.sent();try{for(n=Object(y["__values"])(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function on(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}function an(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=it.PUSH_RECEIVED;try{for(var i=Object(y["__values"])(e),o=i.next();!o.done;o=i.next()){var a=o.value;a.postMessage(t)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function sn(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function un(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}function cn(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;return i||(Jt(e.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return t=e.data,t.isFirebaseMessaging?(this.onMessageCallback&&t.messageType===it.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(fn(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),n=t.data,Jt(n)&&"1"===n[dt]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw at.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Bt(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=ct),[2]}))}))},e.prototype.updateSwReg=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw at.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register(st,{scope:ut})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),at.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,Kt(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(y["__generator"])(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(e=t.sent(),"granted"===e)return[2];throw"denied"===e?at.create("permission-blocked"):at.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw at.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw at.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw at.create("invalid-sw-registration");if(this.swRegistration)throw at.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw at.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw at.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return n=hn(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:t[pt],message_name:t[vt],message_time:t[gt],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function hn(e){switch(e){case it.NOTIFICATION_CLICKED:return"notification_open";case it.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fn(e){return delete e.messageType,delete e.isFirebaseMessaging,e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(e){var t,n;if(!e||!e.options)throw pn("App Configuration Object");if(!e.name)throw pn("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var o=Object(y["__values"])(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(!i[s])throw pn(s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function pn(e){return at.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn="messaging";function vn(e){var t=e.getProvider("app").getImmediate(),n=dn(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),o={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!yn())throw at.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new en(o):new ln(o)}var mn={isSupported:yn};function yn(){return self&&"ServiceWorkerGlobalScope"in self?_n():bn()}function bn(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function _n(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */l["default"].INTERNAL.registerComponent(new f["Component"](gn,vn,"PUBLIC").setServiceProps(mn));var wn="firebasestorage.googleapis.com",Tn="storageBucket",In=12e4,En=6e5,On=function(e){function t(n,r){var i=e.call(this,kn(n),"Firebase Storage: "+r+" ("+kn(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return Object(y["__extends"])(t,e),t.prototype._codeEquals=function(e){return kn(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(d["FirebaseError"]);function kn(e){return"storage/"+e}function Sn(){var e="An unknown error occurred, please check the error payload for server response.";return new On("unknown",e)}function An(e){return new On("object-not-found","Object '"+e+"' does not exist.")}function jn(e){return new On("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Cn(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new On("unauthenticated",e)}function xn(){return new On("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Dn(e){return new On("unauthorized","User does not have permission to access '"+e+"'.")}function Nn(){return new On("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Rn(){return new On("canceled","User canceled the upload/download.")}function Pn(e){return new On("invalid-url","Invalid URL '"+e+"'.")}function Ln(e){return new On("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function Mn(){return new On("no-default-bucket","No default bucket found. Did you set the '"+Tn+"' property when initializing the app?")}function Fn(){return new On("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Un(){return new On("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Vn(){return new On("no-download-url","The given file does not have any download URLs.")}function qn(e){return new On("invalid-argument",e)}function Bn(){return new On("app-deleted","The Firebase app was deleted.")}function Kn(e){return new On("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wn(e,t){return new On("invalid-format","String does not match format '"+e+"': "+t)}function Gn(e){throw new On("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(e){return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},$n=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}();function Qn(e,t){switch(e){case Hn.RAW:return new $n(Xn(t));case Hn.BASE64:case Hn.BASE64URL:return new $n(Jn(e,t));case Hn.DATA_URL:return new $n(er(t),tr(t))}throw Sn()}function Xn(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<e.length-1&&56320===(64512&e.charCodeAt(n+1));if(i){var o=r,a=e.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Yn(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Wn(Hn.DATA_URL,"Malformed data URL.")}return Xn(t)}function Jn(e,t){switch(e){case Hn.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var i=n?"-":"_";throw Wn(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case Hn.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(o||a){i=o?"+":"/";throw Wn(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=zn(t)}catch(l){throw Wn(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var Zn=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw Wn(Hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=nr(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}();function er(e){var t=new Zn(e);return t.base64?Jn(Hn.BASE64,t.rest):Yn(t.rest)}function tr(e){var t=new Zn(e);return t.contentType}function nr(e,t){var n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr,ir={STATE_CHANGED:"state_changed"},or={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ar(e){switch(e){case"running":case"pausing":case"canceling":return or.RUNNING;case"paused":return or.PAUSED;case"success":return or.SUCCESS;case"canceled":return or.CANCELED;case"error":return or.ERROR;default:return or.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["NO_ERROR"]=0]="NO_ERROR",e[e["NETWORK_ERROR"]=1]="NETWORK_ERROR",e[e["ABORT"]=2]="ABORT"})(rr||(rr={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sr=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=rr.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=rr.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=rr.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw Gn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Gn("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Gn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Gn("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();function ur(){return new sr}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr=function(){function e(){}return e.prototype.createConnection=function(){return ur()},e}(),lr=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw Ln(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}var a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function c(e){e.path_=decodeURIComponent(e.path)}for(var l="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp("^https?://"+h+"/"+l+"/b/"+i+"/o"+f,"i"),p={bucket:1,path:3},g=n===wn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",m=new RegExp("^https?://"+g+"/"+i+"/"+v,"i"),y={bucket:1,path:2},b=[{regex:s,indices:u,postModify:o},{regex:d,indices:p,postModify:c},{regex:m,indices:y,postModify:c}],_=0;_<b.length;_++){var w=b[_],T=w.regex.exec(t);if(T){var I=T[w.indices.bucket],E=T[w.indices.path];E||(E=""),r=new e(I,E),w.postModify(r);break}}if(null==r)throw Pn(t);return r},e}(),hr=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fr(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)c.call.apply(c,Object(y["__spreadArray"])([null,e],t));else{var i,h=s()||o;if(h)c.call.apply(c,Object(y["__spreadArray"])([null,e],t));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i)}}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}function dr(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(e){return void 0!==e}function gr(e){return"function"===typeof e}function vr(e){return"object"===typeof e&&!Array.isArray(e)}function mr(e){return"string"===typeof e||e instanceof String}function yr(e){return br()&&e instanceof Blob}function br(){return"undefined"!==typeof Blob}function _r(e,t,n,r){if(r<t)throw qn("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw qn("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(e,t){var n=t.match(/^(\w+):\/\/.+/),r=null===n||void 0===n?void 0:n[1],i=t;return null==r&&(i="https://"+t),i+"/v0"+e}function Tr(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ir=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){if(n)t(!1,new Er(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===rr.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new Er(a,r))}else{var s=r.getErrorCode()===rr.ABORT;t(!1,new Er(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}function n(t,n){var r=e.resolve_,i=e.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponseText());pr(a)?r(a):r()}catch(u){i(u)}else if(null!==o){var s=Sn();s.serverResponse=o.getResponseText(),e.errorCallback_?i(e.errorCallback_(o,s)):i(s)}else if(n.canceled){s=e.appDelete_?Bn():Rn();i(s)}else{s=Nn();i(s)}}this.canceled_?n(!1,new Er(!1,null,!0)):this.backoffId_=fr(t,n,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&dr(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=-1!==n.indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||i},e}(),Er=function(){function e(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}return e}();function Or(e,t){null!==t&&t.length>0&&(e["Authorization"]="Firebase "+t)}function kr(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function Sr(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Ar(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function jr(e,t,n,r,i,o){var a=Tr(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return Sr(u,t),Or(u,n),kr(u,o),Ar(u,r),new Ir(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function xr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Cr();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(br())return new Blob(e);throw new On("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Dr(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(){function e(e,t){var n=0,r="";yr(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(yr(this.data_)){var r=this.data_,i=Dr(r,t,n);return null===i?null:new e(i)}var o=new Uint8Array(this.data_.buffer,t,n-t);return new e(o,!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(br()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(xr.apply(null,r))}var i=t.map((function(e){return mr(e)?Qn(Hn.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(e){var t;try{t=JSON.parse(e)}catch(n){return null}return vr(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(e){if(0===e.length)return null;var t=e.lastIndexOf("/");if(-1===t)return"";var n=e.slice(0,t);return n}function Lr(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function Mr(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(e,t){return t}var Ur=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Fr}return e}(),Vr=null;function qr(e){return!mr(e)||e.length<2?e:Mr(e)}function Br(){if(Vr)return Vr;var e=[];function t(e,t){return qr(t)}e.push(new Ur("bucket")),e.push(new Ur("generation")),e.push(new Ur("metageneration")),e.push(new Ur("name","fullPath",!0));var n=new Ur("name");function r(e,t){return void 0!==t?Number(t):t}n.xform=t,e.push(n);var i=new Ur("size");return i.xform=r,e.push(i),e.push(new Ur("timeCreated")),e.push(new Ur("updated")),e.push(new Ur("md5Hash",null,!0)),e.push(new Ur("cacheControl",null,!0)),e.push(new Ur("contentDisposition",null,!0)),e.push(new Ur("contentEncoding",null,!0)),e.push(new Ur("contentLanguage",null,!0)),e.push(new Ur("contentType",null,!0)),e.push(new Ur("metadata","customMetadata",!0)),Vr=e,Vr}function Kr(e,t){function n(){var n=e["bucket"],r=e["fullPath"],i=new lr(n,r);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function Wr(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return Kr(r,e),r}function Gr(e,t,n){var r=Rr(t);if(null===r)return null;var i=r;return Wr(e,i,n)}function zr(e,t,n){var r=Rr(t);if(null===r)return null;if(!mr(r["downloadTokens"]))return null;var i=r["downloadTokens"];if(0===i.length)return null;var o=encodeURIComponent,a=i.split(","),s=a.map((function(t){var r=e["bucket"],i=e["fullPath"],a="/b/"+o(r)+"/o/"+o(i),s=wr(a,n),u=Tr({alt:"media",token:t});return s+u}));return s[0]}function Hr(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r="prefixes",Qr="items";function Xr(e,t,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[$r])for(var i=0,o=n[$r];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=e._makeStorageReference(new lr(t,s));r.prefixes.push(u)}if(n[Qr])for(var c=0,l=n[Qr];c<l.length;c++){var h=l[c];u=e._makeStorageReference(new lr(t,h["name"]));r.items.push(u)}return r}function Yr(e,t,n){var r=Rr(n);if(null===r)return null;var i=r;return Xr(e,t,i)}var Jr=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(e){if(!e)throw Sn()}function ei(e,t){function n(n,r){var i=Gr(e,r,t);return Zr(null!==i),i}return n}function ti(e,t){function n(n,r){var i=Yr(e,t,r);return Zr(null!==i),i}return n}function ni(e,t){function n(n,r){var i=Gr(e,r,t);return Zr(null!==i),zr(i,r,e.host)}return n}function ri(e){function t(t,n){var r;return r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?xn():Cn():402===t.getStatus()?jn(e.bucket):403===t.getStatus()?Dn(e.path):n,r.serverResponse=n.serverResponse,r}return t}function ii(e){var t=ri(e);function n(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=An(e.path)),i.serverResponse=r.serverResponse,i}return n}function oi(e,t,n){var r=t.fullServerUrl(),i=wr(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new Jr(i,o,ei(e,n),a);return s.errorHandler=ii(t),s}function ai(e,t,n,r,i){var o={};t.isRoot?o["prefix"]="":o["prefix"]=t.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var a=t.bucketOnlyServerUrl(),s=wr(a,e.host),u="GET",c=e.maxOperationRetryTime,l=new Jr(s,u,ti(e,t.bucket),c);return l.urlParams=o,l.errorHandler=ri(t),l}function si(e,t,n){var r=t.fullServerUrl(),i=wr(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new Jr(i,o,ni(e,n),a);return s.errorHandler=ii(t),s}function ui(e,t,n,r){var i=t.fullServerUrl(),o=wr(i,e.host),a="PATCH",s=Hr(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime,l=new Jr(o,a,ei(e,r),c);return l.headers=u,l.body=s,l.errorHandler=ii(t),l}function ci(e,t){var n=t.fullServerUrl(),r=wr(n,e.host),i="DELETE",o=e.maxOperationRetryTime;function a(e,t){}var s=new Jr(r,i,a,o);return s.successCodes=[200,204],s.errorHandler=ii(t),s}function li(e,t){return e&&e["contentType"]||t&&t.type()||"application/octet-stream"}function hi(e,t,n){var r=Object.assign({},n);return r["fullPath"]=e.path,r["size"]=t.size(),r["contentType"]||(r["contentType"]=li(null,t)),r}function fi(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}var u=s();a["Content-Type"]="multipart/related; boundary="+u;var c=hi(t,r,i),l=Hr(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",d=Nr.getBlob(h,r,f);if(null===d)throw Fn();var p={name:c["fullPath"]},g=wr(o,e.host),v="POST",m=e.maxUploadRetryTime,y=new Jr(g,v,ei(e,n),m);return y.urlParams=p,y.headers=a,y.body=d.uploadData(),y.errorHandler=ri(t),y}var di=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}();function pi(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){Zr(!1)}var r=t||["active"];return Zr(!!n&&-1!==r.indexOf(n)),n}function gi(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=hi(t,r,i),s={name:a["fullPath"]},u=wr(o,e.host),c="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},h=Hr(a,n),f=e.maxUploadRetryTime;function d(e){var t;pi(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Zr(!1)}return Zr(mr(t)),t}var p=new Jr(u,c,d,f);return p.urlParams=s,p.headers=l,p.body=h,p.errorHandler=ri(t),p}function vi(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function o(e){var t=pi(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Zr(!1)}n||Zr(!1);var i=Number(n);return Zr(!isNaN(i)),new di(i,r.size(),"final"===t)}var a="POST",s=e.maxUploadRetryTime,u=new Jr(n,a,o,s);return u.headers=i,u.errorHandler=ri(t),u}var mi=262144;function yi(e,t,n,r,i,o,a,s){var u=new di(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw Un();var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d=l===c?"upload, finalize":"upload",p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":""+u.current},g=r.slice(h,f);if(null===g)throw Fn();function v(e,n){var i,a=pi(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?ei(t,o)(e,n):null,new di(s,c,"final"===a,i)}var m="POST",y=t.maxUploadRetryTime,b=new Jr(n,m,v,y);return b.headers=p,b.body=g.uploadData(),b.progressCallback=s||null,b.errorHandler=ri(e),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bi=function(){function e(e,t,n){var r=gr(e)||null!=t||null!=n;if(r)this.next=e,this.error=t,this.complete=n;else{var i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wi=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Br(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused");break}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=gi(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=vi(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=mi*this._chunkMultiplier,n=new di(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=yi(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){var e=mi*this._chunkMultiplier;e<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=oi(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=fi(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":this._state=e,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Rn(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=ar(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new bi(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise();var t=this._observers.slice();t.forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(ar(this._state)){case or.SUCCESS:_i(this._resolve.bind(null,this.snapshot))();break;case or.CANCELED:case or.ERROR:var t=this._reject;_i(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){var t=ar(this._state);switch(t){case or.RUNNING:case or.PAUSED:e.next&&_i(e.next.bind(e,this.snapshot))();break;case or.SUCCESS:e.complete&&_i(e.complete.bind(e))();break;case or.CANCELED:case or.ERROR:e.error&&_i(e.error.bind(e,this._error))();break;default:e.error&&_i(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),Ti=function(){function e(e,t){this._service=e,this._location=t instanceof lr?t:lr.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new lr(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Mr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Pr(this._location.path);if(null===t)return null;var n=new lr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw Kn(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new wi(e,new Nr(t),n)}function Ei(e){var t={prefixes:[],items:[]};return Oi(e,t).then((function(){return t}))}function Oi(e,t,n){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a;return Object(y["__generator"])(this,(function(s){switch(s.label){case 0:return r={pageToken:n},[4,ki(e,r)];case 1:return i=s.sent(),(o=t.prefixes).push.apply(o,i.prefixes),(a=t.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,Oi(e,t,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function ki(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return null!=t&&"number"===typeof t.maxResults&&_r("options.maxResults",1,1e3,t.maxResults),n=t||{},r=ai(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Si(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=oi(e.storage,e._location,Br()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function Ai(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=ui(e.storage,e._location,t,Br()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function ji(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=si(e.storage,e._location,Br()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw Vn();return e}))]}}))}))}function Ci(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=ci(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function xi(e,t){var n=Lr(e._location.path,t),r=new lr(e._location.bucket,n);return new Ti(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(e){return/^[A-Za-z]+:\/\//.test(e)}function Ni(e,t){return new Ti(e,t)}function Ri(e,t){if(e instanceof Fi){var n=e;if(null==n._bucket)throw Mn();var r=new Ti(n,n._bucket);return null!=t?Ri(r,t):r}if(void 0!==t){if(t.includes(".."))throw qn('`path` param cannot contain ".."');return xi(e,t)}return e}function Pi(e,t){if(t&&Di(t)){if(e instanceof Fi)return Ni(e,t);throw qn("To use ref(service, url), the first argument must be a Storage instance.")}return Ri(e,t)}function Li(e,t){var n=null===t||void 0===t?void 0:t[Tn];return null==n?null:lr.makeFromBucketSpec(n,e)}function Mi(e,t,n){e.host="http://"+t+":"+n}var Fi=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=wn,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=In,this._maxUploadRetryTime=En,this._requests=new Set,this._bucket=null!=i?lr.makeFromBucketSpec(i,this._host):Li(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=Li(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){_r("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){_r("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return e=this._authProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:if(t=n.sent(),null!==t)return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return e=this._appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=n.sent(),[2,t.token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new Ti(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new hr(Bn());var i=jr(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(e,t,n){return e=Object(d["getModularInstance"])(e),Ii(e,t,n)}function Vi(e){return e=Object(d["getModularInstance"])(e),Si(e)}function qi(e,t){return e=Object(d["getModularInstance"])(e),Ai(e,t)}function Bi(e,t){return e=Object(d["getModularInstance"])(e),ki(e,t)}function Ki(e){return e=Object(d["getModularInstance"])(e),Ei(e)}function Wi(e){return e=Object(d["getModularInstance"])(e),ji(e)}function Gi(e){return e=Object(d["getModularInstance"])(e),Ci(e)}function zi(e,t){return e=Object(d["getModularInstance"])(e),Pi(e,t)}function Hi(e,t){return xi(e,t)}function $i(e,t,n){Mi(e,t,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qi=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),Xi=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Qi(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Qi(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new Qi(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Qi(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),Yi=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Ji(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Ji(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Ji=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=Hi(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new Xi(Ui(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=Hn.RAW),this._throwIfRoot("putString");var r=Qn(t,e),i=Object(y["__assign"])({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new Xi(new wi(this._delegate,new Nr(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return Ki(this._delegate).then((function(t){return new Yi(t,e.storage)}))},e.prototype.list=function(e){var t=this;return Bi(this._delegate,e||void 0).then((function(e){return new Yi(e,t.storage)}))},e.prototype.getMetadata=function(){return Vi(this._delegate)},e.prototype.updateMetadata=function(e){return qi(this._delegate,e)},e.prototype.getDownloadURL=function(){return Wi(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),Gi(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw Kn(e)},e}(),Zi=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(Di(e))throw qn("ref() expected a child path but got a URL, use refFromURL instead.");return new Ji(zi(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!Di(e))throw qn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lr.makeFromUrl(e,this._delegate.host)}catch(t){throw qn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ji(zi(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t){$i(this._delegate,e,t)},e}(),eo="@firebase/storage",to="0.6.2",no="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal"),a=new Zi(r,new Fi(r,i,o,new cr,n,l["default"].SDK_VERSION));return a}function io(e){var t={TaskState:or,TaskEvent:ir,StringFormat:Hn,Storage:Fi,Reference:Ji};e.INTERNAL.registerComponent(new f["Component"](no,ro,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(eo,to)}io(l["default"]);var oo,ao,so,uo="@firebase/performance",co="0.4.17",lo=co,ho="FB-PERF-TRACE-START",fo="FB-PERF-TRACE-STOP",po="FB-PERF-TRACE-MEASURE",go="_wt_",vo="_fp",mo="_fcp",yo="_fid",bo="@firebase/performance/config",_o="@firebase/performance/configexpire",wo="performance",To="Performance",Io=(oo={},oo["trace started"]="Trace {$traceName} was started before.",oo["trace stopped"]="Trace {$traceName} is not running.",oo["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",oo["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",oo["no window"]="Window is not available.",oo["no app id"]="App id is not available.",oo["no project id"]="Project id is not available.",oo["no api key"]="Api key is not available.",oo["invalid cc log"]="Attempted to queue invalid cc event",oo["FB not default"]="Performance can only start when Firebase app instance is the default one.",oo["RC response not ok"]="RC response is not ok",oo["invalid attribute name"]="Attribute name {$attributeName} is invalid.",oo["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",oo["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",oo["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",oo),Eo=new d["ErrorFactory"](wo,To,Io),Oo=new p["Logger"](To);Oo.logLevel=p["LogLevel"].INFO;var ko,So=function(){function e(e){if(this.window=e,!e)throw Eo.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(d["isIndexedDBAvailable"])()||(Oo.info("IndexedDB is not supported by current browswer"),!1):(Oo.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}}));n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===ao&&(ao=new e(so)),ao},e}();function Ao(e){so=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(e,t){var n=e.length-t.length;if(n<0||n>1)throw Eo.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Co,xo,Do=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=jo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=jo("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Eo.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Eo.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Eo.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===ko&&(ko=new e),ko},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){var e=Do.getInstance().installationsService.getId();return e.then((function(e){Co=e})),e}function Ro(){return Co}function Po(){var e=Do.getInstance().installationsService.getToken();return e.then((function(e){})),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["VISIBLE"]=1]="VISIBLE",e[e["HIDDEN"]=2]="HIDDEN"})(xo||(xo={}));var Lo=["firebase_","google_","ga_"],Mo=new RegExp("^[a-zA-Z]\\w*$"),Fo=40,Uo=100;function Vo(){var e=So.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function qo(){var e=So.getInstance().document,t=e.visibilityState;switch(t){case"visible":return xo.VISIBLE;case"hidden":return xo.HIDDEN;default:return xo.UNKNOWN}}function Bo(){var e=So.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Ko(e){if(0===e.length||e.length>Fo)return!1;var t=Lo.some((function(t){return e.startsWith(t)}));return!t&&!!e.match(Mo)}function Wo(e){return 0!==e.length&&e.length<=Uo}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Go="0.0.1",zo={loggingEnabled:!0},Ho="FIREBASE_INSTALLATIONS_AUTH";function $o(e){var t=Qo();return t?(Zo(t),Promise.resolve()):Jo(e).then(Zo).then((function(e){return Xo(e)}),(function(){}))}function Qo(){var e=So.getInstance().localStorage;if(e){var t=e.getItem(_o);if(t&&ea(t)){var n=e.getItem(bo);if(n)try{var r=JSON.parse(n);return r}catch(i){return}}}}function Xo(e){var t=So.getInstance().localStorage;e&&t&&(t.setItem(bo,JSON.stringify(e)),t.setItem(_o,String(Date.now()+60*Do.getInstance().configTimeToLive*60*1e3)))}var Yo="Could not fetch config, will use default configs";function Jo(e){return Po().then((function(t){var n=Do.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Do.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:Ho+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Do.getInstance().getAppId(),app_version:lo,sdk_version:Go})});return fetch(i).then((function(e){if(e.ok)return e.json();throw Eo.create("RC response not ok")}))})).catch((function(){Oo.info(Yo)}))}function Zo(e){if(!e)return e;var t=Do.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=zo.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=ta(t.tracesSamplingRate),t.logNetworkAfterSampling=ta(t.networkRequestsSamplingRate),e}function ea(e){return Number(e)>Date.now()}function ta(e){return Math.random()<=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na,ra=1;function ia(){return ra=2,na=na||aa(),na}function oa(){return 3===ra}function aa(){return sa().then((function(){return No()})).then((function(e){return $o(e)})).then((function(){return ua()}),(function(){return ua()}))}function sa(){var e=So.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}function ua(){ra=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ca,la=1e4,ha=5500,fa=3,da=1e3,pa=fa,ga=[],va=!1;function ma(){va||(ya(ha),va=!0)}function ya(e){setTimeout((function(){if(0!==pa)return ga.length?void ba():ya(la)}),e)}function ba(){var e=ga.splice(0,da),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Do.getInstance().logSource,log_event:t};_a(n,e).catch((function(){ga=Object(y["__spreadArray"])(Object(y["__spreadArray"])([],e),ga),pa--,Oo.info("Tries left: "+pa+"."),ya(la)}))}function _a(e,t){return wa(e).then((function(e){return e.ok||Oo.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=la;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(ga=Object(y["__spreadArray"])(Object(y["__spreadArray"])([],t),ga),Oo.info("Retry transport request later.")),pa=fa,ya(r)}))}function wa(e){var t=Do.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function Ta(e){if(!e.eventTime||!e.message)throw Eo.create("invalid cc log");ga=Object(y["__spreadArray"])(Object(y["__spreadArray"])([],ga),[e])}function Ia(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);Ta({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(e,t){ca||(ca=Ia(Aa)),ca(e,t)}function Oa(e){var t=Do.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&So.getInstance().requiredApisAvailable()&&(e.isAuto&&qo()!==xo.VISIBLE||(oa()?ka(e):ia().then((function(){return ka(e)}),(function(){return ka(e)}))))}function ka(e){if(Ro()){var t=Do.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return Ea(e,1)}),0)}}function Sa(e){var t=Do.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return Ea(e,0)}),0)}}function Aa(e,t){return 0===t?ja(e):Ca(e)}function ja(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:xa(),network_request_metric:t};return JSON.stringify(n)}function Ca(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:xa(),trace_metric:t};return JSON.stringify(r)}function xa(){return{google_app_id:Do.getInstance().getAppId(),app_instance_id:Ro(),web_app_info:{sdk_version:lo,page_url:So.getInstance().getUrl(),service_worker_status:Vo(),visibility_state:qo(),effective_connection_type:Bo()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Da=100,Na="_",Ra=[vo,mo,yo];function Pa(e,t){return!(0===e.length||e.length>Da)&&(t&&t.startsWith(go)&&Ra.indexOf(e)>-1||!e.startsWith(Na))}function La(e){var t=Math.floor(e);return t<e&&Oo.info("Metric value should be an Integer, setting the value as : "+t+"."),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ma=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=So.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=ho+"-"+this.randomId+"-"+this.name,this.traceStopMark=fo+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||po+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw Eo.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw Eo.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Oa(this)},e.prototype.record=function(e,t,n){if(e<=0)throw Eo.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Eo.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object(y["__assign"])({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Oa(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(!Pa(e,this.name))throw Eo.create("invalid custom metric name",{customMetricName:e});this.counters[e]=La(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=Ko(e),r=Wo(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw Eo.create("invalid attribute name",{attributeName:e});if(!r)throw Eo.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return Object(y["__assign"])({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=So.getInstance().getUrl();if(i){var o=new e(go+i,!0),a=Math.floor(1e3*So.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(e){return e.name===s}));c&&c.startTime&&o.putMetric(vo,Math.floor(1e3*c.startTime));var l=n.find((function(e){return e.name===u}));l&&l.startTime&&o.putMetric(mo,Math.floor(1e3*l.startTime)),r&&o.putMetric(yo,Math.floor(1e3*r))}Oa(o)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);Oa(n)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(e){var t=e;if(t&&void 0!==t.responseStart){var n=So.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime)),a=t.name&&t.name.split("?")[0],s={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Sa(s)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ua=5e3;function Va(){Ro()&&(setTimeout((function(){return Ba()}),0),setTimeout((function(){return qa()}),0),setTimeout((function(){return Ka()}),0))}function qa(){for(var e=So.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];Fa(i)}e.setupObserver("resource",Fa)}function Ba(){var e=So.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){Ma.createOobTrace(t,n),r=void 0}),Ua);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),Ma.createOobTrace(t,n,e))}))}else Ma.createOobTrace(t,n)}function Ka(){for(var e=So.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];Wa(i)}e.setupObserver("measure",Wa)}function Wa(e){var t=e.name;t.substring(0,po.length)!==po&&Ma.createUserTimingTrace(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ga=function(){function e(e){this.app=e,So.getInstance().requiredApisAvailable()&&Object(d["validateIndexedDBOpenable"])().then((function(e){e&&(ma(),ia().then(Va,Va))})).catch((function(e){Oo.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new Ma(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Do.getInstance().instrumentationEnabled},set:function(e){Do.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Do.getInstance().dataCollectionEnabled},set:function(e){Do.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}(),za="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(e){var t=function(e,t){if(e.name!==za)throw Eo.create("FB not default");if("undefined"===typeof window)throw Eo.create("no window");return Ao(window),Do.getInstance().firebaseAppInstance=e,Do.getInstance().installationsService=t,new Ga(e)};e.INTERNAL.registerComponent(new f["Component"]("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion(uo,co)}Ha(l["default"]);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $a,Qa,Xa="firebase_id",Ya="origin",Ja=6e4,Za="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",es="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ts(e,t,n,r,i){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var o,a;return Object(y["__generator"])(this,(function(s){switch(s.label){case 0:return i&&i.global?(e($a.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=Object(y["__assign"])(Object(y["__assign"])({},r),{send_to:o}),e($a.EVENT,n,a),s.label=3;case 3:return[2]}}))}))}function ns(e,t,n,r){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return r&&r.global?(e($a.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e($a.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function rs(e,t,n,r){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(y["__generator"])(this,(function(o){switch(o.label){case 0:return r&&r.global?(e($a.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e($a.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function is(e,t,n,r){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(y["__generator"])(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e($a.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e($a.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))}function os(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e["EVENT"]="event",e["SET"]="set",e["CONFIG"]="config"})($a||($a={})),function(e){e["ADD_SHIPPING_INFO"]="add_shipping_info",e["ADD_PAYMENT_INFO"]="add_payment_info",e["ADD_TO_CART"]="add_to_cart",e["ADD_TO_WISHLIST"]="add_to_wishlist",e["BEGIN_CHECKOUT"]="begin_checkout",e["CHECKOUT_PROGRESS"]="checkout_progress",e["EXCEPTION"]="exception",e["GENERATE_LEAD"]="generate_lead",e["LOGIN"]="login",e["PAGE_VIEW"]="page_view",e["PURCHASE"]="purchase",e["REFUND"]="refund",e["REMOVE_FROM_CART"]="remove_from_cart",e["SCREEN_VIEW"]="screen_view",e["SEARCH"]="search",e["SELECT_CONTENT"]="select_content",e["SELECT_ITEM"]="select_item",e["SELECT_PROMOTION"]="select_promotion",e["SET_CHECKOUT_OPTION"]="set_checkout_option",e["SHARE"]="share",e["SIGN_UP"]="sign_up",e["TIMING_COMPLETE"]="timing_complete",e["VIEW_CART"]="view_cart",e["VIEW_ITEM"]="view_item",e["VIEW_ITEM_LIST"]="view_item_list",e["VIEW_PROMOTION"]="view_promotion",e["VIEW_SEARCH_RESULTS"]="view_search_results"}(Qa||(Qa={}));var as,ss=new p["Logger"]("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(e,t){var n=document.createElement("script");n.src=es+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function cs(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function ls(e,t,n,r,i,o){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var a,s,u,c;return Object(y["__generator"])(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),u=s.find((function(e){return e.measurementId===i})),u?[4,t[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),ss.error(c),[3,8];case 8:return e($a.CONFIG,i,o),[2]}}))}))}function hs(e,t,n,r,i){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f,d;return Object(y["__generator"])(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(a=i["send_to"],Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length;c++)if(h=l[c],f=u(h),"break"===f)break;p.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return p.sent(),e($a.EVENT,r,i||{}),[3,5];case 4:return d=p.sent(),ss.error(d),[3,5];case 5:return[2]}}))}))}function fs(e,t,n,r){function i(i,o,a){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var s;return Object(y["__generator"])(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==$a.EVENT?[3,2]:[4,hs(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==$a.CONFIG?[3,4]:[4,ls(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e($a.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),ss.error(s),[3,7];case 7:return[2]}}))}))}return i}function ds(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=fs(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function ps(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(es))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs=(as={},as["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",as["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",as["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",as["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",as["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",as["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",as["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",as["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',as["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',as),vs=new d["ErrorFactory"]("analytics","Analytics",gs),ms=30,ys=1e3,bs=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=ys),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}(),_s=new bs;function ws(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Ts(e){var t;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(y["__generator"])(this,(function(c){switch(c.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:ws(r)},o=Za.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(a=c.sent(),200===a.status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw vs.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function Is(e,t,n){return void 0===t&&(t=_s),Object(y["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return Object(y["__generator"])(this,(function(l){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw vs.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw vs.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Ss,setTimeout((function(){return Object(y["__awaiter"])(c,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:Ja),[2,Es({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}function Es(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=_s),Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,a,s,u,c,l,h;return Object(y["__generator"])(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Os(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return ss.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,Ts(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(c=f.sent(),!ks(c)){if(r.deleteThrottleMetadata(t),a)return ss.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?Object(d["calculateBackoffMillis"])(o,r.intervalMillis,ms):Object(d["calculateBackoffMillis"])(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(t,h),ss.debug("Calling attemptFetch again in "+l+" millis"),[2,Es(e,h,n,r)];case 7:return[2]}}))}))}function Os(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(vs.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function ks(e){if(!(e instanceof d["FirebaseError"])||!e.customData)return!1;var t=Number(e.customData["httpStatus"]);return 429===t||500===t||503===t||504===t}var Ss=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(y["__generator"])(this,(function(t){switch(t.label){case 0:return Object(d["isIndexedDBAvailable"])()?[3,1]:(ss.warn(vs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Object(d["validateIndexedDBOpenable"])()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),ss.warn(vs.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}function js(e,t,n,r,i,o){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return Object(y["__generator"])(this,(function(d){switch(d.label){case 0:return a=Is(e),a.then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ss.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return ss.error(e)})),t.push(a),s=As().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],ps()||us(o,c.measurementId),i("js",new Date),f={},f[Ya]="firebase",f.update=!0,h=f,null!=l&&(h[Xa]=l),i($a.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cs,xs,Ds={},Ns=[],Rs={},Ps="dataLayer",Ls="gtag",Ms=!1;function Fs(e){if(Ms)throw vs.create("already-initialized");e.dataLayerName&&(Ps=e.dataLayerName),e.gtagName&&(Ls=e.gtagName)}function Us(){var e=[];if(Object(d["isBrowserExtension"])()&&e.push("This is a browser extension environment."),Object(d["areCookiesEnabled"])()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=vs.create("invalid-analytics-context",{errorInfo:t});ss.warn(n.message)}}function Vs(e,t){Us();var n=e.options.appId;if(!n)throw vs.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw vs.create("no-api-key");ss.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Ds[n])throw vs.create("already-exists",{id:n});if(!Ms){cs(Ps);var r=ds(Ds,Ns,Rs,Ps,Ls),i=r.wrappedGtag,o=r.gtagCore;xs=i,Cs=o,Ms=!0}Ds[n]=js(e,Ns,Rs,t,Cs,Ps);var a={app:e,logEvent:function(e,t,r){ts(xs,Ds[n],e,t,r).catch((function(e){return ss.error(e)}))},setCurrentScreen:function(e,t){ns(xs,Ds[n],e,t).catch((function(e){return ss.error(e)}))},setUserId:function(e,t){rs(xs,Ds[n],e,t).catch((function(e){return ss.error(e)}))},setUserProperties:function(e,t){is(xs,Ds[n],e,t).catch((function(e){return ss.error(e)}))},setAnalyticsCollectionEnabled:function(e){os(Ds[n],e).catch((function(e){return ss.error(e)}))},INTERNAL:{delete:function(){return delete Ds[n],Promise.resolve()}}};return a}var qs="@firebase/analytics",Bs="0.6.17",Ks="analytics";function Ws(e){function t(e){try{var t=e.getProvider(Ks).getImmediate();return{logEvent:t.logEvent}}catch(n){throw vs.create("interop-component-reg-failed",{reason:n})}}e.INTERNAL.registerComponent(new f["Component"](Ks,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("installations").getImmediate();return Vs(t,n)}),"PUBLIC").setServiceProps({settings:Fs,EventName:Qa,isSupported:Gs})),e.INTERNAL.registerComponent(new f["Component"]("analytics-internal",t,"PRIVATE")),e.registerVersion(qs,Bs)}function Gs(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(y["__generator"])(this,(function(t){switch(t.label){case 0:if(Object(d["isBrowserExtension"])())return[2,!1];if(!Object(d["areCookiesEnabled"])())return[2,!1];if(!Object(d["isIndexedDBAvailable"])())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(d["validateIndexedDBOpenable"])()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws(l["default"]);var zs,Hs=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],r=t[1],r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),$s=(zs={},zs["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",zs["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",zs["registration-api-key"]="Undefined API key. Check Firebase app initialization.",zs["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",zs["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",zs["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",zs["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",zs["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",zs["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",zs["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',zs["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',zs["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",zs["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",zs),Qs=new d["ErrorFactory"]("remoteconfig","Remote Config",$s);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(e,t){return e instanceof d["FirebaseError"]&&-1!==e.code.indexOf(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(e){return void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Js=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,g,v,m,b,_;return Object(y["__generator"])(this,(function(y){switch(y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=y.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:Ys()},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),y.label=2;case 2:return y.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return y.sent(),[4,c];case 4:return h=y.sent(),[3,6];case 5:throw f=y.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),Qs.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,g=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];b=void 0,y.label=7;case 7:return y.trys.push([7,9,,10]),[4,h.json()];case 8:return b=y.sent(),[3,10];case 9:throw _=y.sent(),Qs.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:v=b["entries"],m=b["state"],y.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?p=500:"NO_CHANGE"===m?p=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(v={}),304!==p&&200!==p)throw Qs.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:g,config:v}]}}))}))},e}(),Zs=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),eu=!1,tu="",nu=0,ru=["1","true","t","yes","y","on"],iu=function(){function e(e,t){void 0===t&&(t=tu),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"===this._source?eu:ru.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return nu;var e=Number(this._value);return isNaN(e)&&(e=nu),e},e.prototype.getSource=function(){return this._source},e}(),ou=6e4,au=432e5,su=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:ou,minimumFetchIntervalMillis:au},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=p["LogLevel"].DEBUG;break;case"silent":this._logger.logLevel=p["LogLevel"].SILENT;break;default:this._logger.logLevel=p["LogLevel"].ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t,n;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r=this;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:e=new Zs,setTimeout((function(){return Object(y["__awaiter"])(r,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=Xs(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){return Object(y["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return uu(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new iu("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new iu("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new iu("static"))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(Object(y["__assign"])(Object(y["__assign"])({},e),t))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(e,t){var n=e.target.error||void 0;return Qs.create(t,{originalErrorMessage:n&&n.message})}var lu="app_namespace_store",hu="firebase_remote_config",fu=1;function du(){return new Promise((function(e,t){var n=indexedDB.open(hu,fu);n.onerror=function(e){t(cu(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(lu,{keyPath:"compositeKey"})}}}))}var pu=function(){function e(e,t,n,r){void 0===r&&(r=du()),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([lu],"readonly"),a=o.objectStore(lu),s=n.createCompositeKey(e);try{var u=a.get(s);u.onerror=function(e){i(cu(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(c){i(Qs.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},e.prototype.set=function(e,t){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var n,r=this;return Object(y["__generator"])(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([lu],"readwrite"),s=a.objectStore(lu),u=r.createCompositeKey(e);try{var c=s.put({compositeKey:u,value:t});c.onerror=function(e){o(cu(e,"storage-set"))},c.onsuccess=function(){i()}}catch(l){o(Qs.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},e.prototype.delete=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(y["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([lu],"readwrite"),a=o.objectStore(lu),s=n.createCompositeKey(e);try{var u=a.delete(s);u.onerror=function(e){i(cu(e,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(Qs.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),gu=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return r=a.sent(),r&&(this.lastFetchStatus=r),[4,t];case 2:return i=a.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=a.sent(),o&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vu(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(Qs.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function mu(e){if(!(e instanceof d["FirebaseError"])||!e.customData)return!1;var t=Number(e.customData["httpStatus"]);return 429===t||500===t||503===t||504===t}var yu=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(y["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return Object(y["__awaiter"])(this,void 0,void 0,(function(){var t,i,o;return Object(y["__generator"])(this,(function(a){switch(a.label){case 0:return[4,vu(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(i=a.sent(),!mu(i))throw i;return o={throttleEndTimeMillis:Date.now()+Object(d["calculateBackoffMillis"])(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),bu="@firebase/remote-config",_u="0.1.42";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wu(e){function t(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("installations").getImmediate();if("undefined"===typeof window)throw Qs.create("registration-window");var a=i.options,s=a.projectId,u=a.apiKey,c=a.appId;if(!s)throw Qs.create("registration-project-id");if(!u)throw Qs.create("registration-api-key");if(!c)throw Qs.create("registration-app-id");r=r||"firebase";var l=new pu(c,i.name,r),h=new gu(l),f=new p["Logger"](bu);f.logLevel=p["LogLevel"].ERROR;var d=new Js(o,e.SDK_VERSION,r,s,u,c),g=new yu(d,l),v=new Hs(g,l,h,f),m=new su(i,v,h,l,f);return m.ensureInitialized(),m}e.INTERNAL.registerComponent(new f["Component"]("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(bu,_u)}wu(l["default"]);n("5fcf");var Tu="firebase",Iu="8.9.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
l["default"].registerVersion(Tu,Iu,"app"),l["default"].SDK_VERSION=Iu;var Eu="firebase",Ou="8.9.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),l["default"].registerVersion(Eu,Ou);var ku=n("2721"),Su=n("0d2c"),Au=n("1b06"),ju=n("38a1"),Cu=n("fac1"),xu=n("c0a7"),Du={name:"EditorWorkers",props:{id:Number},components:{AppEditWrapper:ku["a"],WorkerNavigation:Su["a"],AppLineText:Au["a"],AppHeaderIcon:ju["a"],AppSelect:Cu["a"],AppNotesList:xu["a"]},data:function(){return{editedWorker:"",history:[],note:"",imageData:null,uploadValue:0,imagePassportData:null,uploadPassportValue:0,data:[]}},computed:Object(a["a"])({},Object(c["c"])(["workers","sites","employees","authEmployee"])),created:function(){var e=document.querySelectorAll(".select");e.forEach((function(e){u.a.FormSelect.init(e)})),this.SET_EMPLOYEES_FROM_LOCAL_STORAGE(),this.SET_WORKERS_FROM_LOCAL_STORAGE(),this.SET_SITES_FROM_LOCAL_STORAGE(),this.editedWorker=this.workers[this.$route.params.id],this.data=this.editedWorker.notes},methods:Object(a["a"])(Object(a["a"])({},Object(c["d"])(["SET_WORKERS_FROM_SERVER","SET_WORKERS_FROM_LOCAL_STORAGE","SET_SITES_FROM_SERVER","SET_SITES_FROM_LOCAL_STORAGE","SET_EMPLOYEES_FROM_LOCAL_STORAGE"])),{},{changeData:function(e,t){this.history.push({date:"[–î–∞—Ç–∞: ".concat((new Date).toLocaleDateString()," –í—Ä–µ–º—è: ").concat((new Date).toLocaleTimeString(),"]"),info:"–±—ã–ª –∏–∑–º–µ–Ω—ë–Ω ".concat(t,' –Ω–∞ "').concat(e,'" —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º'),employee:{name:"".concat(this.authEmployee.surname," ").concat(this.authEmployee.name),id:this.authEmployee.id}})},removeNote:function(e){this.data.splice(e,1),l["default"].database().ref("workers/".concat(this.editedWorker.id,"/notes/").concat(e)).remove()},editorExit:function(){this.$router.push("/workers")},saveEditedWorker:function(e){var t=this;this.editedWorker.editedCount+=1,this.note.length&&this.editedWorker.notes.push("".concat((new Date).toLocaleDateString(),": ").concat(this.note));try{var n;this.history.push({date:"[–î–∞—Ç–∞: ".concat((new Date).toLocaleDateString()," –í—Ä–µ–º—è: ").concat((new Date).toLocaleTimeString(),"]"),info:"–†–∞–±–æ—Ç–Ω–∏–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º",employee:{name:"".concat(this.authEmployee.surname," ").concat(this.authEmployee.name),id:this.authEmployee.id}}),(n=e.history).push.apply(n,Object(o["a"])(this.history))}catch(r){u.a.toast({html:"–í–Ω–∏–º–∞–Ω–∏–µ! –î–∞–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é"})}l["default"].database().ref("/workers/"+e.id).set(e).then((function(){t.SET_WORKERS_FROM_SERVER(),t.editorExit()}))},ageCalc:function(){this.editedWorker.age=(new Date).getFullYear()-this.editedWorker.birthday.substr(0,4)},medicalBookCalc:function(){var e=this.editedWorker.medicalBook.substr(0,4)-(new Date).getFullYear();this.editedWorker.medicalBookStatus=e>0?e+" –ª–µ—Ç":"–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–∞"},previewImage:function(e){this.uploadValue=0,this.imageData=e.target.files[0],this.uploadPassportValue=0,this.imagePassportData=e.target.files[0]},addMask:function(e){if(2===e.length){var t=".";return e=e.concat(t),e}},onUpload:function(e){var t=this,n=this.imageData,r=document.querySelector(".ad-form__photo"),i=new FileReader;i.onload=function(e){var t=document.createElement("img");t.src=i.result,t.style.width="100px",t.style.height="100px",t.style.marginRight="15px",r.style.display="flex",r.appendChild(t)},i.readAsDataURL(n),console.log(n);var o=l["default"].storage().ref("".concat(n.name)).put(n);o.on("state_changed",(function(e){t.uploadImagetValue=e.bytesTransferred/e.totalBytes*100}),(function(e){console.log(e.message)}),(function(){t.uploadImageValue=100,o.snapshot.ref.getDownloadURL().then((function(e){t.editedWorker.image=e,console.log(e)}))}))},onPassportUpload:function(){var e=this,t=l["default"].storage().ref("".concat(this.imagePassportData.name)).put(this.imagePassportData);t.on("state_changed",(function(t){e.uploadPassportValue=t.bytesTransferred/t.totalBytes*100}),(function(e){console.log(e.message)}),(function(){e.uploadPassportValue=100,t.snapshot.ref.getDownloadURL().then((function(t){e.editedWorker.passportImage=t}))}))}})},Nu=Du,Ru=(n("c0c6"),n("2877")),Pu=Object(Ru["a"])(Nu,r,i,!1,null,null,null);t["default"]=Pu.exports},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("6b75");function i(e){if(Array.isArray(e))return Object(r["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var a=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return i(e)||o(e)||Object(a["a"])(e)||s()}},"3e8e":function(e,t,n){},"4df4":function(e,t,n){"use strict";var r=n("0366"),i=n("7b0b"),o=n("9bdd"),a=n("e95a"),s=n("50c4"),u=n("8418"),c=n("35a1");e.exports=function(e){var t,n,l,h,f,d,p=i(e),g="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,y=void 0!==m,b=c(p),_=0;if(y&&(m=r(m,v>2?arguments[2]:void 0,2)),void 0==b||g==Array&&a(b))for(t=s(p.length),n=new g(t);t>_;_++)d=y?m(p[_],_):p[_],u(n,_,d);else for(h=b.call(p),f=h.next,n=new g;!(l=f.call(h)).done;_++)d=y?o(h,m,[l.value,_],!0):l.value,u(n,_,d);return n.length=_,n}},"58c5":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Ys})),n.d(t,"b",(function(){return Bs})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return uc})),n.d(t,"e",(function(){return Ks})),n.d(t,"f",(function(){return ac})),n.d(t,"g",(function(){return lc})),n.d(t,"h",(function(){return vc})),n.d(t,"i",(function(){return mc})),n.d(t,"j",(function(){return ic})),n.d(t,"k",(function(){return Oc})),n.d(t,"l",(function(){return cc})),n.d(t,"m",(function(){return _c})),n.d(t,"n",(function(){return Ec})),n.d(t,"o",(function(){return oc})),n.d(t,"p",(function(){return Ic})),n.d(t,"q",(function(){return wc})),n.d(t,"r",(function(){return yc})),n.d(t,"s",(function(){return kc})),n.d(t,"t",(function(){return fc}));var r=n("9ab4"),i=n("a8e9"),o=n("abfd"),a=n("c7b2"),s=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();s.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r["__extends"])(t,e),t}(Error),l=new o["Logger"]("@firebase/firestore");function h(){return l.logLevel}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o["LogLevel"].DEBUG){var i=t.map(g);l.debug.apply(l,Object(r["__spreadArray"])(["Firestore (8.8.1): "+e],i))}}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o["LogLevel"].ERROR){var i=t.map(g);l.error.apply(l,Object(r["__spreadArray"])(["Firestore (8.8.1): "+e],i))}}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o["LogLevel"].WARN){var i=t.map(g);l.warn.apply(l,Object(r["__spreadArray"])(["Firestore (8.8.1): "+e],i))}}function g(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function m(e,t){e||v()}function y(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function w(e,t){return e<t?-1:e>t?1:0}function T(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function I(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?w(this.nanoseconds,e.nanoseconds):w(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),O=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new E(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function S(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function A(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v(),void 0===n?n=e.length-t:n>e.length-t&&v(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(j),x=/^[_a-zA-Z][_a-zA-Z0-9]*$/,D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return x.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(j),N=function(){function e(e){this.fields=e,e.sort(D.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return T(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),R=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return w(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();R.EMPTY_BYTE_STRING=new R("");var P=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L(e){if(m(!!e),"string"==typeof e){var t=0,n=P.exec(e);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:M(e.seconds),nanos:M(e.nanos)}}function M(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function F(e){return"string"==typeof e?R.fromBase64String(e):R.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function V(e){var t=e.mapValue.fields.__previous_value__;return U(t)?V(t):t}function q(e){var t=L(e.mapValue.fields.__local_write_time__.timestampValue);return new E(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return null==e}function K(e){return 0===e&&1/e==-1/0}function W(e){return"number"==typeof e&&Number.isInteger(e)&&!K(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(C.fromString(t))},e.fromName=function(t){return new e(C.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===C.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return C.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new C(t.slice()))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?U(e)?4:10:v()}function H(e,t){var n=z(e);if(n!==z(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return q(e).isEqual(q(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=L(e.timestampValue),r=L(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return F(e.bytesValue).isEqual(F(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return M(e.geoPointValue.latitude)===M(t.geoPointValue.latitude)&&M(e.geoPointValue.longitude)===M(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return M(e.integerValue)===M(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=M(e.doubleValue),r=M(t.doubleValue);return n===r?K(n)===K(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return T(e.arrayValue.values||[],t.arrayValue.values||[],H);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(k(n)!==k(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!H(n[i],r[i])))return!1;return!0}(e,t);default:return v()}}function $(e,t){return void 0!==(e.values||[]).find((function(e){return H(e,t)}))}function Q(e,t){var n=z(e),r=z(t);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=M(e.integerValue||e.doubleValue),r=M(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return X(e.timestampValue,t.timestampValue);case 4:return X(q(e),q(t));case 5:return w(e.stringValue,t.stringValue);case 6:return function(e,t){var n=F(e),r=F(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=w(M(e.latitude),M(t.latitude));return 0!==n?n:w(M(e.longitude),M(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=Q(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=w(r[a],o[a]);if(0!==s)return s;var u=Q(n[r[a]],i[o[a]]);if(0!==u)return u}return w(r.length,o.length)}(e.mapValue,t.mapValue);default:throw v()}}function X(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return w(e,t);var n=L(e),r=L(t),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function Y(e){return J(e)}function J(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=L(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?F(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,G.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=J(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+J(e.fields[o])}return t+"}"}(e.mapValue):v();var t,n}function Z(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function ee(e){return!!e&&"integerValue"in e}function te(e){return!!e&&"arrayValue"in e}function ne(e){return!!e&&"nullValue"in e}function re(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ie(e){return!!e&&"mapValue"in e}function oe(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return S(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=oe(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=oe(e.arrayValue.values[r]);return n}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ie(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oe(t)},e.prototype.setAll=function(e){var t=this,n=D.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=oe(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());ie(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return H(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ie(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){S(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(oe(this.value))},e}();function se(e){var t=[];return S(e.fields,(function(e,n){var r=new D([e]);if(ie(n)){var i=se(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new N(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ue=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,O.min(),ae.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,ae.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,ae.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=ae.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=ae.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),ce=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ce(e,t,n,r,i,o,a)}function he(e){var t=y(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Y(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),B(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ee(t.startAt)),t.endAt&&(n+="|ub:",n+=Ee(t.endAt)),t.h=n}return t.h}function fe(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ke(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!H(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ae(e.startAt,t.startAt)&&Ae(e.endAt,t.endAt)}function de(e){return G.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var pe=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return Object(r["__extends"])(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new ge(e,n,r):"array-contains"===n?new be(e,r):"in"===n?new _e(e,r):"not-in"===n?new we(e,r):"array-contains-any"===n?new Te(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new ve(e,n):new me(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(Q(t,this.value)):null!==t&&z(this.value)===z(t)&&this.m(Q(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),ge=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=G.fromName(r.referenceValue),i}return Object(r["__extends"])(t,e),t.prototype.matches=function(e){var t=G.comparator(e.key,this.key);return this.m(t)},t}(pe),ve=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=ye("in",n),r}return Object(r["__extends"])(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(pe),me=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=ye("not-in",n),r}return Object(r["__extends"])(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(pe);function ye(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return G.fromName(e.referenceValue)}))}var be=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return Object(r["__extends"])(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return te(t)&&$(t.arrayValue,this.value)},t}(pe),_e=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return Object(r["__extends"])(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&$(this.value.arrayValue,t)},t}(pe),we=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return Object(r["__extends"])(t,e),t.prototype.matches=function(e){if($(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!$(this.value.arrayValue,t)},t}(pe),Te=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return Object(r["__extends"])(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!te(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return $(t.value.arrayValue,e)}))},t}(pe),Ie=function(e,t){this.position=e,this.before=t};function Ee(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return Y(e)})).join(",")}var Oe=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function ke(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Se(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?G.comparator(G.fromName(a.referenceValue),n.key):Q(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ae(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!H(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Ce(e,t,n,r,i,o,a,s){return new je(e,t,n,r,i,o,a,s)}function xe(e){return new je(e)}function De(e){return!B(e.limit)&&"F"===e.limitType}function Ne(e){return!B(e.limit)&&"L"===e.limitType}function Re(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Pe(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Le(e){return null!==e.collectionGroup}function Me(e){var t=y(e);if(null===t.p){t.p=[];var n=Pe(t),r=Re(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Oe(n)),t.p.push(new Oe(D.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Oe(D.keyField(),u))}}}return t.p}function Fe(e){var t=y(e);if(!t.T)if("F"===t.limitType)t.T=le(t.path,t.collectionGroup,Me(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Me(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Oe(o.field,a))}var s=t.endAt?new Ie(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Ie(t.startAt.position,!t.startAt.before):null;t.T=le(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Ue(e,t,n){return new je(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ve(e,t){return fe(Fe(e),Fe(t))&&e.limitType===t.limitType}function qe(e){return he(Fe(e))+"|lt:"+e.limitType}function Be(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+Y(t.value);var t})).join(", ")+"]"),B(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Ee(e.startAt)),e.endAt&&(t+=", endAt: "+Ee(e.endAt)),"Target("+t+")"}(Fe(e))+"; limitType="+e.limitType+")"}function Ke(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):G.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Se(e.startAt,Me(e),t))&&(!e.endAt||!Se(e.endAt,Me(e),t))}(e,t)}function We(e){return function(t,n){for(var r=!1,i=0,o=Me(e);i<o.length;i++){var a=o[i],s=Ge(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Ge(e,t,n){var r=e.field.isKeyField()?G.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Q(r,i):v()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:K(t)?"-0":t}}function He(e){return{integerValue:""+e}}function $e(e,t){return W(t)?He(t):ze(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe=function(){this._=void 0};function Xe(e,t,n){return e instanceof Ze?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof et?tt(e,t):e instanceof nt?rt(e,t):function(e,t){var n=Je(e,t),r=ot(n)+ot(e.A);return ee(n)&&ee(e.A)?He(r):ze(e.R,r)}(e,t)}function Ye(e,t,n){return e instanceof et?tt(e,t):e instanceof nt?rt(e,t):n}function Je(e,t){return e instanceof it?ee(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t}(Qe),et=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(r["__extends"])(t,e),t}(Qe);function tt(e,t){for(var n=at(t),r=function(e){n.some((function(t){return H(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(r["__extends"])(t,e),t}(Qe);function rt(e,t){for(var n=at(t),r=function(e){n=n.filter((function(t){return!H(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var it=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return Object(r["__extends"])(t,e),t}(Qe);function ot(e){return M(e.integerValue||e.doubleValue)}function at(e){return te(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st=function(e,t){this.field=e,this.transform=t},ut=function(e,t){this.version=e,this.transformResults=t},ct=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function lt(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ht=function(){};function ft(e,t,n){e instanceof mt?function(e,t,n){var r=e.value.clone(),i=_t(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yt?function(e,t,n){if(lt(e.precondition,t)){var r=_t(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(bt(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dt(e,t,n){e instanceof mt?function(e,t,n){if(lt(e.precondition,t)){var r=e.value.clone(),i=wt(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(vt(t),r).setHasLocalMutations()}}(e,t,n):e instanceof yt?function(e,t,n){if(lt(e.precondition,t)){var r=wt(e.fieldTransforms,n,t),i=t.data;i.setAll(bt(e)),i.setAll(r),t.convertToFoundDocument(vt(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){lt(e.precondition,t)&&t.convertToNoDocument(O.min())}(e,t)}function pt(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=Je(o.transform,a||null);null!=s&&(null==n&&(n=ae.empty()),n.set(o.field,s))}return n||null}function gt(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&T(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof et&&t instanceof et||e instanceof nt&&t instanceof nt?T(e.elements,t.elements,H):e instanceof it&&t instanceof it?H(e.A,t.A):e instanceof Ze&&t instanceof Ze}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function vt(e){return e.isFoundDocument()?e.version:O.min()}var mt=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(r["__extends"])(t,e),t}(ht),yt=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(r["__extends"])(t,e),t}(ht);function bt(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function _t(e,t,n){var r=new Map;m(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Ye(a,s,n[i]))}return r}function wt(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Xe(s,u,t))}return r}var Tt,It,Et=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(r["__extends"])(t,e),t}(ht),Ot=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(r["__extends"])(t,e),t}(ht),kt=function(e){this.count=e};function St(e){switch(e){case u.OK:return v();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return v()}}function At(e){if(void 0===e)return d("GRPC error has no .code"),u.UNKNOWN;switch(e){case Tt.OK:return u.OK;case Tt.CANCELLED:return u.CANCELLED;case Tt.UNKNOWN:return u.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return u.INTERNAL;case Tt.UNAVAILABLE:return u.UNAVAILABLE;case Tt.UNAUTHENTICATED:return u.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case Tt.NOT_FOUND:return u.NOT_FOUND;case Tt.ALREADY_EXISTS:return u.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return u.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case Tt.ABORTED:return u.ABORTED;case Tt.OUT_OF_RANGE:return u.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return u.UNIMPLEMENTED;case Tt.DATA_LOSS:return u.DATA_LOSS;default:return v()}}(It=Tt||(Tt={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jt=function(){function e(e,t){this.comparator=e,this.root=t||xt.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xt.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xt.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ct(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ct(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ct(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ct(this.root,e,this.comparator,!0)},e}(),Ct=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),xt=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();var e=this.left.check();if(e!==this.right.check())throw v();return e+(this.isRed()?0:1)},e}();xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1,xt.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new xt(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Dt=function(){function e(e){this.comparator=e,this.data=new jt(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Nt(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Nt(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Nt=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Rt=new jt(G.comparator);function Pt(){return Rt}var Lt=new jt(G.comparator);function Mt(){return Lt}var Ft=new jt(G.comparator);function Ut(){return Ft}var Vt=new Dt(G.comparator);function qt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Vt,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Bt=new Dt(w);function Kt(){return Bt}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Gt.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(O.min(),r,Kt(),Pt(),qt())},e}(),Gt=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(R.EMPTY_BYTE_STRING,n,qt(),qt(),qt())},e}(),zt=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Ht=function(e,t){this.targetId=e,this.V=t},$t=function(e,t,n,r){void 0===n&&(n=R.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Qt=function(){function e(){this.S=0,this.D=Jt(),this.C=R.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=qt(),t=qt(),n=qt();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v()}})),new Gt(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=Jt()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),Xt=function(){function e(e){this.W=e,this.G=new Map,this.H=Pt(),this.J=Yt(),this.Y=new Dt(w)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:v()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(de(i))if(0===n){var o=new G(i.path);this.tt(t,o,ue.newNoDocument(o,O.min()))}else m(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&de(o.target)){var a=new G(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,ue.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=qt();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Wt(e,n,this.Y,this.H,r);return this.H=Pt(),this.J=Yt(),this.Y=new Dt(w),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Qt,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Dt(w),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new Qt),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Yt(){return new jt(G.comparator)}function Jt(){return new jt(G.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt={asc:"ASCENDING",desc:"DESCENDING"},en={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tn=function(e,t){this.databaseId=e,this.I=t};function nn(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function rn(e,t){return e.I?t.toBase64():t.toUint8Array()}function on(e,t){return nn(e,t.toTimestamp())}function an(e){return m(!!e),O.fromTimestamp(function(e){var t=L(e);return new E(t.seconds,t.nanos)}(e))}function sn(e,t){return function(e){return new C(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function un(e){var t=C.fromString(e);return m(Dn(t)),t}function cn(e,t){return sn(e.databaseId,t.path)}function ln(e,t){var n=un(t);if(n.get(1)!==e.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(pn(n))}function hn(e,t){return sn(e.databaseId,t)}function fn(e){var t=un(e);return 4===t.length?C.emptyPath():pn(t)}function dn(e){return new C(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pn(e){return m(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gn(e,t,n){return{name:cn(e,t),fields:n.value.mapValue.fields}}function vn(e,t,n){var r=ln(e,t.name),i=an(t.updateTime),o=new ae({mapValue:{fields:t.fields}}),a=ue.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function mn(e,t){var n;if(t instanceof mt)n={update:gn(e,t.key,t.value)};else if(t instanceof Et)n={delete:cn(e,t.key)};else if(t instanceof yt)n={update:gn(e,t.key,t.data),updateMask:xn(t.fieldMask)};else{if(!(t instanceof Ot))return v();n={verify:cn(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ze)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof et)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof it)return{fieldPath:t.field.canonicalString(),increment:n.A};throw v()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:on(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v()}(e,t.precondition)),n}function yn(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ct.updateTime(an(e.updateTime)):void 0!==e.exists?ct.exists(e.exists):ct.none()}(t.currentDocument):ct.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)m("REQUEST_TIME"===t.setToServerValue),n=new Ze;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new et(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nt(i)}else"increment"in t?n=new it(e,t.increment):v();var o=D.fromServerFormat(t.fieldPath);return new st(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=ln(e,t.update.name),o=new ae({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new N(t.map((function(e){return D.fromServerFormat(e)})))}(t.updateMask);return new yt(i,o,a,n,r)}return new mt(i,o,n,r)}if(t.delete){var s=ln(e,t.delete);return new Et(s,n)}if(t.verify){var u=ln(e,t.verify);return new Ot(u,n)}return v()}function bn(e,t){return{documents:[hn(e,t.path)]}}function _n(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hn(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hn(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(re(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NAN"}};if(ne(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(re(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NOT_NAN"}};if(ne(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sn(e.field),op:kn(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Sn(e.field),direction:On(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||B(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=In(t.startAt)),t.endAt&&(n.structuredQuery.endAt=In(t.endAt)),n}function wn(e){var t=fn(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Tn(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Oe(An(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return B(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=En(n.startAt));var l=null;return n.endAt&&(l=En(n.endAt)),Ce(t,i,s,a,u,"F",c,l)}function Tn(e){return e?void 0!==e.unaryFilter?[Cn(e)]:void 0!==e.fieldFilter?[jn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Tn(e)})).reduce((function(e,t){return e.concat(t)})):v():[]}function In(e){return{before:e.before,values:e.position}}function En(e){var t=!!e.before,n=e.values||[];return new Ie(n,t)}function On(e){return Zt[e]}function kn(e){return en[e]}function Sn(e){return{fieldPath:e.canonicalString()}}function An(e){return D.fromServerFormat(e.fieldPath)}function jn(e){return pe.create(An(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return v()}}(e.fieldFilter.op),e.fieldFilter.value)}function Cn(e){switch(e.unaryFilter.op){case"IS_NAN":var t=An(e.unaryFilter.field);return pe.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=An(e.unaryFilter.field);return pe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=An(e.unaryFilter.field);return pe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=An(e.unaryFilter.field);return pe.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return v()}}function xn(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Dn(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Pn(t)),t=Rn(e.get(n),t);return Pn(t)}function Rn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Pn(e){return e+""}function Ln(e){var t=e.length;if(m(t>=2),2===t)return m(""===e.charAt(0)&&""===e.charAt(1)),C.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&v(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:v()}o=a+2}return new C(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn=function(e,t){this.seconds=e,this.nanoseconds=t},Fn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Fn.store="owner",Fn.key="owner";var Un=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Un.store="mutationQueues",Un.keyPath="userId";var Vn=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Vn.store="mutations",Vn.keyPath="batchId",Vn.userMutationsIndex="userMutationsIndex",Vn.userMutationsKeyPath=["userId","batchId"];var qn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Nn(t)]},e.key=function(e,t,n){return[e,Nn(t),n]},e}();qn.store="documentMutations",qn.PLACEHOLDER=new qn;var Bn=function(e,t){this.path=e,this.readTime=t},Kn=function(e,t){this.path=e,this.version=t},Wn=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Wn.store="remoteDocuments",Wn.readTimeIndex="readTimeIndex",Wn.readTimeIndexPath="readTime",Wn.collectionReadTimeIndex="collectionReadTimeIndex",Wn.collectionReadTimeIndexPath=["parentPath","readTime"];var Gn=function(e){this.byteSize=e};Gn.store="remoteDocumentGlobal",Gn.key="remoteDocumentGlobalKey";var zn=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};zn.store="targets",zn.keyPath="targetId",zn.queryTargetsIndexName="queryTargetsIndex",zn.queryTargetsKeyPath=["canonicalId","targetId"];var Hn=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Hn.store="targetDocuments",Hn.keyPath=["targetId","path"],Hn.documentTargetsIndex="documentTargetsIndex",Hn.documentTargetsKeyPath=["path","targetId"];var $n=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};$n.key="targetGlobalKey",$n.store="targetGlobal";var Qn=function(e,t){this.collectionId=e,this.parent=t};Qn.store="collectionParents",Qn.keyPath=["collectionId","parent"];var Xn=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Xn.store="clientMetadata",Xn.keyPath="clientId";var Yn=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Yn.store="bundles",Yn.keyPath="bundleId";var Jn=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Jn.store="namedQueries",Jn.keyPath="name";var Zn=Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__spreadArray"])(Object(r["__spreadArray"])([],[Un.store,Vn.store,qn.store,Wn.store,zn.store,Fn.store,$n.store,Hn.store]),[Xn.store])),[Gn.store])),[Qn.store])),[Yn.store,Jn.store]),er="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tr=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),nr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},rr=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),ir=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new sr(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=fr(t.target.error);n.ft.reject(new sr(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new sr(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(f("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new cr(t)},e}(),or=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(i["getUA"])())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return f("SimpleDb","Removing database:",e),lr(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(i["getUA"])(),n=t._t(e),r=0<n&&n<10,o=t.Et(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.gt=function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",BASE_URL:""}))||void 0===t?void 0:t.Tt)},t.It=function(e,t){return e.store(t)},t._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new sr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new sr(e,n))},i.onupgradeneeded=function(e){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},t.prototype.runTransaction=function(e,t,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,a,s,u,c;return Object(r["__generator"])(this,(function(l){switch(l.label){case 0:o="readonly"===t,a=0,s=function(){var t,s,c,l,h;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:++a,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.At(e)];case 2:return u.db=r.sent(),t=ir.open(u.db,e,o?"readonly":"readwrite",n),s=i(t).catch((function(e){return t.abort(e),rr.reject(e)})).toPromise(),c={},s.catch((function(){})),[4,t.dt];case 3:return[2,(c.value=(r.sent(),s),c)];case 4:return l=r.sent(),h="FirebaseError"!==l.name&&a<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ar=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return lr(this.Pt.delete())},e}(),sr=function(e){function t(t,n){var r=this;return(r=e.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r["__extends"])(t,e),t}(c);function ur(e){return"IndexedDbTransactionError"===e.name}var cr=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(f("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lr(n)},e.prototype.add=function(e){return f("SimpleDb","ADD",this.store.name,e,e),lr(this.store.add(e))},e.prototype.get=function(e){var t=this;return lr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return f("SimpleDb","DELETE",this.store.name,e),lr(this.store.delete(e))},e.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),lr(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Ft=function(e,t){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new rr((function(n,r){t.onerror=function(e){var t=fr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new rr((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new ar(i),a=t(i.primaryKey,i.value,o);if(a instanceof rr){var s=a.catch((function(e){return o.done(),rr.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rr.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function lr(e){return new rr((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=fr(e.target.error);n(t)}}))}var hr=!1;function fr(e){var t=or._t(Object(i["getUA"])());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hr||(hr=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return Object(r["__extends"])(t,e),t}(tr);function pr(e,t){var n=y(e);return or.It(n.Mt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ft(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&dt(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&dt(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(O.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qt())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&T(this.mutations,e.mutations,(function(e,t){return gt(e,t)}))&&T(this.baseMutations,e.baseMutations,(function(e,t){return gt(e,t)}))},e}(),vr=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){m(t.mutations.length===r.length);for(var i=Ut(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),mr=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=O.min()),void 0===o&&(o=O.min()),void 0===a&&(a=R.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),yr=function(e){this.Lt=e};function br(e,t){if(t.document)return vn(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=G.fromSegments(t.noDocument.path),r=Er(t.noDocument.readTime),i=ue.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=G.fromSegments(t.unknownDocument.path);return r=Er(t.unknownDocument.version),ue.newUnknownDocument(o,r)}return v()}function _r(e,t,n){var r=wr(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:cn(e,t.key),fields:t.data.value.mapValue.fields,updateTime:nn(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new Wn(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=Ir(t.version);return a=t.hasCommittedMutations,new Wn(null,new Bn(s,u),null,a,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Ir(t.version);return new Wn(new Kn(c,l),null,null,!0,r,i)}return v()}function wr(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Tr(e){var t=new E(e[0],e[1]);return O.fromTimestamp(t)}function Ir(e){var t=e.toTimestamp();return new Mn(t.seconds,t.nanoseconds)}function Er(e){var t=new E(e.seconds,e.nanoseconds);return O.fromTimestamp(t)}function Or(e,t){for(var n=(t.baseMutations||[]).map((function(t){return yn(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return yn(e.Lt,t)})),s=E.fromMillis(t.localWriteTimeMs);return new gr(t.batchId,s,n,a)}function kr(e){var t,n,r=Er(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Er(e.lastLimboFreeSnapshotVersion):O.min();return void 0!==e.query.documents?(m(1===(n=e.query).documents.length),t=Fe(xe(fn(n.documents[0])))):t=function(e){return Fe(wn(e))}(e.query),new mr(t,e.targetId,0,e.lastListenSequenceNumber,r,i,R.fromBase64String(e.resumeToken))}function Sr(e,t){var n,r=Ir(t.snapshotVersion),i=Ir(t.lastLimboFreeSnapshotVersion);n=de(t.target)?bn(e.Lt,t.target):_n(e.Lt,t.target);var o=t.resumeToken.toBase64();return new zn(t.targetId,he(t.target),r,o,t.sequenceNumber,i,n)}function Ar(e){var t=wn({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ue(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Cr(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Er(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Cr(e).put({bundleId:(n=t).id,createTime:Ir(an(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return xr(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ar(t.bundledQuery),readTime:Er(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return xr(e).put(function(e){return{name:e.name,readTime:Ir(an(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Cr(e){return pr(e,Yn.store)}function xr(e){return pr(e,Jn.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dr=function(){function e(){this.Bt=new Nr}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),rr.resolve()},e.prototype.getCollectionParents=function(e,t){return rr.resolve(this.Bt.getEntries(t))},e}(),Nr=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Dt(C.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Dt(C.comparator)).toArray()},e}(),Rr=function(){function e(){this.qt=new Nr}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:Nn(i)};return Pr(e).put(o)}return rr.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[I(t),""],!1,!0);return Pr(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ln(o.parent))}return n}))},e}();function Pr(e){return pr(e,Qn.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mr=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(e,t,n){var r=e.store(Vn.store),i=e.store(qn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){m(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=qn.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return rr.waitFor(o).next((function(){return c}))}function Ur(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(41943040,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);var Vr=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return m(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).$t({index:Vn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Kr(e),a=Br(e);return a.add({}).next((function(s){m("number"==typeof s);for(var u=new gr(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return mn(e.Lt,t)})),i=n.mutations.map((function(t){return mn(e.Lt,t)}));return new Vn(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Dt((function(e,t){return w(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],g=qn.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(g,qn.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),rr.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Br(e).get(t).next((function(e){return e?(m(e.userId===n.userId),Or(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?rr.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Br(e).$t({index:Vn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(m(t.batchId>=r),o=Or(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Br(e).$t({index:Vn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).Nt(Vn.userMutationsIndex,n).next((function(e){return e.map((function(e){return Or(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=qn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Kr(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ln(u);if(s===n.userId&&t.path.isEqual(l))return Br(e).get(c).next((function(e){if(!e)throw v();m(e.userId===n.userId),o.push(Or(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Dt(w),i=[];return t.forEach((function(t){var o=qn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Kr(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Ln(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),rr.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=qn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Dt(w);return Kr(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Ln(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Br(e).get(t).next((function(e){if(null===e)throw v();m(e.userId===n.userId),r.push(Or(n.R,e))})))})),rr.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return Fr(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),rr.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(qn.prefixForUser(t.userId)),i=[];return Kr(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ln(e[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return qr(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return Wr(e).get(this.userId).next((function(e){return e||new Un(t.userId,-1,"")}))},e}();function qr(e,t,n){var r=qn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Kr(e).$t({range:o,kt:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Br(e){return pr(e,Vn.store)}function Kr(e){return pr(e,qn.store)}function Wr(e){return pr(e,Un.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gr=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),zr=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new Gr(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return O.fromTimestamp(new E(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Hr(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return m(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Hr(e).$t((function(a,s){var u=kr(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return rr.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return Hr(e).$t((function(e,n){var r=kr(n);t(r)}))},e.prototype.Xt=function(e){return $r(e).get($n.key).next((function(e){return m(null!==e),e}))},e.prototype.Zt=function(e,t){return $r(e).put($n.key,t)},e.prototype.te=function(e,t){return Hr(e).put(Sr(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=he(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hr(e).$t({range:r,index:zn.queryTargetsIndexName},(function(e,n,r){var o=kr(n);fe(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Qr(e);return t.forEach((function(t){var a=Nn(t.path);i.push(o.put(new Hn(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),rr.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Qr(e);return rr.forEach(t,(function(t){var o=Nn(t.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Qr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qr(e),i=qt();return r.$t({range:n,kt:!0},(function(e,t,n){var r=Ln(e[1]),o=new G(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Nn(t.path),r=IDBKeyRange.bound([n],[I(n)],!1,!0),i=0;return Qr(e).$t({index:Hn.documentTargetsIndex,kt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return Hr(e).get(t).next((function(e){return e?kr(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e){return pr(e,zn.store)}function $r(e){return pr(e,$n.store)}function Qr(e){return pr(e,Hn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){if(e.code!==u.FAILED_PRECONDITION||e.message!==er)throw e;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=w(n,i);return 0===a?w(r,o):a}var Jr=function(){function e(e){this.ne=e,this.buffer=new Dt(Yr),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Yr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),Zr=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ur(t=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Xr(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),ei=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return rr.resolve(s.o);var r=new Jr(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Lr)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Lr):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,a,s,u,c,l=this,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return c=Date.now(),h()<=o["LogLevel"].DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),ti=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new ei(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return ni(e,n)},e.prototype.removeReference=function(e,t,n){return ni(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return ni(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return Wr(e).Ot((function(r){return qr(e,r,t).next((function(e){return e&&(n=!0),rr.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),Qr(e).delete([0,Nn(a.path)])}))}));i.push(u)}})).next((function(){return rr.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return ni(e,t)},e.prototype.we=function(e,t){var n,r=Qr(e),i=s.o;return r.$t({index:Hn.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,u=r.sequenceNumber;0===o?(i!==s.o&&t(new G(Ln(n)),i),i=u,n=a):i=s.o})).next((function(){i!==s.o&&t(new G(Ln(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function ni(e,t){return Qr(e).put(function(e,t){return new Hn(0,Nn(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){S(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return A(this.inner)},e}(),ii=function(){function e(){this.changes=new ri((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:O.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:ue.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?rr.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),oi=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return ui(e).put(ci(t),n)},e.prototype.removeEntry=function(e,t){var n=ui(e),r=ci(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return ui(e).get(ci(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return ui(e).get(ci(t)).next((function(e){return{document:n.ye(t,e),size:Ur(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Pt();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Pt(),i=new jt(G.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,Ur(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return ui(e).$t({range:r},(function(e,t,r){for(var a=G.fromSegments(e);o&&G.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Pt(),o=t.path.length+1,a={};if(n.isEqual(O.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=wr(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Wn.collectionReadTimeIndex}return ui(e).$t(a,(function(e,n,a){if(e.length===o){var s=br(r.R,n);t.path.isPrefixOf(s.key.path)?Ke(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new ai(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return si(e).get(Gn.key).next((function(e){return m(!!e),e}))},e.prototype.me=function(e,t){return si(e).put(Gn.key,t)},e.prototype.ye=function(e,t){if(t){var n=br(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(O.min()))return n}return ue.newInvalidDocument(e)},e}(),ai=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new ri((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return Object(r["__extends"])(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Dt((function(e,t){return w(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=_r(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=Ur(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=_r(t.Ie.R,ue.newNoDocument(o,O.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),rr.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(ii);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(e){return pr(e,Gn.store)}function ui(e){return pr(e,Wn.store)}function ci(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;m(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Fn.store)}(e),function(e){e.createObjectStore(Un.store,{keyPath:Un.keyPath}),e.createObjectStore(Vn.store,{keyPath:Vn.keyPath,autoIncrement:!0}).createIndex(Vn.userMutationsIndex,Vn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(qn.store)}(e),hi(e),function(e){e.createObjectStore(Wn.store)}(e));var a=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Hn.store),e.deleteObjectStore(zn.store),e.deleteObjectStore($n.store)}(e),hi(e)),a=a.next((function(){return function(e){var t=e.store($n.store),n=new $n(0,0,O.min().toTimestamp(),0);return t.put($n.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Vn.store).Nt().next((function(n){e.deleteObjectStore(Vn.store),e.createObjectStore(Vn.store,{keyPath:Vn.keyPath,autoIncrement:!0}).createIndex(Vn.userMutationsIndex,Vn.userMutationsKeyPath,{unique:!0});var r=t.store(Vn.store),i=n.map((function(e){return r.put(e)}));return rr.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Xn.store,{keyPath:Xn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Gn.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Wn.store);t.createIndex(Wn.readTimeIndex,Wn.readTimeIndexPath,{unique:!1}),t.createIndex(Wn.collectionReadTimeIndex,Wn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(e),function(e){e.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(Wn.store).$t((function(e,n){t+=Ur(n)})).next((function(){var n=new Gn(t);return e.store(Gn.store).put(Gn.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(Un.store),r=e.store(Vn.store);return n.Nt().next((function(n){return rr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Vn.userMutationsIndex,i).next((function(r){return rr.forEach(r,(function(r){m(r.userId===n.userId);var i=Or(t.R,r);return Fr(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(Hn.store),n=e.store(Wn.store);return e.store($n.store).get($n.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new C(n),a=function(e){return[0,Nn(e)]}(o);r.push(t.get(a).next((function(n){return n?rr.resolve():function(n){return t.put(new Hn(0,Nn(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return rr.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(Qn.store,{keyPath:Qn.keyPath});var n=t.store(Qn.store),r=new Nr,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Nn(i)})}};return t.store(Wn.store).$t({kt:!0},(function(e,t){var n=new C(e);return i(n.popLast())})).next((function(){return t.store(qn.store).$t({kt:!0},(function(e,t){e[0];var n=e[1];e[2];var r=Ln(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(zn.store);return n.$t((function(e,r){var i=kr(r),o=Sr(t.R,i);return n.put(o)}))},e}();function hi(e){e.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.documentTargetsIndex,Hn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(zn.store,{keyPath:zn.keyPath}).createIndex(zn.queryTargetsIndexName,zn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore($n.store)}var fi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",di=function(){function e(t,n,r,i,o,a,s,l,h,f){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ti(this,i),this.Le=n+"main",this.R=new yr(l),this.Be=new or(this.Le,11,new li(this.R)),this.qe=new zr(this.referenceDelegate,this.R),this.Ut=new Rr,this.Ue=function(e,t){return new oi(e,t)}(this.R,this.Ut),this.Ke=new jr,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new s(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return Object(r["__awaiter"])(t,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return Object(r["__awaiter"])(t,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return gi(t).put(new Xn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(ur(t))return f("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return pi(e).get(Fn.key).next((function(e){return rr.resolve(t.tn(e))}))},e.prototype.en=function(e){return gi(e).delete(this.clientId)},e.prototype.nn=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,i,o=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=pr(e,Xn.store);return t.Nt().next((function(e){var n=o.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return rr.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)i=n[t],this.Qe.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?rr.resolve(!0):pi(e).get(Fn.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return!1}}return!(!t.networkEnabled||!t.inForeground)||gi(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&f("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e=this;return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Fn.store,Xn.store],(function(t){var n=new dr(t,s.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return gi(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return Vr.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;f("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,Zn,(function(o){return i=new dr(o,r.Ne?r.Ne.next():s.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw d("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,er);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return pi(e).get(Fn.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,fi)}))},e.prototype.Ze=function(e){var t=new Fn(this.clientId,this.allowTabSynchronization,Date.now());return pi(e).put(Fn.key,t)},e.yt=function(){return or.yt()},e.prototype.Xe=function(e){var t=this,n=pi(e);return n.get(Fn.key).next((function(e){return t.tn(e)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Fn.key)):rr.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(d("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),Object(i["isSafari"])()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return f("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return d("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){d("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function pi(e){return pr(e,Fn.store)}function gi(e){return pr(e,Xn.store)}function vi(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var mi=function(e,t){this.progress=e,this.wn=t},yi=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return G.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Le(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new G(t)).next((function(e){var t=Mt();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=Mt();return this.Ut.getCollectionParents(e,i).next((function(a){return rr.forEach(a,(function(a){var s=function(e,t){return new je(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=ue.newInvalidDocument(c),r=r.insert(c,l)),dt(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){Ke(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=qt(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof yt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),bi=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=qt(),i=qt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),_i=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(O.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(a){var s=i.Cn(t,a);return(De(t)||Ne(t))&&i.Nn(t.limitType,s,r,n)?i.Dn(e,t):(h()<=o["LogLevel"].DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Be(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new Dt(We(e));return t.forEach((function(t,r){Ke(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return h()<=o["LogLevel"].DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Be(t)),this.Sn.getDocumentsMatchingQuery(e,t,O.min())},e}(),wi=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new jt(w),this.kn=new ri((function(e){return he(e)}),fe),this.$n=O.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new yi(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Fn)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(e,t,n,r){return new wi(e,t,n,r)}function Ii(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var r;return n._n.getAllMutationBatches(e).next((function(a){return r=a,i=n.persistence.getMutationQueue(t),o=new yi(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(t){for(var n=[],i=[],a=qt(),s=0,u=r;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var g=p[d];i.push(g.batchId);for(var v=0,m=g.mutations;v<m.length;v++){var y=m[v];a=a.add(y.key)}}return o.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return a=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),a)]}}))}))}function Ei(e,t){var n=y(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=rr.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);m(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function Oi(e){var t=y(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function ki(e,t){var n=y(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return m(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.qe.updateTargetData(e,c))}}}));var s=Pt();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Si(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(O.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return rr.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.Fn=i,e}))}function Si(e,t,n,r,i){var o=qt();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Pt();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(O.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Ai(e,t){var n=y(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function ji(e,t){var n=y(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,rr.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new mr(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Fn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(e.targetId,e),n.kn.set(t,e.targetId)),e}))}function Ci(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:i=y(e),o=i.Fn.get(t),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!ur(s=r.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return i.Fn=i.Fn.remove(t),i.kn.delete(o.target),[2]}}))}))}function xi(e,t,n){var r=y(e),i=O.min(),o=qt();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=y(e),i=r.kn.get(n);return void 0!==i?rr.resolve(r.Fn.get(i)):r.qe.getTargetData(t,n)}(r,e,Fe(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:O.min(),n?o:qt())})).next((function(e){return{documents:e,Bn:o}}))}))}function Di(e,t){var n=y(e),r=y(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Ni(e){var t=y(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=y(e),i=Pt(),o=wr(n),a=ui(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:Wn.readTimeIndex,range:s},(function(e,t){var n=br(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:Tr(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function Ri(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){return[2,(t=y(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=ui(e),n=O.min();return t.$t({index:Wn.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Tr(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.$n=e}))]}))}))}function Pi(e,t,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f,d,p;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:for(o=y(e),a=qt(),s=Pt(),u=Ut(),c=0,l=n;c<l.length;c++)h=l[c],f=t.qn(h.metadata.name),h.document&&(a=a.add(f)),s=s.insert(f,t.Un(h)),u=u.insert(f,t.Kn(h.metadata.readTime));return d=o.On.newChangeBuffer({trackRemovals:!0}),[4,ji(o,function(e){return Fe(xe(C.fromString("__bundle__/docs/"+e)))}(i))];case 1:return p=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Si(e,d,s,O.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return o.qe.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return o.qe.addMatchingKeys(e,a,p.targetId)})).next((function(){return o.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function Li(e,t,n){return void 0===n&&(n=qt()),Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,ji(e,Fe(Ar(t.bundledQuery)))];case 1:return i=r.sent(),[2,(o=y(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var r=an(t.readTime);if(i.snapshotVersion.compareTo(r)>=0)return o.Ke.saveNamedQuery(e,t);var a=i.withResumeToken(R.EMPTY_BYTE_STRING,r);return o.Fn=o.Fn.insert(a.targetId,a),o.qe.updateTargetData(e,a).next((function(){return o.qe.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.qe.addMatchingKeys(e,n,i.targetId)})).next((function(){return o.Ke.saveNamedQuery(e,t)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Mi=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return rr.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:an(n.createTime)}),rr.resolve()},e.prototype.getNamedQuery=function(e,t){return rr.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Ar(e.bundledQuery),readTime:an(e.readTime)}}(t)),rr.resolve()},e}(),Fi=function(){function e(){this.Wn=new Dt(Ui.Gn),this.zn=new Dt(Ui.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new Ui(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new Ui(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new G(new C([])),r=new Ui(n,e),i=new Ui(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new G(new C([])),n=new Ui(t,e),r=new Ui(t,e+1),i=qt();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Ui(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Ui=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return G.comparator(e.key,t.key)||w(e.ns,t.ns)},e.Hn=function(e,t){return w(e.ns,t.ns)||G.comparator(e.key,t.key)},e}(),Vi=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Dt(Ui.Gn)}return e.prototype.checkEmpty=function(e){return rr.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new gr(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Ui(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return rr.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return rr.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return rr.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return rr.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return rr.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),rr.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Dt(w);return t.forEach((function(e){var t=new Ui(e,0),i=new Ui(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),rr.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;G.isDocumentKey(i)||(i=i.child(""));var o=new Ui(new G(i),0),a=new Dt(w);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),rr.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;m(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return rr.forEach(t.mutations,(function(i){var o=new Ui(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new Ui(t,0),r=this.rs.firstAfterOrEqual(n);return rr.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,rr.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),qi=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new jt(G.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return rr.resolve(n?n.document.clone():ue.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Pt();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():ue.newInvalidDocument(e))})),rr.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Pt(),i=new G(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ke(t,c)&&(r=r.insert(c.key,c.clone()))}return rr.resolve(r)},e.prototype.fs=function(e,t){return rr.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new Bi(this)},e.prototype.getSize=function(e){return rr.resolve(this.size)},e}(),Bi=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return Object(r["__extends"])(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),rr.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(ii),Ki=function(){function e(e){this.persistence=e,this.ds=new ri((function(e){return he(e)}),fe),this.lastRemoteSnapshotVersion=O.min(),this.highestTargetId=0,this.ws=0,this._s=new Fi,this.targetCount=0,this.ys=Gr.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),rr.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return rr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return rr.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),rr.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),rr.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Gr(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,rr.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),rr.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,rr.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),rr.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return rr.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return rr.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),rr.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),rr.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),rr.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return rr.resolve(n)},e.prototype.containsKey=function(e,t){return rr.resolve(this._s.containsKey(t))},e}(),Wi=function(){function e(e,t){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new Ki(this),this.Ut=new Dr,this.Ue=function(e,t){return new qi(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new yr(t),this.Ke=new Mi(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new Vi(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;f("MemoryPersistence","Starting transaction:",e);var i=new Gi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return rr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),Gi=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return Object(r["__extends"])(t,e),t}(tr),zi=function(){function e(e){this.persistence=e,this.As=new Fi,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw v()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),rr.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),rr.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),rr.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.vs,(function(r){var i=G.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return rr.or([function(){return rr.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),Hi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(e,t){return"firestore_clients_"+e+"_"+t}function Qi(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Xi(e,t){return"firestore_targets_"+e+"_"+t}Hi.UNAUTHENTICATED=new Hi(null),Hi.GOOGLE_CREDENTIALS=new Hi("google-credentials-uid"),Hi.FIRST_PARTY=new Hi("first-party-uid");var Yi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ji=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new e(t,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Zi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Kt(),a=0;i&&a<r.activeTargetIds.length;++a)i=W(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(d("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),eo=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+t),null)},e}(),to=function(){function e(){this.activeTargetIds=Kt()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),no=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new jt(w),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=$i(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new to),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,u,c,l,h,f=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=r.sent(),t=0,n=e;t<n.length;t++)(i=n[t])!==this.Ns&&(o=this.getItem($i(this.persistenceKey,i)))&&(a=Zi.Vs(i,o))&&(this.ks=this.ks.insert(a.clientId,a));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Xi(this.persistenceKey,e));if(n){var r=Ji.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Xi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return f("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){f("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){f("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var e,t,i,o,a,u;return Object(r["__generator"])(this,(function(r){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(i=this.si(n.key,n.newValue)))return[2,this.ii(i)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(u=function(e){var t=s.o;if(null!=e)try{var n=JSON.parse(e);m("number"==typeof n),t=n}catch(e){d("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new Yi(this.currentUser,e,t,n),i=Qi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=Qi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=Xi(this.persistenceKey,e),i=new Ji(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return Zi.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yi.Vs(new Hi(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return Ji.Vs(r,t)},e.prototype.js=function(e){return eo.Vs(e)},e.prototype.ii=function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=Kt();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),ro=function(){function e(){this.li=new to,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new to,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),io=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),oo=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ao={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},so=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),uo=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return Object(r["__extends"])(t,e),t.prototype.ki=function(e,t,n,r){return new Promise((function(i,o){var s=new a["g"];s.listenOnce(a["c"].COMPLETE,(function(){try{switch(s.getLastErrorCode()){case a["a"].NO_ERROR:var t=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(t)),i(t);break;case a["a"].TIMEOUT:f("Connection",'RPC "'+e+'" timed out'),o(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case a["a"].HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(t)>=0?t:u.UNKNOWN}(r.status);o(new c(l,r.message))}else o(new c(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new c(u.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{f("Connection",'RPC "'+e+'" completed.')}}));var l=JSON.stringify(r);s.send(t,"POST",l,n,15)}))},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Object(a["h"])(),o=Object(a["i"])(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new a["d"]({})),this.Fi(s.initMessageHeaders,t),Object(i["isMobileCordova"])()||Object(i["isReactNative"])()||Object(i["isElectron"])()||Object(i["isIE"])()||Object(i["isUWP"])()||Object(i["isBrowserExtension"])()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=r.createWebChannel(l,s),d=!1,g=!1,v=new so({Ei:function(e){g?f("Connection","Not sending because WebChannel is closed:",e):(d||(f("Connection","Opening WebChannel transport."),h.open(),d=!0),f("Connection","WebChannel sending:",e),h.send(e))},Ti:function(){return h.close()}}),y=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return y(h,a["f"].EventType.OPEN,(function(){g||f("Connection","WebChannel transport opened.")})),y(h,a["f"].EventType.CLOSE,(function(){g||(g=!0,f("Connection","WebChannel transport closed"),v.Vi())})),y(h,a["f"].EventType.ERROR,(function(e){g||(g=!0,p("Connection","WebChannel transport errored:",e),v.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),y(h,a["f"].EventType.MESSAGE,(function(e){var t;if(!g){var n=e.data[0];m(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=Tt[e];if(void 0!==t)return At(t)}(o),s=i.message;void 0===a&&(a=u.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),g=!0,v.Vi(new c(a,s)),h.close()}else f("Connection","WebChannel received:",n),v.Si(n)}})),y(o,a["b"].STAT_EVENT,(function(e){e.stat===a["e"].PROXY?f("Connection","Detected buffering proxy"):e.stat===a["e"].NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){v.Pi()}),0),v},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(e,i,o,n).then((function(e){return f("RestConnection","Received: ",e),e}),(function(t){throw p("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=ao[e];return this.Di+"/v1/"+t+":"+n},e}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(){return"undefined"!=typeof window?window:null}function lo(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(e){return new tn(e,!0)}var fo=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),po=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fo(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===u.RESOURCE_EXHAUSTED?(d(t.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return f("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),go=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(r["__extends"])(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(m(void 0===t||"string"==typeof t),R.fromBase64String(t||"")):(m(void 0===t||t instanceof Uint8Array),R.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?u.UNKNOWN:At(e.code);return new c(t,e.message||"")}(s);n=new $t(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=ln(e,r.document.name),o=an(r.document.updateTime);var s=new ae({mapValue:{fields:r.document.fields}}),l=(a=ue.newFoundDocument(i,o,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new zt(l,h,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=ln(e,r.document),o=r.readTime?an(r.readTime):O.min(),s=ue.newNoDocument(i,o),a=r.removedTargetIds||[],n=new zt([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=ln(e,r.document),o=r.removedTargetIds||[],n=new zt([],o,i,null);else{if(!("filter"in t))return v();t.filter;var f=t.filter;f.targetId,r=f.count||0,i=new kt(r),o=f.targetId,n=new Ht(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return O.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?O.min():t.readTime?an(t.readTime):O.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=dn(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=de(r)?{documents:bn(e,r)}:{query:_n(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=rn(e,t.resumeToken):t.snapshotVersion.compareTo(O.min())>0&&(n.readTime=nn(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=dn(this.R),t.removeTarget=e,this.cr(t)},t}(po),vo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(r["__extends"])(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(m(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(m(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?an(e.updateTime):an(t);return n.isEqual(O.min())&&(n=an(t)),new ut(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=an(e.commitTime);return this.listener.Tr(n,t)}return m(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=dn(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return mn(t.R,e)}))};this.cr(n)},t}(po),mo=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(r["__extends"])(t,e),t.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new c(u.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new c(u.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),yo=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(t),this.Vr=!1):f("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),bo=function(e,t,n,i,o){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(e){n.enqueueAndForget((function(){return Object(r["__awaiter"])(a,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return Ao(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return(t=y(e)).Or.add(4),[4,wo(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,_o(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new yo(n,i)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:if(!Ao(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function wo(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function To(e,t){var n=y(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),So(n)?ko(n):Ko(n).er()&&Eo(n,t))}function Io(e,t){var n=y(e),r=Ko(n);n.$r.delete(t),r.er()&&Oo(n,t),0===n.$r.size&&(r.er()?r.ir():Ao(n)&&n.Br.set("Unknown"))}function Eo(e,t){e.qr.U(t.targetId),Ko(e).mr(t)}function Oo(e,t){e.qr.U(t),Ko(e).yr(t)}function ko(e){e.qr=new Xt({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Ko(e).start(),e.Br.Sr()}function So(e){return Ao(e)&&!Ko(e).tr()&&e.$r.size>0}function Ao(e){return 0===y(e).Or.size}function jo(e){e.qr=void 0}function Co(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return e.$r.forEach((function(t,n){Eo(e,t)})),[2]}))}))}function xo(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){return jo(e),So(e)?(e.Br.Nr(t),ko(e)):e.Br.set("Unknown"),[2]}))}))}function Do(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a;return Object(r["__generator"])(this,(function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof $t&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=t.cause,i=0,o=t.targetIds,r.label=1;case 1:return i<o.length?(a=o[i],e.$r.has(a)?[4,e.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:r.sent(),e.$r.delete(a),e.qr.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),[4,No(e,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof zt?e.qr.X(t):t instanceof Ht?e.qr.rt(t):e.qr.et(t),n.isEqual(O.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Oi(e.localStore)];case 8:return o=s.sent(),n.compareTo(o)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(R.EMPTY_BYTE_STRING,n.snapshotVersion)),Oo(e,t);var r=new mr(n.target,t,1,n.sequenceNumber);Eo(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,No(e,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function No(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i=this;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:if(!ur(t))throw t;return e.Or.add(1),[4,wo(e)];case 1:return o.sent(),e.Br.set("Offline"),n||(n=function(){return Oi(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,_o(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Ro(e,t){return t().catch((function(n){return No(e,n,t)}))}function Po(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,n,i,o,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:t=y(e),n=Wo(t),i=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,r.label=1;case 1:if(!function(e){return Ao(e)&&e.kr.length<10}(t))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Ai(t.localStore,i)];case 3:return null===(o=r.sent())?(0===t.kr.length&&n.ir(),[3,7]):(i=o.batchId,function(e,t){e.kr.push(t);var n=Wo(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,o),[3,6]);case 4:return a=r.sent(),[4,No(t,a)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Lo(t)&&Mo(t),[2]}}))}))}function Lo(e){return Ao(e)&&!Wo(e).tr()&&e.kr.length>0}function Mo(e){Wo(e).start()}function Fo(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){return Wo(e).Ar(),[2]}))}))}function Uo(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,n,i,o;return Object(r["__generator"])(this,(function(r){for(t=Wo(e),n=0,i=e.kr;n<i.length;n++)o=i[n],t.Er(o.mutations);return[2]}))}))}function Vo(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return i=e.kr.shift(),o=vr.from(i,t,n),[4,Ro(e,(function(){return e.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return r.sent(),[4,Po(e)];case 2:return r.sent(),[2]}}))}))}function qo(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return t&&Wo(e).pr?[4,function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return St(i=t.code)&&i!==u.ABORTED?(n=e.kr.shift(),Wo(e).sr(),[4,Ro(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return r.sent(),[4,Po(e)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Lo(e)&&Mo(e),[2]}}))}))}function Bo(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=y(e),t?(n.Or.delete(2),[4,_o(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,wo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ko(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=y(e);return r.br(),new go(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Co.bind(null,e),Ri:xo.bind(null,e),_r:Do.bind(null,e)}),e.Mr.push((function(n){return Object(r["__awaiter"])(t,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),So(e)?ko(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),jo(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function Wo(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=y(e);return r.br(),new vo(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Fo.bind(null,e),Ri:qo.bind(null,e),Ir:Uo.bind(null,e),Tr:Vo.bind(null,e)}),e.Mr.push((function(n){return Object(r["__awaiter"])(t,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,Po(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.kr.length>0&&(f("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Kr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Go=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function zo(e,t){if(d("AsyncQueue",t+": "+e),ur(e))return new c(u.UNAVAILABLE,t+": "+e);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ho=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||G.comparator(t.key,n.key)}:function(e,t){return G.comparator(e.key,t.key)},this.keyedMap=Mt(),this.sortedSet=new jt(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),$o=function(){function e(){this.Qr=new jt(G.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):v():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Qo=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ho.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ve(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Xo=function(){this.Wr=void 0,this.listeners=[]},Yo=function(){this.queries=new ri((function(e){return qe(e)}),Ve),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s,u,c;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:if(n=y(e),i=t.query,o=!1,(a=n.queries.get(i))||(o=!0,a=new Xo),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.onListen(i)];case 2:return s.Wr=r.sent(),[3,4];case 3:return u=r.sent(),c=zo(u,"Initialization of query '"+Be(t.query)+"' failed"),[2,void t.onError(c)];case 4:return n.queries.set(i,a),a.listeners.push(t),t.zr(n.onlineState),a.Wr&&t.Hr(a.Wr)&&na(n),[2]}}))}))}function Zo(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s;return Object(r["__generator"])(this,(function(r){return n=y(e),i=t.query,o=!1,(a=n.queries.get(i))&&(s=a.listeners.indexOf(t))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]}))}))}function ea(e,t){for(var n=y(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&na(n)}function ta(e,t,n){var r=y(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function na(e){e.Gr.forEach((function(e){e.next()}))}var ra=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new Qo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),ia=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),oa=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return ln(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?vn(this.R,e.document,!1):ue.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return an(e)},e}(),aa=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=sa(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new oa(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||qt()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Pi(this.localStore,new oa(this.R),this.documents,this.ro.id)];case 1:e=r.sent(),t=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?(o=i[n],[4,Li(this.localStore,o,t.get(o.name))]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new mi(Object.assign({},this.progress),e))]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ua=function(e){this.key=e},ca=function(e){this.key=e},la=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=qt(),this.mutatedKeys=qt(),this.lo=We(e),this.fo=new Ho(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new $o,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=De(this.query)&&i.size===this.query.limit?i.last():null,c=Ne(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Ke(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),De(this.query)||Ne(this.query))for(;a.size>this.query.limit;){var l=De(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Qo(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new $o,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=qt(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new ca(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new ua(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=qt();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return Qo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),ha=function(e,t,n){this.query=e,this.targetId=t,this.view=n},fa=function(e){this.key=e,this.bo=!1},da=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ri((function(e){return qe(e)}),Ve),this.Vo=new Map,this.So=new Set,this.Do=new jt(G.comparator),this.Co=new Map,this.No=new Fi,this.xo={},this.Fo=new Map,this.ko=Gr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function pa(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s,u;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=Ka(e),(a=n.Po.get(t))?(i=a.targetId,n.sharedClientState.addLocalQueryTarget(i),o=a.view.Ro(),[3,4]):[3,1];case 1:return[4,ji(n.localStore,Fe(t))];case 2:return s=r.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,[4,ga(n,t,i,"current"===u)];case 3:o=r.sent(),n.isPrimaryClient&&To(n.remoteStore,s),r.label=4;case 4:return[2,o]}}))}))}function ga(e,t,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,a,s,u,c,l;return Object(r["__generator"])(this,(function(h){switch(h.label){case 0:return e.Oo=function(t,n,i){return function(e,t,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,a,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return o=t.view._o(n),o.Nn?[4,xi(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.targetChanges.get(t.targetId),s=t.view.applyChanges(o,e.isPrimaryClient,a),[2,(Aa(e,t.targetId,s.To),s.snapshot)]}}))}))}(e,t,n,i)},[4,xi(e.localStore,t,!0)];case 1:return o=h.sent(),a=new la(t,o.Bn),s=a._o(o.documents),u=Gt.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),c=a.applyChanges(s,e.isPrimaryClient,u),Aa(e,n,c.To),l=new ha(t,n,a),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),c.snapshot)]}}))}))}function va(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=n.Po.get(t),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter((function(e){return!Ve(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,Ci(n.localStore,i.targetId,!1).then((function(){n.sharedClientState.clearQueryState(i.targetId),Io(n.remoteStore,i.targetId),ka(n,i.targetId)})).catch(Xr)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return ka(n,i.targetId),[4,Ci(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function ma(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:i=Wa(e),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(e,t){var n,r=y(e),i=E.now(),o=t.reduce((function(e,t){return e.add(t.key)}),qt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=pt(c,n.get(c.key));null!=l&&a.push(new yt(c.key,l,se(l.value.mapValue),ct.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,t)];case 2:return o=r.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new jt(w)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(i,o.batchId,n),[4,xa(i,o.changes)];case 3:return r.sent(),[4,Po(i.remoteStore)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=zo(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ya(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=y(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,ki(n.localStore,t)];case 2:return i=r.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(m(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?m(r.bo):e.removedDocuments.size>0&&(m(r.bo),r.bo=!1))})),[4,xa(n,i,t)];case 3:return r.sent(),[3,6];case 4:return[4,Xr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ba(e,t,n){var r=y(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=y(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&na(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function _a(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(i=y(e)).sharedClientState.updateQueryState(t,"rejected",n),o=i.Co.get(t),(a=o&&o.key)?(s=(s=new jt(G.comparator)).insert(a,ue.newNoDocument(a,O.min())),u=qt().add(a),c=new Wt(O.min(),new Map,new Dt(w),s,u),[4,ya(i,c)]):[3,2];case 1:return r.sent(),i.Do=i.Do.remove(a),i.Co.delete(t),Ca(i),[3,4];case 2:return[4,Ci(i.localStore,t,!1).then((function(){return ka(i,t,n)})).catch(Xr)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function wa(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=y(e),i=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ei(n.localStore,t)];case 2:return o=r.sent(),Oa(n,i,null),Ea(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,xa(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Xr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ta(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:i=y(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return m(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(i.localStore,t)];case 2:return o=r.sent(),Oa(i,t,n),Ea(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),[4,xa(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Xr(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ia(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:Ao((n=y(e)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(e){var t=y(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void t.resolve()]:((o=n.Fo.get(i)||[]).push(t),n.Fo.set(i,o),[3,4]);case 3:return a=r.sent(),s=zo(a,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}function Ea(e,t){(e.Fo.get(t)||[]).forEach((function(e){e.resolve()})),e.Fo.delete(t)}function Oa(e,t,n){var r=y(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function ka(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||Sa(e,t)}))}function Sa(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(Io(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Ca(e))}function Aa(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ua?(e.No.addReference(o.key,t),ja(e,o)):o instanceof ca?(f("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||Sa(e,o.key)):v()}}function ja(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(f("SyncEngine","New document in limbo: "+n),e.So.add(r),Ca(e))}function Ca(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new G(C.fromString(t)),r=e.ko.next();e.Co.set(r,new fa(n)),e.Do=e.Do.insert(n,r),To(e.remoteStore,new mr(Fe(xe(n.path)),r,2,s.o))}}function xa(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s;return Object(r["__generator"])(this,(function(u){switch(u.label){case 0:return i=y(e),o=[],a=[],s=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach((function(e,r){s.push(i.Oo(r,t,n).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(r.targetId,e.fromCache?"not-current":"current"),o.push(e);var t=bi.Pn(r.targetId,e);a.push(t)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),i.vo._r(o),[4,function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l,h;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=y(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return rr.forEach(t,(function(t){return rr.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return rr.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!ur(i=r.sent()))throw i;return f("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=t;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(c=n.Fn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}}))}))}(i.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Da(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(n=y(e)).currentUser.isEqual(t)?[3,3]:(f("SyncEngine","User change. New user:",t.toKey()),[4,Ii(n.localStore,t)]);case 1:return i=r.sent(),n.currentUser=t,function(e,t){e.Fo.forEach((function(e){e.forEach((function(e){e.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fo.clear()}(n),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),[4,xa(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function Na(e,t){var n=y(e),r=n.Co.get(t);if(r&&r.bo)return qt().add(r.key);var i=qt(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Ra(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,xi((n=y(e)).localStore,t.query,!0)];case 1:return i=r.sent(),o=t.view.Ao(i),[2,(n.isPrimaryClient&&Aa(n,t.targetId,o.To),o)]}}))}))}function Pa(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){return[2,Ni((t=y(e)).localStore).then((function(e){return xa(t,e)}))]}))}))}function La(e,t,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,a;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,function(e,t){var n=y(e),r=y(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):rr.resolve(null)}))}))}((o=y(e)).localStore,t)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,Po(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Oa(o,t,i||null),Ea(o,t),function(e,t){y(y(e)._n).Gt(t)}(o.localStore,t)):v(),r.label=4;case 4:return[4,xa(o,a)];case 5:return r.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+t),r.label=7;case 7:return[2]}}))}))}function Ma(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return Ka(n=y(e)),Wa(n),!0!==t||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,Fa(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,Bo(n.remoteStore,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)u=s[a],To(n.remoteStore,u);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ka(n,t),Ci(n.localStore,t,!0)})),Io(n.remoteStore,t)})),[4,l]);case 4:return r.sent(),[4,Fa(n,c)];case 5:return r.sent(),function(e){var t=y(e);t.Co.forEach((function(e,n){Io(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new jt(G.comparator)}(n),n.$o=!1,[4,Bo(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Fa(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l,h,f,d,p,g,v;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:n=y(e),i=[],o=[],a=0,s=t,r.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,ji(n.localStore,Fe(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Ra(n,p)]):[3,6];case 4:(g=r.sent()).snapshot&&o.push(g.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Di(n.localStore,u)];case 8:return v=r.sent(),[4,ji(n.localStore,v)];case 9:return c=r.sent(),[4,ga(n,Ua(v),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(o),i)]}}))}))}function Ua(e){return Ce(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Va(e){var t=y(e);return y(y(t.localStore).persistence).fn()}function qa(e,t,n,i){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var o,a,s;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(o=y(e)).$o?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ni(o.localStore)];case 3:return a=r.sent(),s=Wt.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,xa(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,Ci(o.localStore,t,!0)];case 6:return r.sent(),ka(o,t,i),[3,8];case 7:v(),r.label=8;case 8:return[2]}}))}))}function Ba(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,d,p;return Object(r["__generator"])(this,(function(g){switch(g.label){case 0:if(!(i=Ka(e)).$o)return[3,10];o=0,a=t,g.label=1;case 1:return o<a.length?(s=a[o],i.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,Di(i.localStore,s)]):[3,6];case 2:return u=g.sent(),[4,ji(i.localStore,u)];case 3:return c=g.sent(),[4,ga(i,Ua(u),c.targetId,!1)];case 4:g.sent(),To(i.remoteStore,c),g.label=5;case 5:return o++,[3,1];case 6:l=function(e){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return i.Vo.has(e)?[4,Ci(i.localStore,e,!1).then((function(){Io(i.remoteStore,e),ka(i,e)})).catch(Xr)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,d=n,g.label=7;case 7:return h<d.length?(p=d[h],[5,l(p)]):[3,10];case 8:g.sent(),g.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ka(e){var t=y(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ya.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Na.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_a.bind(null,t),t.vo._r=ea.bind(null,t.eventManager),t.vo.Mo=ta.bind(null,t.eventManager),t}function Wa(e){var t=y(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wa.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ta.bind(null,t),t}function Ga(e,t,n){var i=y(e);(function(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return i=r.sent(),[4,function(e,t){var n=y(e),r=an(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ke.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(e.localStore,i)];case 2:return r.sent()?[4,t.close()]:[3,4];case 3:return[2,(r.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)))];case 4:return n._updateProgress(sa(i)),o=new aa(i,e.localStore,t.R),[4,t.Lo()];case 5:a=r.sent(),r.label=6;case 6:return a?[4,o.oo(a)]:[3,10];case 7:return(s=r.sent())&&n._updateProgress(s),[4,t.Lo()];case 8:a=r.sent(),r.label=9;case 9:return[3,6];case 10:return[4,o.complete()];case 11:return u=r.sent(),[4,xa(e,u.wn,void 0)];case 12:return r.sent(),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ke.saveBundleMetadata(e,t)}))}(e.localStore,i)];case 13:return r.sent(),n._completeWith(u.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(c=r.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,t,n).then((function(){i.sharedClientState.notifyBundleLoaded()}))}var za=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return this.R=ho(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return Ti(this.persistence,new _i,e.initialUser,this.R)},e.prototype.qo=function(e){return new Wi(zi.bs,this.R)},e.prototype.Bo=function(e){return new ro},e.prototype.terminate=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),Ha=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r["__extends"])(t,e),t.prototype.initialize=function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Ri(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,t)];case 3:return n.sent(),[4,Wa(this.Qo.syncEngine)];case 4:return n.sent(),[4,Po(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Ko=function(e){return Ti(this.persistence,new _i,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Zr(t,e.asyncQueue)},t.prototype.qo=function(e){var t=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new di(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,co(),lo(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new ro},t}(za),$a=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r["__extends"])(t,e),t.prototype.initialize=function(t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i=this;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof no?(this.sharedClientState.syncEngine={ui:La.bind(null,n),ai:qa.bind(null,n),hi:Ba.bind(null,n),fn:Va.bind(null,n),ci:Pa.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(e){return Object(r["__awaiter"])(i,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return[4,Ma(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=co();if(!no.yt(t))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new no(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(Ha),Qa=function(){function e(){}return e.prototype.initialize=function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n=this;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ba(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Da.bind(null,this.syncEngine),[4,Bo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new Yo},e.prototype.createDatastore=function(e){var t,n=ho(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uo(t));return function(e,t,n){return new mo(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ba(a.syncEngine,e,0)},o=oo.yt()?new oo:new io,new bo(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new da(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return t=y(e),f("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,wo(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){return n<e.byteLength?(i={value:e.slice(n,n+t),done:!1},[2,(n+=t,i)]):[2,{done:!0}]}))}))},cancel:function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ya=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Ja=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new nr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(e=r.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new ia(JSON.parse(i),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),Za=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(r["__generator"])(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o,a,s,u;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=dn(n.R)+"/documents",o={documents:t.map((function(e){return cn(n.R,e)}))},[4,n.$i("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){m(!!t.found),t.found.name,t.found.updateTime;var n=ln(e,t.found.name),r=an(t.found.updateTime),i=new ae({mapValue:{fields:t.found.fields}});return ue.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){m(!!t.missing),m(!!t.readTime);var n=ln(e,t.missing),r=an(t.readTime);return ue.newNoDocument(n,r)}(e,t):v()}(n.R,e);s.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=s.get(e.toString());m(!!t),u.push(t)})),u)]}}))}))}(this.datastore,e)];case 1:return[2,((t=i.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new Et(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t=this;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=G.fromPath(n);t.mutations.push(new Ot(r,t.precondition(r)))})),[4,function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=y(e),i=dn(n.R)+"/documents",o={writes:t.map((function(e){return mn(n.R,e)}))},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw v();t=O.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ct.updateTime(t):ct.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(O.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ct.updateTime(t)}return ct.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),es=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fo(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var e,t,n=this;return Object(r["__generator"])(this,(function(r){return e=new Za(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!B(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!St(t)}return!1},e}(),ts=function(){function e(e,t,n){var i=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Hi.UNAUTHENTICATED,this.clientId=_.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return Object(r["__awaiter"])(i,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return f("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r["__awaiter"])(e,void 0,void 0,(function(){var e,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=zo(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i,o=this;return Object(r["__generator"])(this,(function(a){switch(a.label){case 0:return e.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=a.sent(),[4,t.initialize(n)];case 2:return a.sent(),i=n.initialUser,e.setCredentialChangeListener((function(e){return Object(r["__awaiter"])(o,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return i.isEqual(e)?[3,2]:[4,Ii(t.localStore,e)];case 1:n.sent(),i=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function rs(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,is(e)];case 1:return n=o.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return i=o.sent(),[4,t.initialize(n,i)];case 3:return o.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var n,i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return(n=y(e)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),i=Ao(n),n.Or.add(3),[4,wo(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return r.sent(),n.Or.delete(3),[4,_o(n)];case 3:return r.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function is(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,ns(e,new za)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function os(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,rs(e,new Qa)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function as(e){return is(e).then((function(e){return e.persistence}))}function ss(e){return is(e).then((function(e){return e.localStore}))}function us(e){return os(e).then((function(e){return e.remoteStore}))}function cs(e){return os(e).then((function(e){return e.syncEngine}))}function ls(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,os(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=pa.bind(null,t.syncEngine),n.onUnlisten=va.bind(null,t.syncEngine),n)]}}))}))}function hs(e,t,n){var i=this;void 0===n&&(n={});var o=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return i=function(e,t,n,r,i){var o=new Ya({next:function(o){t.enqueueAndForget((function(){return Zo(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new ra(xe(n.path),o,{includeMetadataChanges:!0,so:!0});return Jo(e,a)},[4,ls(e)];case 1:return[2,i.apply(void 0,[r.sent(),e.asyncQueue,t,n,o])]}}))}))})),o.promise}function fs(e,t,n){var i=this;void 0===n&&(n={});var o=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return i=function(e,t,n,r,i){var o=new Ya({next:function(n){t.enqueueAndForget((function(){return Zo(e,a)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new ra(n,o,{includeMetadataChanges:!0,so:!0});return Jo(e,a)},[4,ls(e)];case 1:return[2,i.apply(void 0,[r.sent(),e.asyncQueue,t,n,o])]}}))}))})),o.promise}var ds=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},ps=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),gs=new Map,vs=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},ms=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(Hi.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),ys=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),bs=function(){function e(e){var t=this;this.currentUser=Hi.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){f("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(f("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(m("string"==typeof n.accessToken),new vs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){return Object(r["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return m(null===e||"string"==typeof e),new Hi(e)},e}(),_s=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=Hi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),ws=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new _s(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(Hi.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(e,t,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Is(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Es(e,t,n,r){if(!0===t&&!0===r)throw new c(u.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Os(e){if(!G.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function ks(e){if(G.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Ss(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v()}function As(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ss(e);throw new c(u.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function js(e,t){if(t<=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cs=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Es("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),xs=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cs({}),this._settingsFrozen=!1,e instanceof ps?(this._databaseId=e,this._credentials=new ms):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(e.options.projectId)}(e),this._credentials=new bs(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cs(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new ms;switch(e.type){case"gapi":var t=e.client;return m(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ws(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return e=this,(t=gs.get(e))&&(f("ComponentProvider","Removing Datastore"),gs.delete(e),t.terminate()),Promise.resolve();var e,t},e}(),Ds=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Rs(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Ns=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Rs=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,xe(r))||this)._path=r,i.type="collection",i}return Object(r["__extends"])(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ds(this.firestore,null,new G(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Ns);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(e,t){for(var n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(e=Object(i["getModularInstance"])(e),Ts("collection","path",t),e instanceof xs)return ks(n=C.fromString.apply(C,Object(r["__spreadArray"])([t],o))),new Rs(e,null,n);if(!(e instanceof Ds||e instanceof Rs))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ks(n=C.fromString.apply(C,Object(r["__spreadArray"])([e.path],o)).child(C.fromString(t))),new Rs(e.firestore,null,n)}function Ls(e,t){for(var n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];if(e=Object(i["getModularInstance"])(e),1===arguments.length&&(t=_.u()),Ts("doc","path",t),e instanceof xs)return Os(n=C.fromString.apply(C,Object(r["__spreadArray"])([t],o))),new Ds(e,null,new G(n));if(!(e instanceof Ds||e instanceof Rs))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Os(n=e._path.child(C.fromString.apply(C,Object(r["__spreadArray"])([t],o)))),new Ds(e.firestore,e instanceof Rs?e.converter:null,new G(n))}function Ms(e,t){return e=Object(i["getModularInstance"])(e),t=Object(i["getModularInstance"])(t),(e instanceof Ds||e instanceof Rs)&&(t instanceof Ds||t instanceof Rs)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Fs(e,t){return e=Object(i["getModularInstance"])(e),t=Object(i["getModularInstance"])(t),e instanceof Ns&&t instanceof Ns&&e.firestore===t.firestore&&Ve(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Us=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new fo(this,"async_queue_retry"),this.Ic=function(){var t=lo();t&&f("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=lo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=lo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new nr;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},e.prototype.bc=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e,t=this;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ur(e=n.sent()))throw e;return f("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,d("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=Go.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)}));return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&v()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function Vs(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var qs=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),Bs=-1,Ks=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Us,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return Object(r["__extends"])(t,e),t.prototype._terminate=function(){return this._firestoreClient||Gs(this),this._firestoreClient.terminate()},t}(xs);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(e){return e._firestoreClient||Gs(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Gs(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ds(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ts(e._credentials,e._queue,r)}function zs(e,t,n){var i=this,o=new nr;return e.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(i,void 0,void 0,(function(){var i;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,ns(e,n)];case 1:return r.sent(),[4,rs(e,t)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===u.FAILED_PRECONDITION||e.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Hs(e){if(e._initialized||e._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $s=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new D(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),Qs=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(R.fromBase64String(t))}catch(t){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(R.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),Xs=function(e){this._methodName=e},Ys=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return w(this._lat,e._lat)||w(this._long,e._long)},e}(),Js=/^__.*__$/,Zs=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new yt(e,this.data,this.fieldMask,t,this.fieldTransforms):new mt(e,this.data,t,this.fieldTransforms)},e}(),eu=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new yt(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}var nu=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.Fc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,kc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,kc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,kc:!0})},e.prototype.Lc=function(e){return Tu(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(tu(this.Nc)&&Js.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),ru=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||ho(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new nu({Nc:e,methodName:t,qc:n,path:D.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function iu(e){var t=e._freezeSettings(),n=ho(e._databaseId);return new ru(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ou(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);yu("Data must be an object, but it was:",a,r);var s,l,h=vu(r,a);if(o.merge)s=new N(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var g=bu(t,p[d],n);if(!a.contains(g))throw new c(u.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");Iu(f,g)||f.push(g)}s=new N(f),l=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,l=a.fieldTransforms;return new Zs(new ae(h),s,l)}var au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Xs);function su(e,t,n){return new nu({Nc:3,qc:t.settings.qc,methodName:e._methodName,kc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var uu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t.prototype._toFieldTransform=function(e){return new st(e.path,new Ze)},t.prototype.isEqual=function(e){return e instanceof t},t}(Xs),cu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return Object(r["__extends"])(t,e),t.prototype._toFieldTransform=function(e){var t=su(this,e,!0),n=this.Kc.map((function(e){return gu(e,t)})),r=new et(n);return new st(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Xs),lu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return Object(r["__extends"])(t,e),t.prototype._toFieldTransform=function(e){var t=su(this,e,!0),n=this.Kc.map((function(e){return gu(e,t)})),r=new nt(n);return new st(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Xs),hu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return Object(r["__extends"])(t,e),t.prototype._toFieldTransform=function(e){var t=new it(e.R,$e(e.R,this.Qc));return new st(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(Xs);function fu(e,t,n,r){var o=e.Uc(1,t,n);yu("Data must be an object, but it was:",o,r);var a=[],s=ae.empty();S(r,(function(e,r){var u=wu(t,e,n);r=Object(i["getModularInstance"])(r);var c=o.Oc(u);if(r instanceof au)a.push(u);else{var l=gu(r,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new N(a);return new eu(s,u,o.fieldTransforms)}function du(e,t,n,r,o,a){var s=e.Uc(1,t,n),l=[bu(t,r,n)],h=[o];if(a.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)l.push(bu(t,a[f])),h.push(a[f+1]);for(var d=[],p=ae.empty(),g=l.length-1;g>=0;--g)if(!Iu(d,l[g])){var v=l[g],m=h[g];m=Object(i["getModularInstance"])(m);var y=s.Oc(v);if(m instanceof au)d.push(v);else{var b=gu(m,y);null!=b&&(d.push(v),p.set(v,b))}}var _=new N(d);return new eu(p,_,s.fieldTransforms)}function pu(e,t,n,r){return void 0===r&&(r=!1),gu(n,e.Uc(r?4:3,t))}function gu(e,t){if(mu(e=Object(i["getModularInstance"])(e)))return yu("Unsupported field value:",t,e),vu(e,t);if(e instanceof Xs)return function(e,t){if(!tu(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.kc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=gu(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(i["getModularInstance"])(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $e(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=E.fromDate(e);return{timestampValue:nn(t.R,n)}}if(e instanceof E)return n=new E(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:nn(t.R,n)};if(e instanceof Ys)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qs)return{bytesValue:rn(t.R,e._byteString)};if(e instanceof Ds){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:sn(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+Ss(e))}(e,t)}function vu(e,t){var n={};return A(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):S(e,(function(e,r){var i=gu(r,t.Fc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function mu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof E||e instanceof Ys||e instanceof Qs||e instanceof Ds||e instanceof Xs)}function yu(e,t,n){if(!mu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ss(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function bu(e,t,n){if((t=Object(i["getModularInstance"])(t))instanceof $s)return t._internalPath;if("string"==typeof t)return wu(e,t);throw Tu("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var _u=new RegExp("[~\\*/\\[\\]]");function wu(e,t,n){if(t.search(_u)>=0)throw Tu("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new($s.bind.apply($s,Object(r["__spreadArray"])([void 0],t.split(".")))))._internalPath}catch(i){throw Tu("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Tu(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(s+=". ")+e+l)}function Iu(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eu=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ds(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new Ou(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(ku("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),Ou=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Eu);function ku(e,t){return"string"==typeof t?wu(e,t):t instanceof $s?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Su=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Au=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return Object(r["__extends"])(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(ku("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(Eu),ju=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Au),Cu=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Su(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ju(n._firestore,n._userDataWriter,r.key,r,new Su(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new ju(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Su(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ju(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Su(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:xu(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function xu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function Du(e,t){return e instanceof Au&&t instanceof Au?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Cu&&t instanceof Cu&&e._firestore===t._firestore&&Fs(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(e){if(Ne(e)&&0===e.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ru=function(){};function Pu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Lu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return Object(r["__extends"])(t,e),t.prototype._apply=function(e){var t=iu(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ku(a,o);for(var l=[],h=0,f=a;h<f.length;h++){var d=f[h];l.push(Bu(r,e,d))}s={arrayValue:{values:l}}}else s=Bu(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ku(a,o),s=pu(n,"where",a,"in"===o||"not-in"===o);var p=pe.create(i,o,s);return function(e,t){if(t.g()){var n=Pe(e);if(null!==n&&!n.isEqual(t.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Re(e);null!==r&&Wu(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,p),p}(e._query,0,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Ns(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new je(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Ru),Mu=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return Object(r["__extends"])(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Oe(t,n);return function(e,t){if(null===Re(e)){var n=Pe(e);null!==n&&Wu(e,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new Ns(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new je(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Ru),Fu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return Object(r["__extends"])(t,e),t.prototype._apply=function(e){return new Ns(e.firestore,e.converter,Ue(e._query,this.Hc,this.Jc))},t}(Ru),Uu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return Object(r["__extends"])(t,e),t.prototype._apply=function(e){var t=qu(e,this.type,this.Yc,this.Xc);return new Ns(e.firestore,e.converter,function(e,t){return new je(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Ru),Vu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return Object(r["__extends"])(t,e),t.prototype._apply=function(e){var t=qu(e,this.type,this.Yc,this.Xc);return new Ns(e.firestore,e.converter,function(e,t){return new je(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Ru);function qu(e,t,n,r){if(n[0]=Object(i["getModularInstance"])(n[0]),n[0]instanceof Eu)return function(e,t,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Me(e);a<s.length;a++){var l=s[a];if(l.field.isKeyField())o.push(Z(t,r.key));else{var h=r.data.field(l.field);if(U(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new Ie(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var o=iu(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(a[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Le(e)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=e.path.child(C.fromString(h));if(!G.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new G(f);s.push(Z(t,d))}else{var p=pu(n,r,h);s.push(p)}}return new Ie(s,o)}(e._query,e.firestore._databaseId,o,t,n,r)}function Bu(e,t,n){if("string"==typeof(n=Object(i["getModularInstance"])(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Le(t)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(C.fromString(n));if(!G.isDocumentKey(r))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Z(e,new G(r))}if(n instanceof Ds)return Z(e,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ss(n)+".")}function Ku(e,t){if(!Array.isArray(e)||0===e.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Wu(e,t,n){if(!n.isEqual(t))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gu=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),z(e)){case 0:return null;case 1:return e.booleanValue;case 2:return M(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(F(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw v()}},e.prototype.convertObject=function(e,t){var n=this,r={};return S(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new Ys(M(e.latitude),M(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=V(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(q(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=L(e);return new E(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=C.fromString(e);m(Dn(n));var r=new ps(n.get(1),n.get(3)),i=new G(n.popFirst(5));return r.isEqual(t)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Hu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(r["__extends"])(t,e),t.prototype.convertBytes=function(e){return new Qs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ds(this.firestore,null,t)},t}(Gu),$u=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=iu(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=Qu(e,this._firestore),i=zu(r.converter,t,n),o=ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ct.none())),this},e.prototype.update=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var a,s=Qu(e,this._firestore);return a="string"==typeof(t=Object(i["getModularInstance"])(t))||t instanceof $s?du(this._dataReader,"WriteBatch.update",s._key,t,n,r):fu(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,ct.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=Qu(e,this._firestore);return this._mutations=this._mutations.concat(new Et(t._key,ct.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(e,t){if((e=Object(i["getModularInstance"])(e)).firestore!==t)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(r["__extends"])(t,e),t.prototype.convertBytes=function(e){return new Qs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ds(this.firestore,null,t)},t}(Gu);function Yu(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];e=As(e,Ds);var a=As(e.firestore,Ks),s=iu(a);return Zu(a,[("string"==typeof(t=Object(i["getModularInstance"])(t))||t instanceof $s?du(s,"updateDoc",e._key,t,n,r):fu(s,"updateDoc",e._key,t)).toMutation(e._key,ct.exists(!0))])}function Ju(e){for(var t,n,o,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];e=Object(i["getModularInstance"])(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof a[c]||Vs(a[c])||(u=a[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Vs(a[c])){var p=a[c];a[c]=null===(t=p.next)||void 0===t?void 0:t.bind(p),a[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),a[c+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof Ds)h=As(e.firestore,Ks),f=xe(e._key.path),l={next:function(t){a[c]&&a[c](ec(h,e,t))},error:a[c+1],complete:a[c+2]};else{var g=As(e,Ns);h=As(g.firestore,Ks),f=g._query;var v=new Xu(h);l={next:function(e){a[c]&&a[c](new Cu(h,v,g,e))},error:a[c+1],complete:a[c+2]},Nu(e._query)}return function(e,t,n,i){var o=this,a=new Ya(i),s=new ra(t,a,n);return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(o,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return t=Jo,[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(o,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return t=Zo,[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ws(h),f,d,l)}function Zu(e,t){return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=ma,[4,cs(e)];case 1:return[2,n.apply(void 0,[r.sent(),t,i])]}}))}))})),i.promise}(Ws(e),t)}function ec(e,t,n){var r=n.docs.get(t._key),i=new Xu(e);return new Au(e,i,t._key,r,new Su(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return Object(r["__extends"])(t,e),t.prototype.get=function(t){var n=this,r=Qu(t,this._firestore),i=new Xu(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Au(n._firestore,i,r._key,e._document,new Su(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=iu(e)}return e.prototype.get=function(e){var t=this,n=Qu(e,this._firestore),r=new Hu(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v();var i=e[0];if(i.isFoundDocument())return new Eu(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Eu(t._firestore,r,n._key,null,n.converter);throw v()}))},e.prototype.set=function(e,t,n){var r=Qu(e,this._firestore),i=zu(r.converter,t,n),o=ou(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a,s=Qu(e,this._firestore);return a="string"==typeof(t=Object(i["getModularInstance"])(t))||t instanceof $s?du(this._dataReader,"Transaction.update",s._key,t,n,r):fu(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this},e.prototype.delete=function(e){var t=Qu(e,this._firestore);return this._transaction.delete(t._key),this},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rc(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ic=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return rc(),new e(Qs.fromBase64String(t))},e.fromUint8Array=function(t){return nc(),new e(Qs.fromUint8Array(t))},e.prototype.toBase64=function(){return rc(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return nc(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),oc=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){Hs(e=As(e,Ks));var n=Ws(e),r=e._freezeSettings(),i=new Qa;return zs(n,i,new Ha(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){Hs(e=As(e,Ks));var t=Ws(e),n=e._freezeSettings(),r=new Qa;return zs(t,r,new $a(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nr;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return or.yt()?(t=e+"main",[4,or.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(vi(e._databaseId,e._persistenceKey))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return t=i.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),ac=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof ps||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={});var o=(e=As(e,xs))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),r.mockUserToken){var a=Object(i["createMockUserToken"])(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new c(u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");e._credentials=new ys(new vs(a,new Hi(s)))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var t,n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,as(e)];case 1:return t=r.sent(),[4,us(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=y(e);return t.Or.delete(0),_o(t)}(n))]}}))}))}))}(Ws(As(this._delegate,Ks)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var t,n;return Object(r["__generator"])(this,(function(i){switch(i.label){case 0:return[4,as(e)];case 1:return t=i.sent(),[4,us(e)];case 2:return n=i.sent(),[2,(t.setNetworkEnabled(!1),function(e){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return(t=y(e)).Or.add(0),[4,wo(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ws(As(this._delegate,Ks)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&Es("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(t,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return t=Ia,[4,cs(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ws(As(this._delegate,Ks)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,i=new Ya(t);return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.add(t),t.next()},[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.delete(t)},[4,ls(e)];case 1:return[2,t.apply(void 0,[n.sent(),i])]}}))}))}))}}(Ws(e=As(e,Ks)),Vs(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new wc(this,Ps(this._delegate,e))}catch(e){throw dc(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new fc(this,Ls(this._delegate,e))}catch(e){throw dc(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new yc(this,function(e,t){if(e=As(e,xs),Ts("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ns(e,null,function(e){return new je(C.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw dc(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return[4,function(e){return os(e).then((function(e){return e.datastore}))}(e)];case 1:return n=r.sent(),new es(e.asyncQueue,n,t,i).run(),[2]}}))}))})),i.promise}(Ws(e),(function(n){return t(new tc(e,n))}))}(this._delegate,(function(n){return e(new cc(t,n))}))},e.prototype.batch=function(){var e=this;return Ws(this._delegate),new lc(new $u(this._delegate,(function(t){return Zu(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),sc=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(r["__extends"])(t,e),t.prototype.convertBytes=function(e){return new ic(new Qs(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return fc.eu(t,this.firestore,null)},t}(Gu);function uc(e){var t;t=e,l.setLogLevel(t)}var cc=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sc(e)}return e.prototype.get=function(e){var t=this,n=Tc(e);return this._delegate.get(n).then((function(e){return new vc(t._firestore,new Au(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=Tc(e);return n?(Is("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Tc(e);return 2===arguments.length?this._delegate.update(s,t):(i=this._delegate).update.apply(i,Object(r["__spreadArray"])([s,t,n],o)),this},e.prototype.delete=function(e){var t=Tc(e);return this._delegate.delete(t),this},e}(),lc=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=Tc(e);return n?(Is("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];var s=Tc(e);return 2===arguments.length?this._delegate.update(s,t):(i=this._delegate).update.apply(i,Object(r["__spreadArray"])([s,t,n],o)),this},e.prototype.delete=function(e){var t=Tc(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),hc=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new ju(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mc(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new sc(t),n),i.set(n,o)),o},e}();hc.su=new WeakMap;var fc=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sc(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Ds(n._delegate,r,new G(t)))},e.eu=function(t,n,r){return new e(n,new Ds(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new wc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new wc(this.firestore,Ps(this._delegate,e))}catch(e){throw dc(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=Object(i["getModularInstance"])(e))instanceof Ds&&Ms(this._delegate,e)},e.prototype.set=function(e,t){t=Is("DocumentReference.set",t);try{return function(e,t,n){e=As(e,Ds);var r=As(e.firestore,Ks),i=zu(e.converter,t,n);return Zu(r,[ou(iu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ct.none())])}(this._delegate,e,t)}catch(e){throw dc(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?Yu(this._delegate,e):Yu.apply(void 0,Object(r["__spreadArray"])([this._delegate,e,t],n))}catch(e){throw dc(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Zu(As((e=this._delegate).firestore,Ks),[new Et(e._key,ct.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=pc(t),i=gc(t,(function(t){return new vc(e.firestore,new Au(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ju(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=As(e,Ds);var t=As(e.firestore,Ks),n=Ws(t),i=new Xu(t);return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return n=function(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(o=r.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=zo(i,"Failed to get document '"+t+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,ss(e)];case 1:return[2,n.apply(void 0,[o.sent(),t,i])]}}))}))})),i.promise}(n,e._key).then((function(n){return new Au(t,i,e._key,n,new Su(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=As(e,Ds);var t=As(e.firestore,Ks);return hs(Ws(t),e._key,{source:"server"}).then((function(n){return ec(t,e,n)}))}(this._delegate):function(e){e=As(e,Ds);var t=As(e.firestore,Ks);return hs(Ws(t),e._key).then((function(n){return ec(t,e,n)}))}(this._delegate)).then((function(e){return new vc(t.firestore,new Au(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(hc.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function dc(e,t,n){return e.message=e.message.replace(t,n),e}function pc(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!Vs(r))return r}return{}}function gc(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Vs(e[0])?e[0]:Vs(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new fc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return Du(this._delegate,e._delegate)},e}(),mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r["__extends"])(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(vc),yc=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sc(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Pu(this._delegate,function(e,t,n){var r=t,i=ku("where",e);return new Lu(i,r,n)}(t,n,r)))}catch(t){throw dc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Pu(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=ku("orderBy",e);return new Mu(r,n)}(t,n)))}catch(t){throw dc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Pu(this._delegate,function(e){return js("limit",e),new Fu("limit",e,"F")}(t)))}catch(t){throw dc(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Pu(this._delegate,function(e){return js("limitToLast",e),new Fu("limitToLast",e,"L")}(t)))}catch(t){throw dc(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Uu("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw dc(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Uu("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw dc(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Vu("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw dc(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Pu(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Vu("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw dc(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return Fs(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=As(e,Ns);var t=As(e.firestore,Ks),n=Ws(t),i=new Xu(t);return function(e,t){var n=this,i=new nr;return e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(o){switch(o.label){case 0:return n=function(e,t,n){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,xi(e,t,!0)];case 1:return u=r.sent(),i=new la(t,u.Bn),o=i._o(u.documents),a=i.applyChanges(o,!1),n.resolve(a.snapshot),[3,3];case 2:return s=r.sent(),u=zo(s,"Failed to execute query '"+t+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,ss(e)];case 1:return[2,n.apply(void 0,[o.sent(),t,i])]}}))}))})),i.promise}(n,e._query).then((function(n){return new Cu(t,i,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=As(e,Ns);var t=As(e.firestore,Ks),n=Ws(t),r=new Xu(t);return fs(n,e._query,{source:"server"}).then((function(n){return new Cu(t,r,e,n)}))}(this._delegate):function(e){e=As(e,Ns);var t=As(e.firestore,Ks),n=Ws(t),r=new Xu(t);return Nu(e._query),fs(n,e._query).then((function(n){return new Cu(t,r,e,n)}))}(this._delegate)).then((function(e){return new _c(t.firestore,new Cu(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=pc(t),i=gc(t,(function(t){return new _c(e.firestore,new Cu(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ju(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(hc.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),bc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new mc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),_c=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new yc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new mc(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new bc(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new mc(n._firestore,r))}))},e.prototype.isEqual=function(e){return Du(this._delegate,e._delegate)},e}(),wc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return Object(r["__extends"])(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new fc(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new fc(this.firestore,void 0===e?Ls(this._delegate):Ls(this._delegate,e))}catch(e){throw dc(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=As(e.firestore,Ks),r=Ls(e),i=zu(e.converter,t);return Zu(n,[ou(iu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ct.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new fc(t.firestore,e)}))},t.prototype.isEqual=function(e){return Ms(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(yc);function Tc(e){return As(e,Ds)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ic=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new($s.bind.apply($s,Object(r["__spreadArray"])([void 0],e)))}return e.documentId=function(){return new e(D.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=Object(i["getModularInstance"])(e))instanceof $s&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),Ec=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new uu("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new au("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new cu("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lu("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new hu("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(e){return function(e,t){var n=Ws(e=As(e,Ks)),i=new qs;return function(e,t,n,i){var o=this,a=function(e,t){return function(e,t){return new Ja(e,t)}(function(e,t){if(e instanceof Uint8Array)return Xa(e,t);if(e instanceof ArrayBuffer)return Xa(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ho(t));e.asyncQueue.enqueueAndForget((function(){return Object(r["__awaiter"])(o,void 0,void 0,(function(){var t;return Object(r["__generator"])(this,(function(n){switch(n.label){case 0:return t=Ga,[4,cs(e)];case 1:return t.apply(void 0,[n.sent(),a,i]),[2]}}))}))}))}(n,e._databaseId,t,i),i}(this._delegate,e)}function kc(e){var t,n,i=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return Object(r["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(r["__generator"])(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=y(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,ss(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(Ws(t=As(t,Ks)),n).then((function(e){return e?new Ns(t,null,e.query):null}))).then((function(e){return e?new yc(i,e):null}))}}).call(this,n("4362"))},"5fcf":function(e,t,n){"use strict";var r=n("cc84"),i=n("ffa6"),o=n("9ab4"),a=n("a8e9"),s=n("abfd");function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c,l=u(r),h=(c={},c["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenObservers:[]},g={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){return d.get(e)||p}function m(e,t){d.set(e,t)}function y(){return g}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b="https://content-firebaseappcheck.googleapis.com/v1beta",_="exchangeRecaptchaToken",w="exchangeDebugToken",T={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},I=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,E(this.getNextRun(e))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function E(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(){return self.grecaptcha}function k(e){if(!v(e).activated)throw f.create("use-before-activation",{appName:e.name})}function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}))}function A(e){return a.base64.encodeString(JSON.stringify(e),!1)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e,t){var n=e.url,r=e.body;return o.__awaiter(this,void 0,void 0,(function(){var e,i,a,s,u,c,l,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:e={"Content-Type":"application/json"},i=t.getImmediate({optional:!0}),i&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(h=c.ttl.match(/^([\d.]+)(s)$/),!h||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function C(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":"+_+"?key="+o,body:{recaptcha_token:t}}}function x(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:b+"/projects/"+r+"/apps/"+i+":"+w+"?key="+o,body:{debug_token:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D="firebase-app-check-database",N=1,R="firebase-app-check-store",P="debug-token",L=null;function M(){return L||(L=new Promise((function(e,t){try{var n=indexedDB.open(D,N);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(f.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(R,{keyPath:"compositeKey"})}}}catch(r){t(f.create("storage-open",{originalErrorMessage:r.message}))}})),L)}function F(e){return K(W(e))}function U(e,t){return B(W(e),t)}function V(e){return B(P,e)}function q(){return K(P)}function B(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,M()];case 1:return n=o.sent(),r=n.transaction(R,"readwrite"),i=r.objectStore(R),a=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){a.onsuccess=function(t){e()},r.onerror=function(e){var n;t(f.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function K(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,M()];case 1:return t=o.sent(),n=t.transaction(R,"readonly"),r=n.objectStore(R),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(f.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function W(e){return e.options.appId+"-"+e.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=new s.Logger("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,F(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),G.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}function H(e,t){return a.isIndexedDBAvailable()?U(e,t).catch((function(e){G.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function $(){return o.__awaiter(this,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t=S(),V(t).catch((function(e){return G.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(){var e=y();return e.enabled}function X(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){if(e=y(),e.enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}function Y(){var e=a.getGlobal();if("string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=y();t.enabled=!0;var n=new a.Deferred;t.token=n,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve($())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J={error:"UNKNOWN_ERROR"};function Z(e,t,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c,l,h,f,d;return o.__generator(this,(function(p){switch(p.label){case 0:return k(e),r=v(e),i=r.token,a=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:s=p.sent(),s&&ie(s)&&(i=s,m(e,o.__assign(o.__assign({},r),{token:i})),re(e,{token:i.token})),p.label=2;case 2:return!n&&i&&ie(i)?[2,{token:i.token}]:Q()?(c=j,l=x,h=[e],[4,X()]):[3,6];case 3:return[4,c.apply(void 0,[l.apply(void 0,h.concat([p.sent()])),t])];case 4:return u=p.sent(),[4,H(e,u)];case 5:return p.sent(),m(e,o.__assign(o.__assign({},r),{token:u})),[2,{token:u.token}];case 6:return p.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=p.sent(),[3,9];case 8:return f=p.sent(),G.error(f),a=f,[3,9];case 9:return i?[3,10]:(d=oe(a),[3,12]);case 10:return d={token:i.token},m(e,o.__assign(o.__assign({},r),{token:i})),[4,H(e,i)];case 11:p.sent(),p.label=12;case 12:return re(e,d),[2,d]}}))}))}function ee(e,t,n,r,i){var a=v(e),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var c=ne(e,t);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&ie(a.token)){var l=a.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(e){e&&ie(e)&&r({token:e.token})})).catch((function(){}));m(e,u)}function te(e,t){var n=v(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(e,o.__assign(o.__assign({},n),{tokenObservers:r}))}function ne(e,t){var n=this;return new I((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return n=v(e),n.token?[3,2]:[4,Z(e,t)];case 1:return r=i.sent(),[3,4];case 2:return[4,Z(e,t,!0)];case 3:r=i.sent(),i.label=4;case 4:if(r.error)throw r.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=v(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),T.RETRIAL_MIN_WAIT,T.RETRIAL_MAX_WAIT)}function re(e,t){for(var n=v(e).tokenObservers,r=0,i=n;r<i.length;r++){var o=i[r];try{"EXTERNAL"===o.type&&null!=t.error?o.error(t.error):o.next(t)}catch(a){}}}function ie(e){return e.expireTimeMillis-Date.now()>0}function oe(e){return{token:A(J),error:e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae="https://www.google.com/recaptcha/api.js";function se(e,t){var n=v(e),r=new a.Deferred;m(e,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=O();return u?u.ready((function(){ce(e,t,u,i),r.resolve(u)})):le((function(){var n=O();if(!n)throw new Error("no recaptcha");n.ready((function(){ce(e,t,n,i),r.resolve(n)}))})),r.promise}function ue(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return k(e),t=v(e).reCAPTCHAState,[4,t.initialized.promise];case 1:return n=r.sent(),[2,new Promise((function(t,r){var i=v(e).reCAPTCHAState;n.ready((function(){t(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function ce(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),a=v(e);m(e,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}function le(e){var t=document.createElement("script");t.src=""+ae,t.onload=e,document.head.appendChild(t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he=function(){function e(e){this._siteKey=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ue(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),f.create("recaptcha-error");case 4:return[2,j(C(this._app,e),this._platformLoggerProvider)]}}))}))},e.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,se(e,this._siteKey).catch((function(){}))},e}(),fe=function(){function e(e){this._customProviderOptions=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=r.sent(),t=a.issuedAtTime(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now(),[2,o.__assign(o.__assign({},e),{issuedAtTimeMillis:n})]}}))}))},e.prototype.initialize=function(e){this._app=e},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function de(e,t,n,r){var i=v(e);if(i.activated)throw f.create("already-activated",{appName:e.name});var a=o.__assign(o.__assign({},i),{activated:!0});a.cachedTokenPromise=z(e).then((function(t){return t&&ie(t)&&m(e,o.__assign(o.__assign({},v(e)),{token:t})),t})),a.provider="string"===typeof t?new he(t):t instanceof he||t instanceof fe?t:new fe({getToken:t.getToken}),a.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,m(e,a),a.provider.initialize(e,n)}function pe(e,t){var n=v(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),m(e,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:t}))}function ge(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,Z(e,t,n)];case 1:if(r=i.sent(),r.error)throw r.error;return[2,{token:r.token}]}}))}))}function ve(e,t,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),ee(e,t,"EXTERNAL",o,a),function(){return te(e,o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e,t){return{app:e,activate:function(n,r){return de(e,n,t,r)},setTokenAutoRefreshEnabled:function(t){return pe(e,t)},getToken:function(n){return ge(e,t,n)},onTokenChanged:function(n,r,i){return ve(e,t,n,r)},INTERNAL:{delete:function(){for(var t=v(e).tokenObservers,n=0,r=t;n<r.length;n++){var i=r[n];te(e,i.next)}return Promise.resolve()}}}}function ye(e,t){return{getToken:function(n){return Z(e,t,n)},addTokenListener:function(n){return ee(e,t,"INTERNAL",n)},removeTokenListener:function(t){return te(e,t)}}}var be="@firebase/app-check",_e="0.3.0",we="appCheck",Te="app-check-internal";function Ie(e){e.INTERNAL.registerComponent(new i.Component(we,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return me(t,n)}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:he,CustomProvider:fe}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){var r=e.getProvider(Te);r.initialize()}))),e.INTERNAL.registerComponent(new i.Component(Te,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return ye(t,n)}),"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion(be,_e)}Ie(l["default"]),Y()},"6b43":function(e,t,n){},"6b75":function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},"9dbb":function(e,t,n){(function(e,n){n(t)})(0,(function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){i=e[t].apply(e,r),n(i).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function g(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function v(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=g,e.deleteDb=v,Object.defineProperty(e,"__esModule",{value:!0})}))},a434:function(e,t,n){"use strict";var r=n("23e7"),i=n("23cb"),o=n("a691"),a=n("50c4"),s=n("7b0b"),u=n("65f0"),c=n("8418"),l=n("1dde"),h=n("ae40"),f=l("splice"),d=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!d},{splice:function(e,t){var n,r,l,h,f,d,y=s(this),b=a(y.length),_=i(e,b),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=b-_):(n=w-2,r=g(p(o(t),0),b-_)),b+n-r>v)throw TypeError(m);for(l=u(y,r),h=0;h<r;h++)f=_+h,f in y&&c(l,h,y[f]);if(l.length=r,n<r){for(h=_;h<b-r;h++)f=h+r,d=h+n,f in y?y[d]=y[f]:delete y[d];for(h=b;h>b-r+n;h--)delete y[h-1]}else if(n>r)for(h=b-r;h>_;h--)f=h+r-1,d=h+n-1,f in y?y[d]=y[f]:delete y[d];for(h=0;h<n;h++)y[h+_]=arguments[h+2];return y.length=b-r+n,l}})},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),o=n("1c7e"),a=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:a},{from:i})},aa50:function(e,t,n){},b0b0:function(e,t,n){"use strict";n("3e8e")},b0c0:function(e,t,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&i(o,u,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},c0c6:function(e,t,n){"use strict";n("aa50")},c7b2:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Cr})),n.d(t,"b",(function(){return Dr})),n.d(t,"c",(function(){return xr})),n.d(t,"d",(function(){return Rr})),n.d(t,"e",(function(){return Nr})),n.d(t,"f",(function(){return Pr})),n.d(t,"g",(function(){return Lr})),n.d(t,"h",(function(){return Ar})),n.d(t,"i",(function(){return jr}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var a,s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},u=u||{},c=s||self;function l(){}function h(e){var t=typeof e;return t="object"!=t?t:e?Array.isArray(e)?"array":t:"null","array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function d(e){return Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++g)}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function m(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:m,y.apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function w(){this.s=this.s,this.o=this.o}var T=0,I={};w.prototype.s=!1,w.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0!=T)){var e=d(this);delete I[e]}},w.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},O=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function k(e){e:{for(var t=Wn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function S(e){return Array.prototype.concat.apply([],arguments)}function A(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function j(e){return/^[\s\xa0]*$/.test(e)}var C,x=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function D(e,t){return-1!=e.indexOf(t)}function N(e,t){return e<t?-1:e>t?1:0}e:{var R=c.navigator;if(R){var P=R.userAgent;if(P){C=P;break e}}C=""}function L(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function M(e){var t={};for(var n in e)t[n]=e[n];return t}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}function q(e){var t=ee;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}V[" "]=l;var B,K=D(C,"Opera"),W=D(C,"Trident")||D(C,"MSIE"),G=D(C,"Edge"),z=G||W,H=D(C,"Gecko")&&!(D(C.toLowerCase(),"webkit")&&!D(C,"Edge"))&&!(D(C,"Trident")||D(C,"MSIE"))&&!D(C,"Edge"),$=D(C.toLowerCase(),"webkit")&&!D(C,"Edge");function Q(){var e=c.document;return e?e.documentMode:void 0}e:{var X="",Y=function(){var e=C;return H?/rv:([^\);]+)(\)|;)/.exec(e):G?/Edge\/([\d\.]+)/.exec(e):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):$?/WebKit\/(\S+)/.exec(e):K?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Y&&(X=Y?Y[1]:""),W){var J=Q();if(null!=J&&J>parseFloat(X)){B=String(J);break e}}B=X}var Z,ee={};function te(){return q((function(){for(var e=0,t=x(String(B)).split("."),n=x("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=N(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||N(0==o[2].length,0==a[2].length)||N(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(c.document&&W){var ne=Q();Z=ne||(parseInt(B,10)||void 0)}else Z=void 0;var re=Z,ie=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{c.addEventListener("test",l,t),c.removeEventListener("test",l,t)}catch(n){}return e}();function oe(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(H){e:{try{V(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:se[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ae.Z.h.call(this)}}oe.prototype.h=function(){this.defaultPrevented=!0},_(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ce,this.ca=this.fa=!1}function he(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function fe(e){this.src=e,this.g={},this.h=0}function de(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}fe.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):(t=new le(t,this.src,o,!!r,i),t.fa=n,e.push(t)),t};var ge="closure_lm_"+(1e6*Math.random()|0),ve={};function me(e,t,n,r,i){if(r&&r.once)return _e(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);return null}return n=Se(n),e&&e[ue]?e.N(t,n,f(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i,s=Oe(e);if(s||(e[ge]=s=new fe(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=be(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(){function e(n){return t.call(e.src,e.listener,n)}var t=Ee;return e}function _e(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)_e(e,t[o],n,r,i);return null}return n=Se(n),e&&e[ue]?e.O(t,n,f(r)?!!r.capture:!!r,i):ye(e,t,n,!0,r,i)}function we(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)we(e,t[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=Se(n),e&&e[ue]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=pe(o,n,r,i),-1<n&&(he(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Oe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pe(t,n,r,i)),(n=-1<e?t[e]:null)&&Te(n))}function Te(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ue])de(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Oe(t))?(de(n,e),0==n.h&&(n.src=null,t[ge]=null)):he(e)}}}function Ie(e){return e in ve?ve[e]:ve[e]="on"+e}function Ee(e,t){if(e.ca)e=!0;else{t=new ae(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Te(e),e=n.call(r,t)}return e}function Oe(e){return e=e[ge],e instanceof fe?e:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(e){return"function"===typeof e?e:(e[ke]||(e[ke]=function(t){return e.handleEvent(t)}),e[ke])}function Ae(){w.call(this),this.i=new fe(this),this.P=this,this.I=null}function je(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new oe(t,e);else if(t instanceof oe)t.target=t.target||e;else{var i=t;t=new oe(r,e),U(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Ce(a,r,!0,t)&&i}if(a=t.g=e,i=Ce(a,r,!0,t)&&i,i=Ce(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Ce(a,r,!1,t)&&i}function Ce(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&de(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}_(Ae,w),Ae.prototype[ue]=!0,Ae.prototype.removeEventListener=function(e,t,n,r){we(this,e,t,n,r)},Ae.prototype.M=function(){if(Ae.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)he(n[r]);delete t.g[e],t.h--}}this.I=null},Ae.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ae.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var xe=c.JSON.stringify;function De(){var e=qe,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ne,Re=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Pe.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Pe=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Le}),(function(e){return e.reset()})),Le=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Me(e){c.setTimeout((function(){throw e}),0)}function Fe(e,t){Ne||Ue(),Ve||(Ne(),Ve=!0),qe.add(e,t)}function Ue(){var e=c.Promise.resolve(void 0);Ne=function(){e.then(Be)}}var Ve=!1,qe=new Re;function Be(){for(var e;e=De();){try{e.h.call(e.g)}catch(n){Me(n)}var t=Pe;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ve=!1}function Ke(e,t){Ae.call(this),this.h=e||1,this.g=t||c,this.j=y(this.kb,this),this.l=Date.now()}function We(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ge(e,t,n){if("function"===typeof e)n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:c.setTimeout(e,t||0)}function ze(e){e.g=Ge((function(){e.g=null,e.i&&(e.i=!1,ze(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}_(Ke,Ae),a=Ke.prototype,a.da=!1,a.S=null,a.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),je(this,"tick"),this.da&&(We(this),this.start()))}},a.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},a.M=function(){Ke.Z.M.call(this),We(this),delete this.g};var He=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return i(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:ze(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(w);function $e(e){w.call(this),this.h=e,this.g={}}_($e,w);var Qe=[];function Xe(e,t,n,r){Array.isArray(n)||(n&&(Qe[0]=n.toString()),n=Qe);for(var i=0;i<n.length;i++){var o=me(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Ye(e){L(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Te(e)}),e),e.g={}}function Je(){this.g=!0}function Ze(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}function et(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}function tt(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+rt(e,n)+(r?" "+r:"")}))}function nt(e,t){e.info((function(){return"TIMEOUT: "+t}))}function rt(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return xe(n)}catch(s){return t}}$e.prototype.M=function(){$e.Z.M.call(this),Ye(this)},$e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Je.prototype.Aa=function(){this.g=!1},Je.prototype.info=function(){};var it={},ot=null;function at(){return ot=ot||new Ae}function st(e){oe.call(this,it.Ma,e)}function ut(e){var t=at();je(t,new st(t,e))}function ct(e,t){oe.call(this,it.STAT_EVENT,e),this.stat=t}function lt(e){var t=at();je(t,new ct(t,e))}function ht(e,t){oe.call(this,it.Na,e),this.size=t}function ft(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){e()}),t)}it.Ma="serverreachability",_(st,oe),it.STAT_EVENT="statevent",_(ct,oe),it.Na="timingevent",_(ht,oe);var dt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gt(){}function vt(e){return e.h||(e.h=e.i())}function mt(){}gt.prototype.h=null;var yt,bt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _t(){oe.call(this,"d")}function wt(){oe.call(this,"c")}function Tt(){}function It(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new $e(this),this.P=Ot,e=z?125:void 0,this.W=new Ke(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}_(_t,oe),_(wt,oe),_(Tt,gt),Tt.prototype.g=function(){return new XMLHttpRequest},Tt.prototype.i=function(){return{}},yt=new Tt;var Ot=45e3,kt={},St={};function At(e,t,n){e.K=1,e.v=Zt(Ht(t)),e.s=n,e.U=!0,jt(e,null)}function jt(e,t){e.F=Date.now(),Nt(e),e.A=Ht(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),gn(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Et,e.g=wr(e.l,n?t:null,!e.s),0<e.O&&(e.L=new He(y(e.Ia,e,e.g),e.O)),Xe(e.V,e.g,"readystatechange",e.gb),t=e.H?M(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ut(1),Ze(e.j,e.u,e.A,e.m,e.X,e.s)}function Ct(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function xt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if(r=Dt(e,n),r==St){4==t&&(e.o=4,lt(14),i=!1),tt(e.j,e.m,null,"[Incomplete Response]");break}if(r==kt){e.o=4,lt(15),tt(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}tt(e.j,e.m,r,null),Ft(e,r)}Ct(e)&&r!=St&&r!=kt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,lt(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),dr(t),t.L=!0,lt(11))):(tt(e.j,e.m,n,"[Invalid Chunked Response]"),Mt(e),Lt(e))}function Dt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?St:(n=Number(t.substring(n,r)),isNaN(n)?kt:(r+=1,r+n>t.length?St:(t=t.substr(r,n),e.C=r+n,t)))}function Nt(e){e.Y=Date.now()+e.P,Rt(e,e.P)}function Rt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ft(y(e.eb,e),t)}function Pt(e){e.B&&(c.clearTimeout(e.B),e.B=null)}function Lt(e){0==e.l.G||e.I||vr(e.l,e)}function Mt(e){Pt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,We(e.W),Ye(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ft(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||In(n.i,e)))if(n.I=e.N,!e.J&&In(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;gr(n),rr(n)}fr(n),lt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ft(y(n.ab,n),6e3));if(1>=Tn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else yr(n,11)}else if((e.J||n.g==e)&&gr(n),!j(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(D(l,"spdy")||D(l,"quic")||D(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(En(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Jt(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var d=e;if(r.oa=_r(r,r.H?r.la:null,r.W),d.J){On(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(Pt(p),Nt(p)),r.g=d}else hr(r);0<n.l.length&&ar(n)}else"stop"!=o[0]&&"close"!=o[0]||yr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?yr(n,7):nr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ut(4)}catch(o){}}function Ut(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Vt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)O(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(h(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=Ut(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function qt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof qt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Bt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Kt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],Kt(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}a=It.prototype,a.setTimeout=function(e){this.P=e},a.gb=function(e){e=e.target;var t=this.L;t&&3==Xn(e)?t.l():this.Ia(e)},a.Ia=function(e){try{if(e==this.g)e:{var t=Xn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||z||this.g&&(this.h.h||this.g.ga()||Yn(this.g)))){this.I||4!=t||7==n||ut(8==n||0>=r?3:2),Pt(this);var i=this.g.ba();this.N=i;t:if(Ct(this)){var o=Yn(this.g);e="";var a=o.length,s=4==Xn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Mt(this),Lt(this);var u="";break t}this.h.i=new c.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,et(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,h=this.g;if((l=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(l)){var f=l;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,lt(12),Mt(this),Lt(this);break e}tt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ft(this,i)}this.U?(xt(this,t,u),z&&this.i&&3==t&&(Xe(this.V,this.W,"tick",this.fb),this.W.start())):(tt(this.j,this.m,u,null),Ft(this,u)),4==t&&Mt(this),this.i&&!this.I&&(4==t?vr(this.l,this):(this.i=!1,Nt(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,lt(12)):(this.o=0,lt(13)),Mt(this),Lt(this)}}}catch(t){}},a.fb=function(){if(this.g){var e=Xn(this.g),t=this.g.ga();this.C<t.length&&(Pt(this),xt(this,e,t),this.i&&4!=e&&Nt(this))}},a.cancel=function(){this.I=!0,Mt(this)},a.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(nt(this.j,this.A),2!=this.K&&(ut(3),lt(17)),Mt(this),this.o=2,Lt(this)):Rt(this,this.Y-e)},a=qt.prototype,a.R=function(){Bt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},a.T=function(){return Bt(this),this.g.concat()},a.get=function(e,t){return Kt(this.h,e)?this.h[e]:t},a.set=function(e,t){Kt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},a.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Wt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function zt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof zt){this.g=void 0!==t?t:e.g,$t(this,e.j),this.s=e.s,Qt(this,e.i),Xt(this,e.m),this.l=e.l,t=e.h;var n=new hn;n.i=t.i,t.g&&(n.g=new qt(t.g),n.h=t.h),Yt(this,n),this.o=e.o}else e&&(n=String(e).match(Wt))?(this.g=!!t,$t(this,n[1]||"",!0),this.s=nn(n[2]||""),Qt(this,n[3]||"",!0),Xt(this,n[4]),this.l=nn(n[5]||"",!0),Yt(this,n[6]||"",!0),this.o=nn(n[7]||"")):(this.g=!!t,this.h=new hn(null,this.g))}function Ht(e){return new zt(e)}function $t(e,t,n){e.j=n?nn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qt(e,t,n){e.i=n?nn(t,!0):t}function Xt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Yt(e,t,n){t instanceof hn?(e.h=t,mn(e.h,e.g)):(n||(t=rn(t,cn)),e.h=new hn(t,e.g))}function Jt(e,t,n){e.h.set(t,n)}function Zt(e){return Jt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function en(e){return e instanceof zt?Ht(e):new zt(e,void 0)}function tn(e,t,n,r){var i=new zt(null,void 0);return e&&$t(i,e),t&&Qt(i,t),n&&Xt(i,n),r&&(i.l=r),i}function nn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function rn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,on),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function on(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}zt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(rn(t,an,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(rn(t,an,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(rn(n,"/"==n.charAt(0)?un:sn,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",rn(n,ln)),e.join("")};var an=/[#\/\?@]/g,sn=/[#\?:]/g,un=/[#\?]/g,cn=/[#\?@]/g,ln=/#/g;function hn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fn(e){e.g||(e.g=new qt,e.h=0,e.i&&Gt(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function dn(e,t){fn(e),t=vn(e,t),Kt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Kt(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Bt(e)))}function pn(e,t){return fn(e),t=vn(e,t),Kt(e.g.h,t)}function gn(e,t,n){dn(e,t),0<n.length&&(e.i=null,e.g.set(vn(e,t),A(n)),e.h+=n.length)}function vn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function mn(e,t){t&&!e.j&&(fn(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dn(this,t),gn(this,n,e))}),e)),e.j=t}a=hn.prototype,a.add=function(e,t){fn(this),this.i=null,e=vn(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},a.forEach=function(e,t){fn(this),this.g.forEach((function(n,r){O(n,(function(n){e.call(t,n,r,this)}),this)}),this)},a.T=function(){fn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},a.R=function(e){fn(this);var t=[];if("string"===typeof e)pn(this,e)&&(t=S(t,this.g.get(vn(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=S(t,e[n])}return t},a.set=function(e,t){return fn(this),this.i=null,e=vn(this,e),pn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},a.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var yn=function(){function e(e,t){this.h=e,this.g=t}return e}();function bn(e){this.l=e||_n,c.PerformanceNavigationTiming?(e=c.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(c.g&&c.g.Ea&&c.g.Ea()&&c.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _n=10;function wn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Tn(e){return e.h?1:e.g?e.g.size:0}function In(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function En(e,t){e.g?e.g.add(t):e.h=t}function On(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function kn(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=o(e.g.values()),a=i.next();!a.done;a=i.next()){var s=a.value;r=r.concat(s.D)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return A(e.i)}function Sn(){}function An(){this.g=new Sn}function jn(e,t,n){var r=n||"";try{Vt(e,(function(e,n){var i=e;f(e)&&(i=xe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Cn(e,t){var n=new Je;if(c.Image){var r=new Image;r.onload=b(xn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(xn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(xn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(xn,n,r,"TestLoadImage: timeout",!1,t),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}function xn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Dn(e){this.l=e.$b||null,this.j=e.ib||!1}function Nn(e,t){Ae.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Rn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bn.prototype.cancel=function(){var e,t;if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=o(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},Sn.prototype.stringify=function(e){return c.JSON.stringify(e,void 0)},Sn.prototype.parse=function(e){return c.JSON.parse(e,void 0)},_(Dn,gt),Dn.prototype.g=function(){return new Nn(this.l,this.j)},Dn.prototype.i=function(e){return function(){return e}}({}),_(Nn,Ae);var Rn=0;function Pn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ln(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mn(e)}function Mn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}a=Nn.prototype,a.open=function(e,t){if(this.readyState!=Rn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mn(this)},a.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||c).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},a.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ln(this)),this.readyState=Rn},a.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof c.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},a.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ln(this):Mn(this),3==this.readyState&&Pn(this)}},a.Ua=function(e){this.g&&(this.response=this.responseText=e,Ln(this))},a.Ta=function(e){this.g&&(this.response=e,Ln(this))},a.ha=function(){this.g&&Ln(this)},a.setRequestHeader=function(e,t){this.v.append(e,t)},a.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Fn=c.JSON.parse;function Un(e){Ae.call(this),this.headers=new qt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vn,this.K=this.L=!1}_(Un,Ae);var Vn="",qn=/^https?$/i,Bn=["POST","PUT"];function Kn(e){return W&&te()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function Wn(e){return"content-type"==e.toLowerCase()}function Gn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,zn(e),$n(e)}function zn(e){e.D||(e.D=!0,je(e,"complete"),je(e,"error"))}function Hn(e){if(e.h&&"undefined"!=typeof u&&(!e.C[1]||4!=Xn(e)||2!=e.ba()))if(e.v&&4==Xn(e))Ge(e.Fa,0,e);else if(je(e,"readystatechange"),4==Xn(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(Wt)[1]||null;if(!o&&c.self&&c.self.location){var a=c.self.location.protocol;o=a.substr(0,a.length-1)}i=!qn.test(o?o.toLowerCase():"")}t=i}if(t)je(e,"complete"),je(e,"success");else{e.m=6;try{var s=2<Xn(e)?e.g.statusText:""}catch(l){s=""}e.j=s+" ["+e.ba()+"]",zn(e)}}finally{$n(e)}}}function $n(e,t){if(e.g){Qn(e);var n=e.g,r=e.C[0]?l:null;e.g=null,e.C=null,t||je(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Qn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(c.clearTimeout(e.A),e.A=null)}function Xn(e){return e.g?e.g.readyState:0}function Yn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Vn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jn(e){var t="";return L(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Jt(e,t,n))}function er(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tr(e){this.za=0,this.l=[],this.h=new Je,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=er("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=er("baseRetryDelayMs",5e3,e),this.$a=er("retryDelaySeedMs",1e4,e),this.Ya=er("forwardChannelMaxRetries",2,e),this.ra=er("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new bn(e&&e.concurrentRequestLimit),this.Ca=new An,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function nr(e){if(ir(e),3==e.G){var t=e.V++,n=Ht(e.F);Jt(n,"SID",e.J),Jt(n,"RID",t),Jt(n,"TYPE","terminate"),cr(e,n),t=new It(e,e.h,t,void 0),t.K=2,t.v=Zt(Ht(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(t.v.toString(),"")),!n&&c.Image&&((new Image).src=t.v,n=!0),n||(t.g=wr(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Nt(t)}br(e)}function rr(e){e.g&&(dr(e),e.g.cancel(),e.g=null)}function ir(e){rr(e),e.u&&(c.clearTimeout(e.u),e.u=null),gr(e),e.i.cancel(),e.m&&("number"===typeof e.m&&c.clearTimeout(e.m),e.m=null)}function or(e,t){e.l.push(new yn(e.Za++,t)),3==e.G&&ar(e)}function ar(e){wn(e.i)||e.m||(e.m=!0,Fe(e.Ha,e),e.C=0)}function sr(e,t){return!(Tn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ft(y(e.Ha,e,t),mr(e,e.C)),e.C++,!0))}function ur(e,t){var n;n=t?t.m:e.V++;var r=Ht(e.F);Jt(r,"SID",e.J),Jt(r,"RID",n),Jt(r,"AID",e.U),cr(e,r),e.o&&e.s&&Zn(r,e.o,e.s),n=new It(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=lr(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),En(e.i,n),At(n,r,t)}function cr(e,t){e.j&&Vt({},(function(e,n){Jt(t,n,e)}))}function lr(e,t,n){n=Math.min(e.l.length,n);var r=e.j?y(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(c-=o,0>c)o=Math.max(0,i[u].h-100),s=!1;else try{jn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function hr(e){e.g||e.u||(e.Y=1,Fe(e.Ga,e),e.A=0)}function fr(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ft(y(e.Ga,e),mr(e,e.A)),e.A++,!0)}function dr(e){null!=e.B&&(c.clearTimeout(e.B),e.B=null)}function pr(e){e.g=new It(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ht(e.oa);Jt(t,"RID","rpc"),Jt(t,"SID",e.J),Jt(t,"CI",e.N?"0":"1"),Jt(t,"AID",e.U),cr(e,t),Jt(t,"TYPE","xmlhttp"),e.o&&e.s&&Zn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Zt(Ht(t)),n.s=null,n.U=!0,jt(n,e)}function gr(e){null!=e.v&&(c.clearTimeout(e.v),e.v=null)}function vr(e,t){var n=null;if(e.g==t){gr(e),dr(e),e.g=null;var r=2}else{if(!In(e.i,t))return;n=t.D,On(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=at(),je(r,new ht(r,n,t,i)),ar(e)}else hr(e);else if(i=t.o,3==i||0==i&&0<e.I||!(1==r&&sr(e,t)||2==r&&fr(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:yr(e,5);break;case 4:yr(e,10);break;case 3:yr(e,6);break;default:yr(e,2)}}function mr(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function yr(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=y(e.jb,e);n||(n=new zt("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||$t(n,"https"),Zt(n)),Cn(n.toString(),r)}else lt(2);e.G=0,e.j&&e.j.va(t),br(e),ir(e)}function br(e){e.G=0,e.I=-1,e.j&&(0==kn(e.i).length&&0==e.l.length||(e.i.i.length=0,A(e.l),e.l.length=0),e.j.ua())}function _r(e,t,n){var r=en(n);if(""!=r.i)t&&Qt(r,t+"."+r.i),Xt(r,r.m);else{var i=c.location;r=tn(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&L(e.aa,(function(e,t){Jt(r,t,e)})),t=e.D,n=e.sa,t&&n&&Jt(r,t,n),Jt(r,"VER",e.ma),cr(e,r),r}function wr(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Un(new Dn({ib:!0})):new Un(e.qa),t.L=e.H,t}function Tr(){}function Ir(){if(W&&!(10<=Number(re)))throw Error("Environmental error: no available transport.")}function Er(e,t){Ae.call(this),this.g=new tr(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!j(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!j(t)&&(this.g.D=t,e=this.h,null!==e&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Sr(this)}function Or(e){_t.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kr(){wt.call(this),this.status=1}function Sr(e){this.g=e}a=Un.prototype,a.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yt.g(),this.C=this.u?vt(this.u):vt(yt),this.g.onreadystatechange=y(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void Gn(this,o)}e=n||"";var i=new qt(this.headers);r&&Vt(r,(function(e,t){i.set(t,e)})),r=k(i.T()),n=c.FormData&&e instanceof c.FormData,!(0<=E(Bn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qn(this),0<this.B&&((this.K=Kn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y(this.pa,this)):this.A=Ge(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Gn(this,o)}},a.pa=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,je(this,"timeout"),this.abort(8))},a.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,je(this,"complete"),je(this,"abort"),$n(this))},a.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$n(this,!0)),Un.Z.M.call(this)},a.Fa=function(){this.s||(this.F||this.v||this.l?Hn(this):this.cb())},a.cb=function(){Hn(this)},a.ba=function(){try{return 2<Xn(this)?this.g.status:-1}catch(e){return-1}},a.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},a.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Fn(t)}},a.Da=function(){return this.m},a.La=function(){return"string"===typeof this.j?this.j:String(this.j)},a=tr.prototype,a.ma=8,a.G=1,a.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},a.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new It(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=M(n),U(n,this.P)):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(o="__data__"in o.g&&(o=o.g.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(r+=o,4096<r){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=lr(this,t,r),i=Ht(this.F),Jt(i,"RID",e),Jt(i,"CVER",22),this.D&&Jt(i,"X-HTTP-Session-Id",this.D),cr(this,i),this.o&&n&&Zn(i,this.o,n),En(this.i,t),this.Ra&&Jt(i,"TYPE","init"),this.ja?(Jt(i,"$req",r),Jt(i,"SID","null"),t.$=!0,At(t,i,null)):At(t,i,r),this.G=2}}else 3==this.G&&(e?ur(this,e):0==this.l.length||wn(this.i)||ur(this))},a.Ga=function(){if(this.u=null,pr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ft(y(this.bb,this),e)}},a.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,lt(10),rr(this),pr(this))},a.ab=function(){null!=this.v&&(this.v=null,rr(this),fr(this),lt(19))},a.jb=function(e){e?(this.h.info("Successfully pinged google.com"),lt(2)):(this.h.info("Failed to ping google.com"),lt(1))},a=Tr.prototype,a.xa=function(){},a.wa=function(){},a.va=function(){},a.ua=function(){},a.Oa=function(){},Ir.prototype.g=function(e,t){return new Er(e,t)},_(Er,Ae),Er.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Fe(y(e.hb,e,t))),lt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=_r(e,null,e.W),ar(e)},Er.prototype.close=function(){nr(this.g)},Er.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,or(this.g,t)}else this.v?(t={},t.__data__=xe(e),or(this.g,t)):or(this.g,e)},Er.prototype.M=function(){this.g.j=null,delete this.j,nr(this.g),delete this.g,Er.Z.M.call(this)},_(Or,_t),_(kr,wt),_(Sr,Tr),Sr.prototype.xa=function(){je(this.g,"a")},Sr.prototype.wa=function(e){je(this.g,new Or(e))},Sr.prototype.va=function(e){je(this.g,new kr(e))},Sr.prototype.ua=function(){je(this.g,"b")},Ir.prototype.createWebChannel=Ir.prototype.g,Er.prototype.send=Er.prototype.u,Er.prototype.open=Er.prototype.m,Er.prototype.close=Er.prototype.close,dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,pt.COMPLETE="complete",mt.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",Ae.prototype.listen=Ae.prototype.N,Un.prototype.listenOnce=Un.prototype.O,Un.prototype.getLastError=Un.prototype.La,Un.prototype.getLastErrorCode=Un.prototype.Da,Un.prototype.getStatus=Un.prototype.ba,Un.prototype.getResponseJson=Un.prototype.Qa,Un.prototype.getResponseText=Un.prototype.ga,Un.prototype.send=Un.prototype.ea;var Ar=function(){return new Ir},jr=function(){return at()},Cr=dt,xr=pt,Dr=it,Nr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Rr=Dn,Pr=mt,Lr=Un}).call(this,n("c8ba"))},d28b:function(e,t,n){var r=n("746f");r("iterator")},e01a:function(e,t,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),a=n("5135"),s=n("861d"),u=n("9bf2").f,c=n("e893"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(h[t]=!0),t};c(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(a(h,e))return"";var n=g?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},f8a0:function(e,t,n){"use strict";n("6b43")},fac1:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container-select"}},[n("select",{staticClass:"app-select browser-default",staticStyle:{border:"1px solid #808080"},attrs:{id:e.selectID},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},change:function(t){return e.$emit("select-change",t.target.value,e.count)}}},[e._t("default")],2),n("label",{staticClass:"select-label",attrs:{for:e.selectID}},[e._v(e._s(e.label))])])},i=[],o=(n("a9e3"),{name:"AppSelect",props:{selectID:String,label:String,value:String|Number,count:[String,Number]}}),a=o,s=(n("f8a0"),n("2877")),u=Object(s["a"])(a,r,i,!1,null,"18eb5c8c",null);t["a"]=u.exports}}]);
//# sourceMappingURL=chunk-56944a54.7e9fd6e6.js.map