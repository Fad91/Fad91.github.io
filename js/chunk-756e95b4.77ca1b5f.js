(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-756e95b4"],{"07ed":function(e,t,n){"use strict";n("e19e")},"0ab3":function(e,t,n){},"1b06":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container-line-text"}},[n("input",{staticClass:"line-text",attrs:{type:"text",maxlength:e.maxLength,id:e.inputID,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("label",{staticClass:"line-text-label",attrs:{for:e.inputID}},[e._v(e._s(e.label))])])},r=[],o=(n("a9e3"),{name:"AppLinetext",props:{inputID:String,placeholder:String,maxLength:String,label:String,value:[Number,String],subdivision:String}}),s=o,i=(n("3b23"),n("2877")),d=Object(i["a"])(s,a,r,!1,null,"68000642",null);t["a"]=d.exports},2532:function(e,t,n){"use strict";var a=n("23e7"),r=n("5a34"),o=n("1d80"),s=n("ab13");a({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(o(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("6b75");function r(e){if(Array.isArray(e))return Object(a["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=n("06c5");function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return r(e)||o(e)||Object(s["a"])(e)||i()}},3368:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppPopupWrapper",{attrs:{hidden:e.hidePopupStatus}},[n("AppTopPanel",{attrs:{header:e.header},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"delete",size:"1.8rem",title:"Удалить"},on:{"button-click":function(t){return e.$emit("delete-element")}}}),n("AppButtonIcon",{attrs:{icon:"close",size:"1.8rem",title:"Закрыть"},on:{"button-click":function(t){return e.$emit("close-popup")}}})]},proxy:!0}])}),n("div",{staticClass:"popup-delete-wrapper"},[n("p",[e._t("popup-delete-content")],2)])],1)},r=[],o=n("a26a"),s=n("34b0"),i=n("373c"),d={name:"PopupDeleteWrapper",components:{AppPopupWrapper:o["a"],AppTopPanel:s["a"],AppButtonIcon:i["a"]},props:{hidePopupStatus:Boolean,header:String}},c=d,l=(n("93f4"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,"18d3d347",null);t["a"]=u.exports},"34b0":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app-top-panel"}},[n("h3",{staticClass:"top-panel-header"},[e._v(e._s(e.header))]),n("div",{staticClass:"top-panel-nav-buttons"},[e._t("nav-buttons")],2)])},r=[],o={name:"AppTopPanel",props:{header:String}},s=o,i=(n("bdaf"),n("2877")),d=Object(i["a"])(s,a,r,!1,null,"11bb2a0a",null);t["a"]=d.exports},"3a7b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppPopupWrapper",{attrs:{hidden:e.hidden}},[n("AppTopPanel",{attrs:{header:e.header},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"add",size:"1.8rem",title:"Добавить"},on:{"button-click":function(t){return e.$emit("popup-add")}}}),n("AppButtonIcon",{attrs:{icon:"close",size:"1.8rem",title:"Закрыть"},on:{"button-click":function(t){return e.$emit("popup-close")}}})]},proxy:!0}])}),n("div",{staticClass:"popup-add-wrapper"},[e._t("popup-add-content")],2)],1)},r=[],o=n("a26a"),s=n("34b0"),i=n("373c"),d={name:"PopupAddWrapper",components:{AppPopupWrapper:o["a"],AppTopPanel:s["a"],AppButtonIcon:i["a"]},props:{hidden:Boolean,header:String,objectAdded:Object},data:function(){return{addedCity:{},firstNote:"Город был создан"}},created:function(){this.renewAddedData()},methods:{renewAddedData:function(){this.addedCity={id:Date.now(),name:"",notes:["Город был создан"],notesCount:"5"},this.firstNote="Город был создан"},addCity:function(e){this.$emit("add-city",e),this.renewAddedData()}}},c=d,l=n("2877"),u=Object(l["a"])(c,a,r,!1,null,null,null);t["a"]=u.exports},"3b23":function(e,t,n){"use strict";n("cf75")},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),o=n("b622"),s=o("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},"4b15":function(e,t,n){"use strict";n("4ce5")},"4ce5":function(e,t,n){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("5899"),o="["+r+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),d=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},"5a34":function(e,t,n){var a=n("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},6062:function(e,t,n){"use strict";var a=n("6d61"),r=n("6566");e.exports=a("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},"619a":function(e,t,n){"use strict";n("dda0")},"633e":function(e,t,n){},6566:function(e,t,n){"use strict";var a=n("9bf2").f,r=n("7c73"),o=n("e2cc"),s=n("0366"),i=n("19aa"),d=n("2266"),c=n("7dd0"),l=n("2626"),u=n("83ab"),p=n("f183").fastKey,f=n("69f3"),h=f.set,v=f.getterFor;e.exports={getConstructor:function(e,t,n,c){var l=e((function(e,a){i(e,l,t),h(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),u||(e.size=0),void 0!=a&&d(a,e[c],e,n)})),f=v(t),m=function(e,t,n){var a,r,o=f(e),s=b(e,t);return s?s.value=n:(o.last=s={index:r=p(t,!0),key:t,value:n,previous:a=o.last,next:void 0,removed:!1},o.first||(o.first=s),a&&(a.next=s),u?o.size++:e.size++,"F"!==r&&(o.index[r]=s)),e},b=function(e,t){var n,a=f(e),r=p(t);if("F"!==r)return a.index[r];for(n=a.first;n;n=n.next)if(n.key==t)return n};return o(l.prototype,{clear:function(){var e=this,t=f(e),n=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;t.first=t.last=void 0,u?t.size=0:e.size=0},delete:function(e){var t=this,n=f(t),a=b(t,e);if(a){var r=a.next,o=a.previous;delete n.index[a.index],a.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==a&&(n.first=r),n.last==a&&(n.last=o),u?n.size--:t.size--}return!!a},forEach:function(e){var t,n=f(this),a=s(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),o(l.prototype,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),u&&a(l.prototype,"size",{get:function(){return f(this).size}}),l},setStrong:function(e,t,n){var a=t+" Iterator",r=v(t),o=v(a);c(e,t,(function(e,t){h(this,{type:a,target:e,state:r(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},"66da":function(e,t,n){"use strict";n("9dfd")},"6d61":function(e,t,n){"use strict";var a=n("23e7"),r=n("da84"),o=n("94ca"),s=n("6eeb"),i=n("f183"),d=n("2266"),c=n("19aa"),l=n("861d"),u=n("d039"),p=n("1c7e"),f=n("d44e"),h=n("7156");e.exports=function(e,t,n){var v=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),b=v?"set":"add",_=r[e],S=_&&_.prototype,k=_,E={},A=function(e){var t=S[e];s(S,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof _||!(m||S.forEach&&!u((function(){(new _).entries().next()})))))k=n.getConstructor(t,e,v,b),i.REQUIRED=!0;else if(o(e,!0)){var g=new k,D=g[b](m?{}:-0,1)!=g,y=u((function(){g.has(1)})),w=p((function(e){new _(e)})),C=!m&&u((function(){var e=new _,t=5;while(t--)e[b](t,t);return!e.has(-0)}));w||(k=t((function(t,n){c(t,k,e);var a=h(new _,t,k);return void 0!=n&&d(n,a[b],a,v),a})),k.prototype=S,S.constructor=k),(y||C)&&(A("delete"),A("has"),v&&A("get")),(C||D)&&A(b),m&&S.clear&&delete S.clear}return E[e]=k,a({global:!0,forced:k!=_},E),f(k,e),m||n.setStrong(k,e,v),k}},"6e81":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"app-table-row",on:{dblclick:function(t){return e.$emit("db-click")},click:function(t){return e.$emit("on-click")}}},[e._t("row-content")],2)},r=[],o={name:"AppTableWrapperRow"},s=o,i=(n("84ad"),n("2877")),d=Object(i["a"])(s,a,r,!1,null,"f4bc0862",null);t["a"]=d.exports},7156:function(e,t,n){var a=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var o,s;return r&&"function"==typeof(o=t.constructor)&&o!==n&&a(s=o.prototype)&&s!==n.prototype&&r(e,s),e}},"84ad":function(e,t,n){"use strict";n("0ab3")},"8c56":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app-deal"}},[n("DealPopupAdd",{attrs:{popupHidden:e.popupAddDeal},on:{"popup-toggle":e.popupAddToggle,"add-deal":e.addDeal}}),n("AppTopPanel",{attrs:{header:"Список заявок"},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"add",size:"1.8rem",title:"Добавить"},on:{"button-click":function(t){return e.popupAddToggle()}}})]},proxy:!0}])}),n("div",{staticClass:"app-deal-content"},[n("DealsTable",{attrs:{deals:e.deals},on:{"remove-deal":e.removeDeal,"set-current-deal":e.setCurrentDeal}})],1)],1)},r=[],o=n("b85c"),s=n("5530"),i=(n("b0c0"),n("260b")),d=n("2f62"),c=n("34b0"),l=n("373c"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupAddWrapper",{attrs:{hidden:e.popupHidden,header:"Добавление заявки"},on:{"popup-add":function(t){return e.validateDeal(e.addedDeal)},"popup-close":function(t){return e.$emit("popup-toggle")}},scopedSlots:e._u([{key:"popup-add-content",fn:function(){return[n("AppLineText",{attrs:{inputID:"input-deal-name",label:"Название: ",maxLength:"40"},model:{value:e.addedDeal.name,callback:function(t){e.$set(e.addedDeal,"name",t)},expression:"addedDeal.name"}}),n("AppLineDate",{attrs:{dateID:"input-deal-date-start",label:"Начало: "},model:{value:e.dateStart,callback:function(t){e.dateStart=t},expression:"dateStart"}}),n("AppLineDate",{attrs:{dateID:"input-deal-date-end",label:"Конец: "},model:{value:e.dateEnd,callback:function(t){e.dateEnd=t},expression:"dateEnd"}}),n("div",{staticClass:"select"},[n("p",{staticClass:"select-label"},[e._v("Заказчик")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.addedDeal.customer,expression:"addedDeal.customer"}],staticClass:"app-select browser-default",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.addedDeal,"customer",t.target.multiple?n:n[0])}}},e._l(e.customers,(function(t){return n("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.name))])})),0)]),""!==e.addedDeal.customer?n("AppSelect",{attrs:{selectID:"select-subdivision",label:"Подразделение: "},model:{value:e.addedDeal.subdivision,callback:function(t){e.$set(e.addedDeal,"subdivision",t)},expression:"addedDeal.subdivision"}},e._l(e.addedDeal.customer.subdivisions,(function(t){return n("option",{key:t.id,domProps:{value:t.name}},[e._v(e._s(t.name))])})),0):e._e(),n("AppLineText",{attrs:{inputID:"input-deal-count",label:"Кол-во рабочих: ",maxLength:"20"},model:{value:e.addedDeal.neededWorkersCount,callback:function(t){e.$set(e.addedDeal,"neededWorkersCount",t)},expression:"addedDeal.neededWorkersCount"}}),e._l(e.workersCount,(function(t){return n("div",{key:t},[n("AppSelect",{attrs:{selectID:"select-workers",label:"Рабочий "+t+": ",value:e.elementCountNumber(t)},on:{"select-change":e.pushMoreWorkers}},[n("option",{attrs:{value:""}},[e._v("Никого, выберите рабочего")]),e._l(e.localWorkers,(function(t){return n("option",{key:t.id},[e._v(e._s(t.surname)+" "+e._s(t.name))])}))],2)],1)})),n("p",{staticClass:"button-add",on:{click:function(t){return e.addMoreWorkers()}}},[e._v("Добавить ещё одного рабочего")])]},proxy:!0}])})},p=[],f=n("2909"),h=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("99af"),n("3a7b")),v=n("1b06"),m=n("7c82"),b=n("fac1"),_={name:"DealPopupAdd",data:function(){return{addedDeal:{},localWorkers:"",workersCount:1,addedWorkers:new Set,dateStart:"",dateEnd:"",neededWorkersCount:"",validate:!1}},computed:Object(s["a"])({},Object(d["c"])(["workers","customers"])),components:{PopupAddWrapper:h["a"],AppLineText:v["a"],AppLineDate:m["a"],AppSelect:b["a"]},props:{popupHidden:Boolean},watch:{dateStart:function(){this.addedDeal.dateStart=this.dateStart},dateEnd:function(){this.addedDeal.dateEnd=this.dateEnd}},created:function(){this.renewAddedData(),this.SET_WORKERS_FROM_LOCAL_STORAGE(),this.SET_CUSTOMERS_FROM_LOCAL_STORAGE(),this.checkWorkers()},methods:Object(s["a"])(Object(s["a"])({},Object(d["d"])(["SET_WORKERS_FROM_LOCAL_STORAGE","SET_CUSTOMERS_FROM_LOCAL_STORAGE"])),{},{elementCountNumber:function(e){var t,n=0,a=Object(o["a"])(this.addedWorkers);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(n++,n===e)return r}}catch(s){a.e(s)}finally{a.f()}},addMoreWorkers:function(){this.workersCount++,this.checkWorkers()},pushMoreWorkers:function(e){this.addedWorkers.add(e)},checkWorkers:function(){for(var e in this.localWorkers=Object(s["a"])({},this.workers),this.localWorkers)"Да"===this.localWorkers[e].fired&&delete this.localWorkers[e];if(""!==this.dateStart)try{for(var t in this.localWorkers){var n,a=Object(o["a"])(this.localWorkers[t].events);try{for(a.s();!(n=a.n()).done;){var r=n.value;void 0!==this.localWorkers[t]&&r.start<this.dateStart&&delete this.localWorkers[t]}}catch(u){a.e(u)}finally{a.f()}}}catch(p){}if(""!==this.dateEnd)try{for(var i in this.localWorkers){var d,c=Object(o["a"])(this.localWorkers[i].events);try{for(c.s();!(d=c.n()).done;){var l=d.value;void 0!==this.localWorkers[i]&&l.end<this.dateEnd&&delete this.localWorkers[i]}}catch(u){c.e(u)}finally{c.f()}}}catch(p){}},renewAddedData:function(){this.addedDeal={id:Date.now(),name:"Новая заявка",customer:"",workers:"",dateStart:"",dateEnd:"",workersCount:"",workersLength:0,notes:["".concat((new Date).toLocaleDateString()," Заявка создана")],notesCount:"",subdivision:"",history:[{date:"[Дата: ".concat((new Date).toLocaleDateString()," Время: ").concat((new Date).toLocaleTimeString(),"]"),info:"Заявка создана",employee:{name:"",id:""}}]}},validateDeal:function(e){this.dateStart?this.dateEnd?this.addedDeal.customer?this.addedDeal.neededWorkersCount?""===document.querySelector("#select-workers").value?M.toast({html:"Внимание! Выберите рабочего!"}):(M.toast({html:"Все поля заполнены, ты молодец-удалец!"}),this.validate=!0,e.workers=Object(f["a"])(this.addedWorkers),this.$emit("add-deal",e),this.renewAddedData()):M.toast({html:"Внимание! Укажите количество рабочих!"}):M.toast({html:"Внимание! Выберите заказчика!"}):M.toast({html:"Внимание! Дата окончания заявки не заполнена!"}):M.toast({html:"Внимание! Дата начала заявки не заполнена!"})}})},S=_,k=(n("66da"),n("2877")),E=Object(k["a"])(S,u,p,!1,null,null,null),A=E.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"date-label",attrs:{for:"date-filter"}},[e._v("Поиск заявок по клиенту "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchByCustomer,expression:"searchByCustomer"}],staticClass:"date-input",attrs:{type:"search",name:"date-filter",id:"date-filter",placeholder:"Введите имя клиента"},domProps:{value:e.searchByCustomer},on:{input:[function(t){t.target.composing||(e.searchByCustomer=t.target.value)},e.searchDealsByCustomer]}})]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"filter-button",attrs:{type:"button"},on:{click:e.showClosedDeals}},[e._v("Показать закрытые заявки")]),n("button",{staticClass:"filter-button filter-button--red",attrs:{type:"button"},on:{click:e.showOpenedDeals}},[e._v("Показать открытые заявки")]),n("button",{staticClass:"filter-button filter-button--grey",attrs:{type:"button"},on:{click:e.showAllDeals}},[e._v("Показать все заявки")])]),n("AppTableWrapper",{scopedSlots:e._u([{key:"table-content",fn:function(){return[n("PopupDeleteWrapper",{attrs:{hidePopupStatus:e.popupRemoveHidden,header:"Удаление заявки "+e.currentDeal.name},on:{"close-popup":function(t){return e.popupRemoveToggle({})},"delete-element":function(t){e.$emit("remove-deal",e.currentDeal.id),e.popupRemoveToggle({})}},scopedSlots:e._u([{key:"popup-delete-content",fn:function(){return[e._v(" После нажатия на иконку корзины будет удалёна заявка "),n("b",[e._v(e._s(e.currentDeal.name))])]},proxy:!0}])}),n("AppTableWrapperRow",{scopedSlots:e._u([{key:"row-content",fn:function(){return[n("th",[e._v("Название")]),n("th",[e._v("Клиент")]),n("th",[e._v("Подразделение")]),n("th",[e._v("Количество"),n("br"),e._v("рабочих")]),n("th",[e._v("Начало заявки")]),n("th",[e._v("Конец заявки")]),n("th",[e._v("Заметка")])]},proxy:!0}])}),e._l(e.data,(function(t){return[n("AppTableWrapperRow",{key:t.id,on:{"on-click":function(n){return e.$router.push({name:"dealEdit",params:{id:t.id}})}},scopedSlots:e._u([{key:"row-content",fn:function(){return[n("td",{attrs:{title:t.name}},[e._v(e._s(t.name))]),n("td",{staticClass:"column-td",class:t.neededWorkersCount==t.workers.length?"column-td--green":"column-td--red"},[n("router-link",{attrs:{title:"Перейти к клиенту",to:{name:"customerAbout",params:{id:t.customer.id}}}},[e._v(" "+e._s(t.customer.name)+" ")])],1),n("td",{staticClass:"column-td",class:t.neededWorkersCount==t.workers.length?"column-td--green":"column-td--red",attrs:{title:t.subdivision}},[e._v(" "+e._s(t.subdivision)+" ")]),n("td",{staticClass:"column-td",class:t.neededWorkersCount==t.workers.length?"column-td--green":"column-td--red",attrs:{title:t.workers}},[n("span",[e._v(e._s(t.workers.length))]),n("span",[e._v(" / ")]),t.neededWorkersCount?n("span",[e._v(" "+e._s(t.neededWorkersCount)+" ")]):n("span",[e._v("0")])]),n("td",{staticClass:"column-td",class:t.neededWorkersCount==t.workers.length?"column-td--green":"column-td--red",attrs:{title:t.date}},[e._v(e._s(t.dateStart.slice(0,10)))]),n("td",{staticClass:"column-td",class:t.neededWorkersCount==t.workers.length?"column-td--green":"column-td--red",attrs:{title:t.date}},[e._v(e._s(t.dateEnd.slice(0,10)))]),t.notes?n("td",{staticClass:"column-td",class:t.neededWorkersCount==t.workers.length?"column-td--green":"column-td--red",attrs:{title:t.notes[t.notes.length-1]}},[e._v(" "+e._s(t.notes[t.notes.length-1].slice(10))+" ")]):n("td",{staticClass:"column-td",class:t.neededWorkersCount==t.workers.length?"column-td--green":"column-td--red"},[e._v("Заметок нет")]),n("td",{staticClass:"row-action"},[n("AppButtonIcon",{attrs:{icon:"create",title:"Редактировать",size:"1.5rem"},on:{"button-click":function(n){return e.$router.push({name:"dealEdit",params:{id:t.id}})}}}),n("AppButtonIcon",{attrs:{icon:"delete",title:"Удалить",size:"1.5rem"},on:{"button-click":function(n){return e.popupRemoveToggle(t)}}})],1)]},proxy:!0}],null,!0)})]}))]},proxy:!0}])})],1)},D=[],y=(n("4de4"),n("caad"),n("2532"),n("3368")),w=n("eda4"),C=n("6e81"),O=n("2ef0"),R=n.n(O),x={name:"DealsTable",components:{PopupDeleteWrapper:y["a"],AppButtonIcon:l["a"],AppTableWrapper:w["a"],AppTableWrapperRow:C["a"]},data:function(){return{searchByCustomer:"",popupRemoveHidden:!0,currentDeal:{},show:!1,showed:!1,workersCount:"",workersLength:null,data:[],clicked:null,searchDateDeals:[],closedDeals:[],openedDeals:[]}},props:{deals:Object},methods:{popupRemoveToggle:function(e){this.popupRemoveHidden=!this.popupRemoveHidden,this.currentDeal=e},searchDealsByCustomer:function(){var e=this;if(""===this.searchByCustomer)return this.data=R.a.toArray(this.deals),this.data;this.data=this.data.filter((function(t){return t.customer.name.includes(e.searchByCustomer)}))},showClosedDeals:function(){var e=this;this.data=R.a.toArray(this.deals),this.data=this.data.filter((function(t){return e.clicked=!0,t.neededWorkersCount==="".concat(t.workers.length)}))},showOpenedDeals:function(){var e=this;this.data=R.a.toArray(this.deals),this.data=this.data.filter((function(t){return e.clicked=!0,t.neededWorkersCount!=="".concat(t.workers.length)}))},showAllDeals:function(){this.data=R.a.toArray(this.deals)}},watch:{deals:function(){this.data=R.a.toArray(this.deals)}},created:function(){this.data=R.a.toArray(this.deals),this.searchDateDeals=this.data,this.closedDeals=this.data,this.openedDeals=this.data}},T=x,W=(n("07ed"),Object(k["a"])(T,g,D,!1,null,null,null)),I=W.exports,L={name:"TheDeals",components:{AppTopPanel:c["a"],AppButtonIcon:l["a"],DealPopupAdd:A,DealsTable:I},data:function(){return{popupAddDeal:!0,currentDeal:null}},computed:Object(s["a"])({},Object(d["c"])(["deals","workers","customers"])),created:function(){this.SET_DEALS_FROM_LOCAL_STORAGE(),this.SET_WORKERS_FROM_LOCAL_STORAGE(),this.SET_CUSTOMERS_FROM_LOCAL_STORAGE()},methods:Object(s["a"])(Object(s["a"])({},Object(d["d"])(["SET_DEALS_FROM_LOCAL_STORAGE","SET_DEALS_FROM_SERVER","SET_WORKERS_FROM_SERVER","SET_WORKERS_FROM_LOCAL_STORAGE","SET_CUSTOMERS_FROM_SERVER","SET_CUSTOMERS_FROM_LOCAL_STORAGE"])),{},{popupAddToggle:function(){this.popupAddDeal=!this.popupAddDeal},setCurrentDeal:function(e){this.currentDeal=e},removeDeal:function(e){var t=this;i["a"].database().ref("/deals/"+e).remove().then((function(){console.log("Заявка удалёна 🗑️"),t.SET_DEALS_FROM_SERVER()}))},addDeal:function(e){var t=this;this.popupAddToggle(),e.name=e.name[0].toUpperCase()+e.name.substring(1);var n,a=e.workers,r=e.customer,s=Object(o["a"])(a);try{for(s.s();!(n=s.n()).done;){var d,c=n.value,l=null!==(d=this.workers[c])&&void 0!==d?d:null;if(void 0!==l&&null!==l){l.events.push({id:Date.now(),title:e.name,start:e.dateStart,end:e.dateEnd,dealID:e.id});try{l.dealStatistics.push({name:e.name,customer:e.customer,dateStart:e.dateStart,dateEnd:e.dateEnd,dealID:e.id})}catch(u){l.dealStatistics=[{name:e.name,customer:e.customer,dateStart:e.dateStart,dateEnd:e.dateEnd,dealID:e.id}]}i["a"].database().ref("/workers/"+l.id).set(l).then((function(){t.SET_WORKERS_FROM_SERVER()}))}}}catch(p){s.e(p)}finally{s.f()}if(void 0!==r&&null!==r){try{r.dealStatistics.push({name:e.name,dateStart:e.dateStart,dateEnd:e.dateEnd,dealID:e.id})}catch(u){r.dealStatistics=[{name:e.name,dateStart:e.dateStart,dateEnd:e.dateEnd,dealID:e.id}]}if(i["a"].database().ref("/customers/"+r.id).set(r).then((function(){t.SET_CUSTOMERS_FROM_SERVER()})),""===e.dateStart)throw M.toast({html:"Начало заявки не задано!"}),"Начало заявки не задано";if(""===e.dateEnd)throw M.toast({html:"Конец заявки не задан!"}),"Конец заявки не задан!";e.addedWorkers&&console.log("ТЕст"),i["a"].database().ref("/deals/"+e.id).set(e).then((function(){console.log("Заявки добавлена ➕"),t.popupAddHidden=!0,t.SET_DEALS_FROM_SERVER()}))}else M.toast({html:"Клиент не задан!"});M.toast({html:"Заявка добавлена!"}),this.SET_DEALS_FROM_SERVER()}})},j=L,P=Object(k["a"])(j,a,r,!1,null,null,null);t["default"]=P.exports},"93f4":function(e,t,n){"use strict";n("e420")},"99af":function(e,t,n){"use strict";var a=n("23e7"),r=n("d039"),o=n("e8b5"),s=n("861d"),i=n("7b0b"),d=n("50c4"),c=n("8418"),l=n("65f0"),u=n("1dde"),p=n("b622"),f=n("2d00"),h=p("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",b=f>=51||!r((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),_=u("concat"),S=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)},k=!b||!_;a({target:"Array",proto:!0,forced:k},{concat:function(e){var t,n,a,r,o,s=i(this),u=l(s,0),p=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?s:arguments[t],S(o)){if(r=d(o.length),p+r>v)throw TypeError(m);for(n=0;n<r;n++,p++)n in o&&c(u,p,o[n])}else{if(p>=v)throw TypeError(m);c(u,p++,o)}return u.length=p,u}})},"9dfd":function(e,t,n){},a26a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.hidden?"hidden":"",attrs:{id:"app-popup-wrapper"}},[n("div",{staticClass:"popup-wrapper-overlay"},[n("div",{staticClass:"popup-wrapper-content"},[e._t("default")],2)])])},r=[],o={name:"PopupWrapper",props:{hidden:Boolean}},s=o,i=(n("4b15"),n("2877")),d=Object(i["a"])(s,a,r,!1,null,"fa5ad10c",null);t["a"]=d.exports},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),o=n("94ca"),s=n("6eeb"),i=n("5135"),d=n("c6b6"),c=n("7156"),l=n("c04e"),u=n("d039"),p=n("7c73"),f=n("241c").f,h=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,b="Number",_=r[b],S=_.prototype,k=d(p(S))==b,E=function(e){var t,n,a,r,o,s,i,d,c=l(e,!1);if("string"==typeof c&&c.length>2)if(c=m(c),t=c.charCodeAt(0),43===t||45===t){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+c}for(o=c.slice(2),s=o.length,i=0;i<s;i++)if(d=o.charCodeAt(i),d<48||d>r)return NaN;return parseInt(o,a)}return+c};if(o(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var A,g=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof g&&(k?u((function(){S.valueOf.call(n)})):d(n)!=b)?c(new _(E(t)),n,g):E(t)},D=a?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;D.length>y;y++)i(_,A=D[y])&&!i(g,A)&&v(g,A,h(_,A));g.prototype=S,S.constructor=g,s(r,b,g)}},ab13:function(e,t,n){var a=n("b622"),r=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(a){}}return!1}},bb2f:function(e,t,n){var a=n("d039");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bdaf:function(e,t,n){"use strict";n("633e")},caad:function(e,t,n){"use strict";var a=n("23e7"),r=n("4d64").includes,o=n("44d2"),s=n("ae40"),i=s("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!i},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cf75:function(e,t,n){},dda0:function(e,t,n){},e19e:function(e,t,n){},e420:function(e,t,n){},eda4:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-table"},[n("table",[e._t("table-content")],2)])},r=[],o={name:"AppTable"},s=o,i=(n("619a"),n("2877")),d=Object(i["a"])(s,a,r,!1,null,"73c47ab8",null);t["a"]=d.exports},f183:function(e,t,n){var a=n("d012"),r=n("861d"),o=n("5135"),s=n("9bf2").f,i=n("90e3"),d=n("bb2f"),c=i("meta"),l=0,u=Object.isExtensible||function(){return!0},p=function(e){s(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},f=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,c)){if(!u(e))return"F";if(!t)return"E";p(e)}return e[c].objectID},h=function(e,t){if(!o(e,c)){if(!u(e))return!0;if(!t)return!1;p(e)}return e[c].weakData},v=function(e){return d&&m.REQUIRED&&u(e)&&!o(e,c)&&p(e),e},m=e.exports={REQUIRED:!1,fastKey:f,getWeakData:h,onFreeze:v};a[c]=!0}}]);
//# sourceMappingURL=chunk-756e95b4.77ca1b5f.js.map